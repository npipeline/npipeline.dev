<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-extensions/observability/metrics" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Metrics Reference | NPipeline</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://npipeline.dev/docs/extensions/observability/metrics"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Metrics Reference | NPipeline"><meta data-rh="true" name="description" content="Complete reference for all metrics collected by the NPipeline Observability extension, including node and pipeline metrics, calculations, and thread-safety guarantees."><meta data-rh="true" property="og:description" content="Complete reference for all metrics collected by the NPipeline Observability extension, including node and pipeline metrics, calculations, and thread-safety guarantees."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://npipeline.dev/docs/extensions/observability/metrics"><link data-rh="true" rel="alternate" href="https://npipeline.dev/docs/extensions/observability/metrics" hreflang="en"><link data-rh="true" rel="alternate" href="https://npipeline.dev/docs/extensions/observability/metrics" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Extensions","item":"https://npipeline.dev/docs/extensions"},{"@type":"ListItem","position":2,"name":"NPipeline Observability Extension","item":"https://npipeline.dev/docs/extensions/observability/"},{"@type":"ListItem","position":3,"name":"Metrics Reference","item":"https://npipeline.dev/docs/extensions/observability/metrics"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="NPipeline RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="NPipeline Atom Feed">





<script src="//script.crazyegg.com/pages/scripts/0131/6841.js" async="async"></script><link rel="stylesheet" href="/assets/css/styles.4bb8ba71.css">
<script src="/assets/js/runtime~main.f12a64a7.js" defer="defer"></script>
<script src="/assets/js/main.718883bb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="NPipeline logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="NPipeline logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">NPipeline</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/npipeline/npipeline" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/"><span title="Welcome to NPipeline" class="linkLabel_WmDU">Welcome to NPipeline</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/getting-started"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/core-concepts"><span title="Core Concepts" class="categoryLinkLabel_W154">Core Concepts</span></a><button aria-label="Expand sidebar category &#x27;Core Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/architecture/"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a><button aria-label="Collapse sidebar category &#x27;Architecture&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/architectural-foundations"><span title="Architectural Foundations" class="linkLabel_WmDU">Architectural Foundations</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/component-architecture"><span title="Component Architecture" class="linkLabel_WmDU">Component Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/execution-flow"><span title="Execution Flow" class="linkLabel_WmDU">Execution Flow</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/data-flow"><span title="Data Flow Details" class="linkLabel_WmDU">Data Flow Details</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/dependency-injection"><span title="Dependency Injection Integration" class="linkLabel_WmDU">Dependency Injection Integration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/node-instantiation"><span title="Node Instantiation" class="linkLabel_WmDU">Node Instantiation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/error-handling-architecture"><span title="Error Handling Architecture" class="linkLabel_WmDU">Error Handling Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/cancellation-model"><span title="Cancellation Model" class="linkLabel_WmDU">Cancellation Model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/performance-characteristics"><span title="Performance Characteristics" class="linkLabel_WmDU">Performance Characteristics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/retry-delay-architecture"><span title="Retry Delay Strategies Architecture" class="linkLabel_WmDU">Retry Delay Strategies Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/extension-points"><span title="Extension Points" class="linkLabel_WmDU">Extension Points</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/design-principles"><span title="Design Principles" class="linkLabel_WmDU">Design Principles</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/optimization-principles"><span title="Optimization Principles - How NPipeline Achieves High Performance" class="linkLabel_WmDU">Optimization Principles - How NPipeline Achieves High Performance</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/execution-plan-caching"><span title="Execution Plan Caching" class="linkLabel_WmDU">Execution Plan Caching</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/extensions"><span title="Extensions" class="categoryLinkLabel_W154">Extensions</span></a><button aria-label="Collapse sidebar category &#x27;Extensions&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extensions/dependency-injection"><span title="Dependency Injection" class="linkLabel_WmDU">Dependency Injection</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extensions/parallelism"><span title="Parallelism" class="linkLabel_WmDU">Parallelism</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/extensions/testing"><span title="Testing" class="categoryLinkLabel_W154">Testing</span></a><button aria-label="Expand sidebar category &#x27;Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/extensions/nodes"><span title="Nodes Extension" class="categoryLinkLabel_W154">Nodes Extension</span></a><button aria-label="Expand sidebar category &#x27;Nodes Extension&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/extensions/composition/"><span title="Pipeline Composition Extension" class="categoryLinkLabel_W154">Pipeline Composition Extension</span></a><button aria-label="Expand sidebar category &#x27;Pipeline Composition Extension&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/extensions/observability/"><span title="NPipeline Observability Extension" class="categoryLinkLabel_W154">NPipeline Observability Extension</span></a><button aria-label="Collapse sidebar category &#x27;NPipeline Observability Extension&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extensions/observability/opentelemetry"><span title="OpenTelemetry Integration" class="linkLabel_WmDU">OpenTelemetry Integration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extensions/observability/tracing"><span title="Distributed Tracing" class="linkLabel_WmDU">Distributed Tracing</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extensions/observability/advanced-patterns"><span title="Advanced Observability Patterns" class="linkLabel_WmDU">Advanced Observability Patterns</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extensions/observability/configuration"><span title="Observability Configuration" class="linkLabel_WmDU">Observability Configuration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extensions/observability/examples"><span title="Observability Usage Examples" class="linkLabel_WmDU">Observability Usage Examples</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/extensions/observability/metrics"><span title="Metrics Reference" class="linkLabel_WmDU">Metrics Reference</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/connectors"><span title="Connectors" class="categoryLinkLabel_W154">Connectors</span></a><button aria-label="Expand sidebar category &#x27;Connectors&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/advanced-topics"><span title="Advanced Topics" class="categoryLinkLabel_W154">Advanced Topics</span></a><button aria-label="Expand sidebar category &#x27;Advanced Topics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/analyzers/"><span title="Build-Time Analyzers" class="categoryLinkLabel_W154">Build-Time Analyzers</span></a><button aria-label="Expand sidebar category &#x27;Build-Time Analyzers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/samples/"><span title="Samples" class="categoryLinkLabel_W154">Samples</span></a><button aria-label="Expand sidebar category &#x27;Samples&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/reference"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/extensions"><span>Extensions</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/extensions/observability/"><span>NPipeline Observability Extension</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Metrics Reference</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Metrics Reference</h1></header>
<p>This reference provides detailed documentation for all metrics collected by the NPipeline Observability extension, including how metrics are calculated, their data types, and thread-safety considerations.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="node-metrics">Node Metrics<a href="#node-metrics" class="hash-link" aria-label="Direct link to Node Metrics" title="Direct link to Node Metrics" translate="no">​</a></h2>
<p>Node metrics capture performance and execution data for individual nodes within a pipeline. Each node execution produces a complete set of metrics.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="inodemetrics-interface">INodeMetrics Interface<a href="#inodemetrics-interface" class="hash-link" aria-label="Direct link to INodeMetrics Interface" title="Direct link to INodeMetrics Interface" translate="no">​</a></h3>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface INodeMetrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    string NodeId { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DateTimeOffset? StartTime { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DateTimeOffset? EndTime { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long? DurationMs { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool Success { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long ItemsProcessed { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long ItemsEmitted { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Exception? Exception { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int RetryCount { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long? PeakMemoryUsageMb { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long? ProcessorTimeMs { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    double? ThroughputItemsPerSec { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int? ThreadId { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="node-metrics-properties">Node Metrics Properties<a href="#node-metrics-properties" class="hash-link" aria-label="Direct link to Node Metrics Properties" title="Direct link to Node Metrics Properties" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="nodeid">NodeId<a href="#nodeid" class="hash-link" aria-label="Direct link to NodeId" title="Direct link to NodeId" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>string</code></li>
<li class=""><strong>Description</strong>: Unique identifier for the node within the pipeline</li>
<li class=""><strong>Source</strong>: Assigned during pipeline construction</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Example</strong>: <code>&quot;TransformNode&quot;</code> or <code>&quot;SourceNode_1&quot;</code></li>
</ul>
<p><strong>Usage</strong>: Use this property to correlate metrics with specific nodes in your pipeline definition. The node ID matches the handle used when connecting nodes.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="starttime">StartTime<a href="#starttime" class="hash-link" aria-label="Direct link to StartTime" title="Direct link to StartTime" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>DateTimeOffset?</code></li>
<li class=""><strong>Description</strong>: Timestamp when the node execution began</li>
<li class=""><strong>Source</strong>: Recorded when <code>OnNodeStarted</code> event fires</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Resolution</strong>: System clock precision (typically 15-16ms on Windows)</li>
</ul>
<p><strong>Calculation</strong>: Captured at the beginning of node execution using <code>DateTimeOffset.UtcNow</code>.</p>
<p><strong>Usage</strong>: Calculate duration by comparing with <code>EndTime</code>. Useful for identifying when nodes started relative to each other.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="endtime">EndTime<a href="#endtime" class="hash-link" aria-label="Direct link to EndTime" title="Direct link to EndTime" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>DateTimeOffset?</code></li>
<li class=""><strong>Description</strong>: Timestamp when the node execution completed</li>
<li class=""><strong>Source</strong>: Recorded when <code>OnNodeCompleted</code> event fires</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Resolution</strong>: System clock precision</li>
</ul>
<p><strong>Calculation</strong>: Captured at the end of node execution using <code>DateTimeOffset.UtcNow</code>.</p>
<p><strong>Usage</strong>: Calculate duration and identify when nodes finished. Can be null if the node is still executing or if metrics collection failed.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="durationms">DurationMs<a href="#durationms" class="hash-link" aria-label="Direct link to DurationMs" title="Direct link to DurationMs" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>long?</code></li>
<li class=""><strong>Description</strong>: Total execution time in milliseconds</li>
<li class=""><strong>Source</strong>: Calculated from <code>StartTime</code> and <code>EndTime</code></li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Precision</strong>: Millisecond</li>
</ul>
<p><strong>Calculation</strong>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DurationMs = (long)(EndTime - StartTime).TotalMilliseconds</span><br></span></code></pre></div></div>
<p><strong>Usage</strong>: Primary metric for identifying performance bottlenecks. Compare duration across nodes to find slow components.</p>
<p><strong>Note</strong>: Can be null if either <code>StartTime</code> or <code>EndTime</code> is null.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="success">Success<a href="#success" class="hash-link" aria-label="Direct link to Success" title="Direct link to Success" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>bool</code></li>
<li class=""><strong>Description</strong>: Whether the node execution completed successfully</li>
<li class=""><strong>Source</strong>: Determined by exception presence</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
</ul>
<p><strong>Calculation</strong>: <code>true</code> if no exception occurred, <code>false</code> if an exception was thrown.</p>
<p><strong>Usage</strong>: Filter metrics to analyze successful vs. failed executions. Track success rates over time.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="itemsprocessed">ItemsProcessed<a href="#itemsprocessed" class="hash-link" aria-label="Direct link to ItemsProcessed" title="Direct link to ItemsProcessed" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>long</code></li>
<li class=""><strong>Description</strong>: Total number of items processed by the node</li>
<li class=""><strong>Source</strong>: Aggregated from item processing events</li>
<li class=""><strong>Thread-Safe</strong>: Yes (uses <code>Interlocked.Add</code>)</li>
<li class=""><strong>Range</strong>: 0 to <code>long.MaxValue</code></li>
</ul>
<p><strong>Calculation</strong>: Incremented atomically as items are processed. For parallel execution, this represents the total across all threads.</p>
<p><strong>Usage</strong>: Measure node throughput and identify processing volume. Compare with <code>ItemsEmitted</code> to understand filtering ratios.</p>
<p><strong>Thread-Safety</strong>: Uses <code>Interlocked.Add</code> for atomic increments in concurrent scenarios.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="itemsemitted">ItemsEmitted<a href="#itemsemitted" class="hash-link" aria-label="Direct link to ItemsEmitted" title="Direct link to ItemsEmitted" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>long</code></li>
<li class=""><strong>Description</strong>: Total number of items emitted by the node</li>
<li class=""><strong>Source</strong>: Aggregated from item emission events</li>
<li class=""><strong>Thread-Safe</strong>: Yes (uses <code>Interlocked.Add</code>)</li>
<li class=""><strong>Range</strong>: 0 to <code>long.MaxValue</code></li>
</ul>
<p><strong>Calculation</strong>: Incremented atomically as items are emitted to downstream nodes.</p>
<p><strong>Usage</strong>: Compare with <code>ItemsProcessed</code> to understand filtering behavior. For source nodes, <code>ItemsProcessed</code> equals <code>ItemsEmitted</code>. For filter nodes, <code>ItemsEmitted</code> may be less than <code>ItemsProcessed</code>.</p>
<p><strong>Thread-Safety</strong>: Uses <code>Interlocked.Add</code> for atomic increments in concurrent scenarios.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="exception">Exception<a href="#exception" class="hash-link" aria-label="Direct link to Exception" title="Direct link to Exception" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>Exception?</code></li>
<li class=""><strong>Description</strong>: Exception that caused node failure, if any</li>
<li class=""><strong>Source</strong>: Captured from execution context</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
</ul>
<p><strong>Usage</strong>: Debug failed executions, identify error patterns, and track exception types. Use <code>Exception.Message</code> for logging and <code>Exception.StackTrace</code> for detailed debugging.</p>
<p><strong>Note</strong>: Null if the node executed successfully.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="retrycount">RetryCount<a href="#retrycount" class="hash-link" aria-label="Direct link to RetryCount" title="Direct link to RetryCount" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>int</code></li>
<li class=""><strong>Description</strong>: Maximum number of retry attempts for this node</li>
<li class=""><strong>Source</strong>: Aggregated from retry events</li>
<li class=""><strong>Thread-Safe</strong>: Yes (uses <code>Interlocked.Exchange</code>)</li>
<li class=""><strong>Range</strong>: 0 to <code>int.MaxValue</code></li>
</ul>
<p><strong>Calculation</strong>: Tracks the highest retry attempt number observed. If a node retries 3 times, this value will be 3.</p>
<p><strong>Usage</strong>: Identify unreliable nodes or external dependencies that frequently fail. High retry counts may indicate:</p>
<ul>
<li class="">Unstable external services</li>
<li class="">Transient network issues</li>
<li class="">Insufficient timeout values</li>
<li class="">Resource contention</li>
</ul>
<p><strong>Thread-Safety</strong>: Uses <code>Interlocked.Exchange</code> to ensure the maximum retry count is retained.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="peakmemoryusagemb">PeakMemoryUsageMb<a href="#peakmemoryusagemb" class="hash-link" aria-label="Direct link to PeakMemoryUsageMb" title="Direct link to PeakMemoryUsageMb" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>long?</code></li>
<li class=""><strong>Description</strong>: Per-node managed memory allocation delta in megabytes during node execution</li>
<li class=""><strong>Source</strong>: Calculated as delta between final and initial memory using <code>GC.GetTotalMemory(false)</code></li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Granularity</strong>: Per-node managed memory allocation delta</li>
</ul>
<p><strong>Calculation</strong>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Initial memory at node start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var initialMemoryBytes = GC.GetTotalMemory(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ... node execution ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Final memory at node end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var finalMemoryBytes = GC.GetTotalMemory(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Calculate delta (memory allocated during node execution)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var deltaBytes = finalMemoryBytes - initialMemoryBytes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var memoryDeltaMb = deltaBytes / (1024 * 1024);</span><br></span></code></pre></div></div>
<p><strong>Usage</strong>: Identify memory-intensive nodes and optimize memory usage. Track memory growth over time to detect leaks.</p>
<p><strong>Important Notes</strong>:</p>
<ul>
<li class="">This is a <strong>per-node delta</strong> of managed memory allocations, not global process memory</li>
<li class="">Memory is measured using <code>GC.GetTotalMemory(false)</code> which captures managed memory allocations</li>
<li class="">In parallel execution, this reflects the memory allocated during that specific node&#x27;s execution</li>
<li class="">May be null if metrics collection fails or is disabled</li>
<li class="">Memory metrics require both extension-level (<code>EnableMemoryMetrics</code>) and node-level (<code>RecordMemoryUsage</code>) options to be enabled</li>
<li class="">Use for relative comparisons between nodes, not absolute memory requirements</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="processortimems">ProcessorTimeMs<a href="#processortimems" class="hash-link" aria-label="Direct link to ProcessorTimeMs" title="Direct link to ProcessorTimeMs" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>long?</code></li>
<li class=""><strong>Description</strong>: Total processor time used in milliseconds</li>
<li class=""><strong>Source</strong>: Not available per-node in current implementation</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Granularity</strong>: Process-level (not node-specific)</li>
</ul>
<p><strong>Important Notes</strong>:</p>
<ul>
<li class="">This metric is <strong>not available per-node</strong> in the current implementation</li>
<li class="">The field is included for future compatibility but will always be <code>null</code> for node metrics</li>
<li class="">If you need CPU metrics, consider using system-level monitoring tools</li>
<li class="">May be null if metrics collection fails or is disabled</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="averageitemprocessingms">AverageItemProcessingMs<a href="#averageitemprocessingms" class="hash-link" aria-label="Direct link to AverageItemProcessingMs" title="Direct link to AverageItemProcessingMs" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>double?</code></li>
<li class=""><strong>Description</strong>: Average time spent processing each item in milliseconds</li>
<li class=""><strong>Source</strong>: Calculated from <code>DurationMs</code> and <code>ItemsProcessed</code></li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Precision</strong>: Double-precision floating point</li>
</ul>
<p><strong>Calculation</strong>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AverageItemProcessingMs = DurationMs / ItemsProcessed</span><br></span></code></pre></div></div>
<p><strong>Usage</strong>: Measure per-item processing efficiency. Identify nodes with high per-item overhead. Compare processing time across different data volumes.</p>
<p><strong>Example</strong>: If a node processes 1000 items in 500ms, average per-item time is 0.5ms.</p>
<p><strong>Note</strong>: Can be null if <code>DurationMs</code> is null or <code>ItemsProcessed</code> is zero.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="throughputitemspersec">ThroughputItemsPerSec<a href="#throughputitemspersec" class="hash-link" aria-label="Direct link to ThroughputItemsPerSec" title="Direct link to ThroughputItemsPerSec" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>double?</code></li>
<li class=""><strong>Description</strong>: Processing throughput in items per second</li>
<li class=""><strong>Source</strong>: Calculated from <code>ItemsProcessed</code> and <code>DurationMs</code></li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Precision</strong>: Double-precision floating point</li>
</ul>
<p><strong>Calculation</strong>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ThroughputItemsPerSec = ItemsProcessed / (DurationMs / 1000.0)</span><br></span></code></pre></div></div>
<p><strong>Usage</strong>: Primary performance metric for comparing node efficiency. Track throughput over time to identify degradation.</p>
<p><strong>Example</strong>: If a node processes 1000 items in 500ms, throughput is 2000 items/sec.</p>
<p><strong>Note</strong>: Can be null if <code>DurationMs</code> is null or zero.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="threadid">ThreadId<a href="#threadid" class="hash-link" aria-label="Direct link to ThreadId" title="Direct link to ThreadId" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>int?</code></li>
<li class=""><strong>Description</strong>: Thread ID that primarily processed this node</li>
<li class=""><strong>Source</strong>: <code>Environment.CurrentManagedThreadId</code></li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
</ul>
<p><strong>Usage</strong>: Understand thread assignment in parallel execution scenarios. Identify thread affinity issues or thread pool contention.</p>
<p><strong>Important Notes</strong>:</p>
<ul>
<li class="">For single-threaded execution, this is the only thread used</li>
<li class="">For parallel execution, this is the thread that started execution</li>
<li class="">May be null if thread tracking is disabled</li>
<li class="">Thread IDs are process-specific and not meaningful across different executions</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="pipeline-metrics">Pipeline Metrics<a href="#pipeline-metrics" class="hash-link" aria-label="Direct link to Pipeline Metrics" title="Direct link to Pipeline Metrics" translate="no">​</a></h2>
<p>Pipeline metrics provide aggregate data for the entire pipeline execution, including summary statistics and individual node metrics.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ipipelinemetrics-interface">IPipelineMetrics Interface<a href="#ipipelinemetrics-interface" class="hash-link" aria-label="Direct link to IPipelineMetrics Interface" title="Direct link to IPipelineMetrics Interface" translate="no">​</a></h3>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface IPipelineMetrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    string PipelineName { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Guid RunId { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DateTimeOffset StartTime { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DateTimeOffset? EndTime { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long? DurationMs { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool Success { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long TotalItemsProcessed { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IReadOnlyList&lt;INodeMetrics&gt; NodeMetrics { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Exception? Exception { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pipeline-metrics-properties">Pipeline Metrics Properties<a href="#pipeline-metrics-properties" class="hash-link" aria-label="Direct link to Pipeline Metrics Properties" title="Direct link to Pipeline Metrics Properties" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="pipelinename">PipelineName<a href="#pipelinename" class="hash-link" aria-label="Direct link to PipelineName" title="Direct link to PipelineName" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>string</code></li>
<li class=""><strong>Description</strong>: Name of the pipeline definition</li>
<li class=""><strong>Source</strong>: Pipeline definition type name or custom name</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Example</strong>: <code>&quot;DataProcessingPipeline&quot;</code> or <code>&quot;ETLPipeline&quot;</code></li>
</ul>
<p><strong>Usage</strong>: Correlate metrics with specific pipeline definitions. Useful when running multiple pipeline types in the same application.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="runid">RunId<a href="#runid" class="hash-link" aria-label="Direct link to RunId" title="Direct link to RunId" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>Guid</code></li>
<li class=""><strong>Description</strong>: Unique identifier for this pipeline execution</li>
<li class=""><strong>Source</strong>: Generated at pipeline start</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Uniqueness</strong>: Globally unique across all executions</li>
</ul>
<p><strong>Usage</strong>: Correlate all metrics from a single pipeline execution. Track executions across distributed systems or log aggregation tools.</p>
<p><strong>Example</strong>: <code>123e4567-e89b-12d3-a456-426614174000</code></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="starttime-1">StartTime<a href="#starttime-1" class="hash-link" aria-label="Direct link to StartTime" title="Direct link to StartTime" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>DateTimeOffset</code></li>
<li class=""><strong>Description</strong>: Timestamp when pipeline execution began</li>
<li class=""><strong>Source</strong>: Recorded at pipeline start</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Resolution</strong>: System clock precision</li>
</ul>
<p><strong>Usage</strong>: Calculate pipeline duration and identify when pipelines started relative to each other.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="endtime-1">EndTime<a href="#endtime-1" class="hash-link" aria-label="Direct link to EndTime" title="Direct link to EndTime" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>DateTimeOffset?</code></li>
<li class=""><strong>Description</strong>: Timestamp when pipeline execution completed</li>
<li class=""><strong>Source</strong>: Recorded at pipeline completion</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Resolution</strong>: System clock precision</li>
</ul>
<p><strong>Usage</strong>: Calculate pipeline duration. Can be null if the pipeline is still executing or if metrics collection failed.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="durationms-1">DurationMs<a href="#durationms-1" class="hash-link" aria-label="Direct link to DurationMs" title="Direct link to DurationMs" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>long?</code></li>
<li class=""><strong>Description</strong>: Total pipeline execution time in milliseconds</li>
<li class=""><strong>Source</strong>: Calculated from <code>StartTime</code> and <code>EndTime</code></li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Precision</strong>: Millisecond</li>
</ul>
<p><strong>Calculation</strong>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DurationMs = (long)(EndTime - StartTime).TotalMilliseconds</span><br></span></code></pre></div></div>
<p><strong>Usage</strong>: Primary metric for overall pipeline performance. Track duration trends over time to identify degradation or improvements.</p>
<p><strong>Note</strong>: Can be null if <code>EndTime</code> is null.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="success-1">Success<a href="#success-1" class="hash-link" aria-label="Direct link to Success" title="Direct link to Success" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>bool</code></li>
<li class=""><strong>Description</strong>: Whether the pipeline execution completed successfully</li>
<li class=""><strong>Source</strong>: Determined by exception presence</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
</ul>
<p><strong>Calculation</strong>: <code>true</code> if no exception occurred during pipeline execution, <code>false</code> otherwise.</p>
<p><strong>Usage</strong>: Track pipeline success rates and identify failure patterns. Filter metrics to analyze successful vs. failed executions.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="totalitemsprocessed">TotalItemsProcessed<a href="#totalitemsprocessed" class="hash-link" aria-label="Direct link to TotalItemsProcessed" title="Direct link to TotalItemsProcessed" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>long</code></li>
<li class=""><strong>Description</strong>: Total number of items processed by all nodes in the pipeline</li>
<li class=""><strong>Source</strong>: Sum of all node <code>ItemsProcessed</code> values</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
<li class=""><strong>Range</strong>: 0 to <code>long.MaxValue</code></li>
</ul>
<p><strong>Calculation</strong>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TotalItemsProcessed = NodeMetrics.Sum(m =&gt; m.ItemsProcessed)</span><br></span></code></pre></div></div>
<p><strong>Usage</strong>: Measure pipeline throughput and processing volume. Compare with duration to calculate overall pipeline throughput.</p>
<p><strong>Important Notes</strong>:</p>
<ul>
<li class="">This is the sum across all nodes, not unique items</li>
<li class="">For pipelines with multiple nodes, this may be greater than the actual input count</li>
<li class="">Use <code>NodeMetrics[0].ItemsProcessed</code> for the actual input count (first node)</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="nodemetrics">NodeMetrics<a href="#nodemetrics" class="hash-link" aria-label="Direct link to NodeMetrics" title="Direct link to NodeMetrics" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>IReadOnlyList&lt;INodeMetrics&gt;</code></li>
<li class=""><strong>Description</strong>: Collection of metrics for each node in the pipeline</li>
<li class=""><strong>Source</strong>: Collected during pipeline execution</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable collection)</li>
</ul>
<p><strong>Usage</strong>: Analyze individual node performance within the pipeline context. Identify bottlenecks and optimize specific nodes.</p>
<p><strong>Access Patterns</strong>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Get all node metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var allNodeMetrics = pipelineMetrics.NodeMetrics;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Find metrics for a specific node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var transformNodeMetrics = pipelineMetrics.NodeMetrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .FirstOrDefault(m =&gt; m.NodeId == &quot;TransformNode&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Find slowest node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var slowestNode = pipelineMetrics.NodeMetrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .OrderByDescending(m =&gt; m.DurationMs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .FirstOrDefault();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Calculate average node duration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var avgDuration = pipelineMetrics.NodeMetrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Where(m =&gt; m.DurationMs.HasValue)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Average(m =&gt; m.DurationMs.Value);</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="exception-1">Exception<a href="#exception-1" class="hash-link" aria-label="Direct link to Exception" title="Direct link to Exception" translate="no">​</a></h4>
<ul>
<li class=""><strong>Type</strong>: <code>Exception?</code></li>
<li class=""><strong>Description</strong>: Exception that caused pipeline failure, if any</li>
<li class=""><strong>Source</strong>: Captured from execution context</li>
<li class=""><strong>Thread-Safe</strong>: Yes (immutable)</li>
</ul>
<p><strong>Usage</strong>: Debug failed pipeline executions, identify error patterns, and track exception types. Use <code>Exception.Message</code> for logging and <code>Exception.StackTrace</code> for detailed debugging.</p>
<p><strong>Note</strong>: Null if the pipeline executed successfully.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="metrics-calculation-details">Metrics Calculation Details<a href="#metrics-calculation-details" class="hash-link" aria-label="Direct link to Metrics Calculation Details" title="Direct link to Metrics Calculation Details" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="throughput-calculation">Throughput Calculation<a href="#throughput-calculation" class="hash-link" aria-label="Direct link to Throughput Calculation" title="Direct link to Throughput Calculation" translate="no">​</a></h3>
<p>Throughput is calculated for each node based on items processed and execution duration:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ThroughputItemsPerSec = ItemsProcessed / (DurationMs / 1000.0)</span><br></span></code></pre></div></div>
<p><strong>Example</strong>:</p>
<ul>
<li class="">ItemsProcessed: 5000</li>
<li class="">DurationMs: 2500</li>
<li class="">ThroughputItemsPerSec: 5000 / (2500 / 1000) = 2000 items/sec</li>
</ul>
<p><strong>Edge Cases</strong>:</p>
<ul>
<li class="">If <code>DurationMs</code> is null or zero, throughput is null</li>
<li class="">If <code>ItemsProcessed</code> is zero, throughput is zero</li>
<li class="">Throughput is calculated after node completion, not during execution</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="memory-usage-calculation">Memory Usage Calculation<a href="#memory-usage-calculation" class="hash-link" aria-label="Direct link to Memory Usage Calculation" title="Direct link to Memory Usage Calculation" translate="no">​</a></h3>
<p>Memory usage is measured as <strong>per-node managed memory allocation deltas</strong>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Initial memory at node start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var initialMemoryBytes = GC.GetTotalMemory(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ... node execution ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Final memory at node end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var finalMemoryBytes = GC.GetTotalMemory(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Calculate delta (memory allocated during node execution)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var deltaBytes = finalMemoryBytes - initialMemoryBytes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var memoryDeltaMb = deltaBytes / (1024 * 1024);</span><br></span></code></pre></div></div>
<p><strong>Important Considerations</strong>:</p>
<ul>
<li class="">Memory is measured using <code>GC.GetTotalMemory(false)</code> which captures managed memory allocations</li>
<li class="">This is a <strong>per-node delta</strong>, not global process memory or peak working set</li>
<li class="">In parallel execution, each node gets its own isolated memory measurement</li>
<li class="">The delta represents memory allocated during that specific node&#x27;s execution</li>
<li class="">Garbage collection may cause memory usage to fluctuate</li>
<li class="">Memory metrics require both extension-level (<code>EnableMemoryMetrics</code>) and node-level (<code>RecordMemoryUsage</code>) options to be enabled</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="retry-count-calculation">Retry Count Calculation<a href="#retry-count-calculation" class="hash-link" aria-label="Direct link to Retry Count Calculation" title="Direct link to Retry Count Calculation" translate="no">​</a></h3>
<p>Retry count tracks the maximum retry attempt observed:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Uses Interlocked.Exchange to ensure maximum is retained</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RetryCount = Math.Max(currentRetryCount, newRetryCount)</span><br></span></code></pre></div></div>
<p><strong>Behavior</strong>:</p>
<ul>
<li class="">If a node retries 3 times (attempts 1, 2, 3), <code>RetryCount</code> will be 3</li>
<li class="">If multiple retries occur with different reasons, only the count is retained</li>
<li class="">Retry reasons are not currently captured in metrics (see TODO in source)</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="thread-safety-considerations">Thread-Safety Considerations<a href="#thread-safety-considerations" class="hash-link" aria-label="Direct link to Thread-Safety Considerations" title="Direct link to Thread-Safety Considerations" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="concurrent-metrics-collection">Concurrent Metrics Collection<a href="#concurrent-metrics-collection" class="hash-link" aria-label="Direct link to Concurrent Metrics Collection" title="Direct link to Concurrent Metrics Collection" translate="no">​</a></h3>
<p>The <code>ObservabilityCollector</code> is designed for thread-safe operation:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private readonly ConcurrentDictionary&lt;string, NodeMetricsBuilder&gt; _nodeMetrics = new();</span><br></span></code></pre></div></div>
<p><strong>Thread-Safety Guarantees</strong>:</p>
<ul>
<li class="">Multiple nodes can record metrics simultaneously without race conditions</li>
<li class=""><code>ConcurrentDictionary</code> provides atomic operations for adding and updating entries</li>
<li class="">Each node has its own <code>NodeMetricsBuilder</code> instance</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="atomic-counter-updates">Atomic Counter Updates<a href="#atomic-counter-updates" class="hash-link" aria-label="Direct link to Atomic Counter Updates" title="Direct link to Atomic Counter Updates" translate="no">​</a></h3>
<p>Item counters use atomic operations for thread-safe increments:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public void RecordItemMetrics(long itemsProcessed, long itemsEmitted)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Interlocked.Add(ref _itemsProcessed, itemsProcessed);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Interlocked.Add(ref _itemsEmitted, itemsEmitted);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Thread-Safety Guarantees</strong>:</p>
<ul>
<li class=""><code>Interlocked.Add</code> ensures atomic addition without locks</li>
<li class="">Multiple threads can increment counters simultaneously</li>
<li class="">No lost updates or race conditions</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="retry-count-updates">Retry Count Updates<a href="#retry-count-updates" class="hash-link" aria-label="Direct link to Retry Count Updates" title="Direct link to Retry Count Updates" translate="no">​</a></h3>
<p>Retry count uses atomic exchange to retain the maximum:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public void RecordRetry(int retryCount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Interlocked.Exchange(ref _retryCount, Math.Max(_retryCount, retryCount));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Thread-Safety Guarantees</strong>:</p>
<ul>
<li class=""><code>Interlocked.Exchange</code> ensures atomic updates</li>
<li class="">Maximum retry count is always retained</li>
<li class="">No race conditions when multiple retries occur</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="immutable-metric-records">Immutable Metric Records<a href="#immutable-metric-records" class="hash-link" aria-label="Direct link to Immutable Metric Records" title="Direct link to Immutable Metric Records" translate="no">​</a></h3>
<p>Once built, metric records are immutable:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed record NodeMetrics(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    string NodeId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DateTimeOffset? StartTime,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ... other properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) : INodeMetrics;</span><br></span></code></pre></div></div>
<p><strong>Thread-Safety Guarantees</strong>:</p>
<ul>
<li class="">Records are immutable and safe to share across threads</li>
<li class="">No synchronization needed when reading built metrics</li>
<li class="">Safe to store in collections accessed by multiple threads</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="scoped-lifetime">Scoped Lifetime<a href="#scoped-lifetime" class="hash-link" aria-label="Direct link to Scoped Lifetime" title="Direct link to Scoped Lifetime" translate="no">​</a></h3>
<p>Collectors are scoped to ensure isolation:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">services.TryAddScoped&lt;IObservabilityCollector, ObservabilityCollector&gt;();</span><br></span></code></pre></div></div>
<p><strong>Thread-Safety Guarantees</strong>:</p>
<ul>
<li class="">Each pipeline run gets its own collector instance</li>
<li class="">Concurrent pipeline runs don&#x27;t interfere with each other</li>
<li class="">Metrics are automatically disposed when the scope ends</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-metrics-interpretation">Performance Metrics Interpretation<a href="#performance-metrics-interpretation" class="hash-link" aria-label="Direct link to Performance Metrics Interpretation" title="Direct link to Performance Metrics Interpretation" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="identifying-bottlenecks">Identifying Bottlenecks<a href="#identifying-bottlenecks" class="hash-link" aria-label="Direct link to Identifying Bottlenecks" title="Direct link to Identifying Bottlenecks" translate="no">​</a></h3>
<p>Use node metrics to identify performance bottlenecks:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Find slowest nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var bottlenecks = pipelineMetrics.NodeMetrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Where(m =&gt; m.DurationMs.HasValue)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .OrderByDescending(m =&gt; m.DurationMs.Value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Take(3);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach (var node in bottlenecks)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine($&quot;{node.NodeId}: {node.DurationMs}ms, {node.ThroughputItemsPerSec} items/sec&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="analyzing-throughput">Analyzing Throughput<a href="#analyzing-throughput" class="hash-link" aria-label="Direct link to Analyzing Throughput" title="Direct link to Analyzing Throughput" translate="no">​</a></h3>
<p>Compare throughput across nodes to understand efficiency:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Calculate throughput ratios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var throughputRatios = pipelineMetrics.NodeMetrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Where(m =&gt; m.ThroughputItemsPerSec.HasValue)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Select(m =&gt; new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m.NodeId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Throughput = m.ThroughputItemsPerSec.Value,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Ratio = m.ThroughputItemsPerSec.Value / pipelineMetrics.NodeMetrics[0].ThroughputItemsPerSec.Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .OrderByDescending(m =&gt; m.Ratio);</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="memory-efficiency-analysis">Memory Efficiency Analysis<a href="#memory-efficiency-analysis" class="hash-link" aria-label="Direct link to Memory Efficiency Analysis" title="Direct link to Memory Efficiency Analysis" translate="no">​</a></h3>
<p>Identify memory-intensive nodes:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Find nodes with high memory usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var memoryIntensive = pipelineMetrics.NodeMetrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Where(m =&gt; m.PeakMemoryUsageMb.HasValue)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .OrderByDescending(m =&gt; m.PeakMemoryUsageMb.Value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Take(5);</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="retry-pattern-analysis">Retry Pattern Analysis<a href="#retry-pattern-analysis" class="hash-link" aria-label="Direct link to Retry Pattern Analysis" title="Direct link to Retry Pattern Analysis" translate="no">​</a></h3>
<p>Identify unreliable nodes:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Find nodes with high retry counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var unreliableNodes = pipelineMetrics.NodeMetrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Where(m =&gt; m.RetryCount &gt; 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .OrderByDescending(m =&gt; m.RetryCount);</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="related-topics">Related Topics<a href="#related-topics" class="hash-link" aria-label="Direct link to Related Topics" title="Direct link to Related Topics" translate="no">​</a></h2>
<ul>
<li class=""><strong><a class="" href="/docs/extensions/observability/">Observability Overview</a></strong>: Introduction to observability features</li>
<li class=""><strong><a class="" href="/docs/extensions/observability/configuration">Configuration Guide</a></strong>: Setup and configuration options</li>
<li class=""><strong><a class="" href="/docs/extensions/observability/examples">Usage Examples</a></strong>: Complete code examples</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/extensions/observability/examples"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Observability Usage Examples</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/connectors"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Connectors Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#node-metrics" class="table-of-contents__link toc-highlight">Node Metrics</a><ul><li><a href="#inodemetrics-interface" class="table-of-contents__link toc-highlight">INodeMetrics Interface</a></li><li><a href="#node-metrics-properties" class="table-of-contents__link toc-highlight">Node Metrics Properties</a></li></ul></li><li><a href="#pipeline-metrics" class="table-of-contents__link toc-highlight">Pipeline Metrics</a><ul><li><a href="#ipipelinemetrics-interface" class="table-of-contents__link toc-highlight">IPipelineMetrics Interface</a></li><li><a href="#pipeline-metrics-properties" class="table-of-contents__link toc-highlight">Pipeline Metrics Properties</a></li></ul></li><li><a href="#metrics-calculation-details" class="table-of-contents__link toc-highlight">Metrics Calculation Details</a><ul><li><a href="#throughput-calculation" class="table-of-contents__link toc-highlight">Throughput Calculation</a></li><li><a href="#memory-usage-calculation" class="table-of-contents__link toc-highlight">Memory Usage Calculation</a></li><li><a href="#retry-count-calculation" class="table-of-contents__link toc-highlight">Retry Count Calculation</a></li></ul></li><li><a href="#thread-safety-considerations" class="table-of-contents__link toc-highlight">Thread-Safety Considerations</a><ul><li><a href="#concurrent-metrics-collection" class="table-of-contents__link toc-highlight">Concurrent Metrics Collection</a></li><li><a href="#atomic-counter-updates" class="table-of-contents__link toc-highlight">Atomic Counter Updates</a></li><li><a href="#retry-count-updates" class="table-of-contents__link toc-highlight">Retry Count Updates</a></li><li><a href="#immutable-metric-records" class="table-of-contents__link toc-highlight">Immutable Metric Records</a></li><li><a href="#scoped-lifetime" class="table-of-contents__link toc-highlight">Scoped Lifetime</a></li></ul></li><li><a href="#performance-metrics-interpretation" class="table-of-contents__link toc-highlight">Performance Metrics Interpretation</a><ul><li><a href="#identifying-bottlenecks" class="table-of-contents__link toc-highlight">Identifying Bottlenecks</a></li><li><a href="#analyzing-throughput" class="table-of-contents__link toc-highlight">Analyzing Throughput</a></li><li><a href="#memory-efficiency-analysis" class="table-of-contents__link toc-highlight">Memory Efficiency Analysis</a></li><li><a href="#retry-pattern-analysis" class="table-of-contents__link toc-highlight">Retry Pattern Analysis</a></li></ul></li><li><a href="#related-topics" class="table-of-contents__link toc-highlight">Related Topics</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/why-npipeline">Why NPipeline?</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/quick-start">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/core-concepts">Core Concepts</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/npipeline/npipeline" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">&nbsp;</div></div></div></footer></div>
</body>
</html>