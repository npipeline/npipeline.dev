<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-connectors/storage-provider" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Storage Provider Interface | NPipeline</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="robots" content="noindex, nofollow"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://npipeline.dev/docs/connectors/storage-provider"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Storage Provider Interface | NPipeline"><meta data-rh="true" name="description" content="Understanding the IStorageProvider abstraction and implementing custom storage backends."><meta data-rh="true" property="og:description" content="Understanding the IStorageProvider abstraction and implementing custom storage backends."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://npipeline.dev/docs/connectors/storage-provider"><link data-rh="true" rel="alternate" href="https://npipeline.dev/docs/connectors/storage-provider" hreflang="en"><link data-rh="true" rel="alternate" href="https://npipeline.dev/docs/connectors/storage-provider" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Connectors","item":"https://npipeline.dev/docs/connectors"},{"@type":"ListItem","position":2,"name":"Storage Provider Interface","item":"https://npipeline.dev/docs/connectors/storage-provider"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="NPipeline RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="NPipeline Atom Feed"><link rel="stylesheet" href="/assets/css/styles.7507e95c.css">
<script src="/assets/js/runtime~main.ecfa39af.js" defer="defer"></script>
<script src="/assets/js/main.0e36635f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/npipeline-logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/npipeline-logo.svg" alt="NPipeline logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/npipeline-logo.svg" alt="NPipeline logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">NPipeline</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/"><span title="Welcome to NPipeline" class="linkLabel_WmDU">Welcome to NPipeline</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/introduction"><span title="Introduction" class="categoryLinkLabel_W154">Introduction</span></a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/learning-paths"><span title="Learning Paths" class="linkLabel_WmDU">Learning Paths</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/getting-started"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/core-concepts"><span title="Core Concepts" class="categoryLinkLabel_W154">Core Concepts</span></a><button aria-label="Expand sidebar category &#x27;Core Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/architecture/"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a><button aria-label="Collapse sidebar category &#x27;Architecture&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/core-concepts"><span title="Core Concepts" class="linkLabel_WmDU">Core Concepts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/component-architecture"><span title="Component Architecture" class="linkLabel_WmDU">Component Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/execution-flow"><span title="Execution Flow" class="linkLabel_WmDU">Execution Flow</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/data-flow"><span title="Data Flow Details" class="linkLabel_WmDU">Data Flow Details</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/dependency-injection"><span title="Dependency Injection Integration" class="linkLabel_WmDU">Dependency Injection Integration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/error-handling-architecture"><span title="Error Handling Architecture" class="linkLabel_WmDU">Error Handling Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/cancellation-model"><span title="Cancellation Model" class="linkLabel_WmDU">Cancellation Model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/performance-characteristics"><span title="Performance Characteristics" class="linkLabel_WmDU">Performance Characteristics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/extension-points"><span title="Extension Points" class="linkLabel_WmDU">Extension Points</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/design-principles"><span title="Design Principles" class="linkLabel_WmDU">Design Principles</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/optimization-principles"><span title="Optimization Principles - How NPipeline Achieves High Performance" class="linkLabel_WmDU">Optimization Principles - How NPipeline Achieves High Performance</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/extensions"><span title="Extensions" class="categoryLinkLabel_W154">Extensions</span></a><button aria-label="Expand sidebar category &#x27;Extensions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/connectors"><span title="Connectors" class="categoryLinkLabel_W154">Connectors</span></a><button aria-label="Collapse sidebar category &#x27;Connectors&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/connectors/csv"><span title="CSV Connector" class="linkLabel_WmDU">CSV Connector</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/connectors/storage-provider"><span title="Storage Provider Interface" class="linkLabel_WmDU">Storage Provider Interface</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/advanced-topics"><span title="Advanced Topics" class="categoryLinkLabel_W154">Advanced Topics</span></a><button aria-label="Expand sidebar category &#x27;Advanced Topics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/analyzers/"><span title="Build-Time Analyzers" class="categoryLinkLabel_W154">Build-Time Analyzers</span></a><button aria-label="Expand sidebar category &#x27;Build-Time Analyzers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/samples-guide"><span title="Sample Applications" class="linkLabel_WmDU">Sample Applications</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/reference"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/connectors"><span>Connectors</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Storage Provider Interface</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Storage Provider Interface</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">​</a></h2>
<p>The <code>IStorageProvider</code> interface is a foundational abstraction that enables NPipeline connectors to work with multiple storage backends—from local filesystems to cloud services and databases. This document explains the core concepts, capabilities, and patterns for working with storage providers.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="core-interface">Core Interface<a href="#core-interface" class="hash-link" aria-label="Direct link to Core Interface" title="Direct link to Core Interface" translate="no">​</a></h2>
<p><code>IStorageProvider</code> defines the following operations:</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="essential-operations">Essential Operations<a href="#essential-operations" class="hash-link" aria-label="Direct link to Essential Operations" title="Direct link to Essential Operations" translate="no">​</a></h3>
<ul>
<li class=""><strong><code>OpenReadAsync(uri, cancellationToken)</code></strong> - Opens a readable stream for a resource</li>
<li class=""><strong><code>OpenWriteAsync(uri, cancellationToken)</code></strong> - Opens a writable stream for a resource</li>
<li class=""><strong><code>ExistsAsync(uri, cancellationToken)</code></strong> - Checks whether a resource exists</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="extended-operations-optional">Extended Operations (Optional)<a href="#extended-operations-optional" class="hash-link" aria-label="Direct link to Extended Operations (Optional)" title="Direct link to Extended Operations (Optional)" translate="no">​</a></h3>
<ul>
<li class=""><strong><code>DeleteAsync(uri, cancellationToken)</code></strong> - Deletes a resource (default throws <code>NotSupportedException</code>)</li>
<li class=""><strong><code>ListAsync(prefix, recursive, cancellationToken)</code></strong> - Lists resources at a location (default throws <code>NotSupportedException</code>)</li>
<li class=""><strong><code>GetMetadataAsync(uri, cancellationToken)</code></strong> - Retrieves detailed metadata (default returns null)</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="capability-discovery">Capability Discovery<a href="#capability-discovery" class="hash-link" aria-label="Direct link to Capability Discovery" title="Direct link to Capability Discovery" translate="no">​</a></h2>
<p>Use <code>IStorageProviderMetadataProvider</code> to discover what operations a provider supports:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (provider is IStorageProviderMetadataProvider metadataProvider)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var metadata = metadataProvider.GetMetadata();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (metadata.SupportsDelete)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await provider.DeleteAsync(uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (metadata.SupportsListing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await foreach (var item in provider.ListAsync(prefix))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Console.WriteLine(item.Uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="capability-flags">Capability Flags<a href="#capability-flags" class="hash-link" aria-label="Direct link to Capability Flags" title="Direct link to Capability Flags" translate="no">​</a></h3>
<table><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>SupportsRead</code></td><td>Provider supports <code>OpenReadAsync()</code></td></tr><tr><td><code>SupportsWrite</code></td><td>Provider supports <code>OpenWriteAsync()</code></td></tr><tr><td><code>SupportsDelete</code></td><td>Provider supports <code>DeleteAsync()</code></td></tr><tr><td><code>SupportsListing</code></td><td>Provider supports <code>ListAsync()</code></td></tr><tr><td><code>SupportsMetadata</code></td><td>Provider supports <code>GetMetadataAsync()</code></td></tr><tr><td><code>SupportsHierarchy</code></td><td>Provider has meaningful directory/prefix structure</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="storage-types">Storage Types<a href="#storage-types" class="hash-link" aria-label="Direct link to Storage Types" title="Direct link to Storage Types" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="storageuri">StorageUri<a href="#storageuri" class="hash-link" aria-label="Direct link to StorageUri" title="Direct link to StorageUri" translate="no">​</a></h3>
<p>Represents a location in the storage system with structure: <code>scheme://host/path?param=value</code></p>
<p><strong>Examples:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">file:///C:/data/file.csv                           // Local filesystem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file://\\server\share\data.csv                     // UNC path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s3://my-bucket/data/2024/file.parquet              // AWS S3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">azure://mycontainer/logs/app.log                   // Azure Blob Storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db://server/database/table                         // Database table</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="storageitem">StorageItem<a href="#storageitem" class="hash-link" aria-label="Direct link to StorageItem" title="Direct link to StorageItem" translate="no">​</a></h3>
<p>Lightweight representation of a resource returned by <code>ListAsync()</code>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed record StorageItem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public required StorageUri Uri { get; init; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public required long Size { get; init; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public required DateTimeOffset LastModified { get; init; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool IsDirectory { get; init; }  // Logical grouping (S3 prefixes, directories)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="storagemetadata">StorageMetadata<a href="#storagemetadata" class="hash-link" aria-label="Direct link to StorageMetadata" title="Direct link to StorageMetadata" translate="no">​</a></h3>
<p>Detailed metadata for a specific resource:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed record StorageMetadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public required long Size { get; init; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public required DateTimeOffset LastModified { get; init; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string? ContentType { get; init; }           // MIME type (if available)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public IReadOnlyDictionary&lt;string, string&gt; CustomMetadata { get; init; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool IsDirectory { get; init; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string? ETag { get; init; }                  // For optimistic concurrency</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="built-in-providers">Built-in Providers<a href="#built-in-providers" class="hash-link" aria-label="Direct link to Built-in Providers" title="Direct link to Built-in Providers" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="filesystem-provider">FileSystem Provider<a href="#filesystem-provider" class="hash-link" aria-label="Direct link to FileSystem Provider" title="Direct link to FileSystem Provider" translate="no">​</a></h3>
<p>The default provider for local file access with full feature support.</p>
<p><strong>Characteristics:</strong></p>
<ul>
<li class="">True directory hierarchy</li>
<li class="">Full read/write/delete/list support</li>
<li class="">MIME type detection</li>
<li class="">File metadata with timestamps</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var provider = new FileSystemStorageProvider();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.FromFilePath(&quot;C:\\data\\input.csv&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Read file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using var stream = await provider.OpenReadAsync(uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// List directory recursively</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await foreach (var item in provider.ListAsync(uri, recursive: true))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine($&quot;{item.Uri}: {item.Size} bytes&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Get metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var metadata = await provider.GetMetadataAsync(uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (metadata != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine($&quot;Content-Type: {metadata.ContentType}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine($&quot;ETag: {metadata.ETag}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Resilience Handling:</strong></p>
<ul>
<li class="">Gracefully skips inaccessible directories during recursive listing</li>
<li class="">Handles concurrent file deletions</li>
<li class="">Skips symbolic links/junctions in recursive traversal</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-operations">Common Operations<a href="#common-operations" class="hash-link" aria-label="Direct link to Common Operations" title="Direct link to Common Operations" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reading-data">Reading Data<a href="#reading-data" class="hash-link" aria-label="Direct link to Reading Data" title="Direct link to Reading Data" translate="no">​</a></h3>
<p>All connectors support reading through <code>OpenReadAsync</code>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.FromFilePath(&quot;data.csv&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var source = new CsvSourceNode&lt;MyData&gt;(uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// When the pipeline runs, the CSV connector uses the storage provider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// to open the file for reading</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="writing-data">Writing Data<a href="#writing-data" class="hash-link" aria-label="Direct link to Writing Data" title="Direct link to Writing Data" translate="no">​</a></h3>
<p>All connectors support writing through <code>OpenWriteAsync</code>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.FromFilePath(&quot;output.csv&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var sink = new CsvSinkNode&lt;MyResult&gt;(uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// When the pipeline runs, the CSV connector uses the storage provider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// to create/overwrite the file</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="checking-existence">Checking Existence<a href="#checking-existence" class="hash-link" aria-label="Direct link to Checking Existence" title="Direct link to Checking Existence" translate="no">​</a></h3>
<p>Use <code>ExistsAsync</code> to check if a resource exists:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.FromFilePath(&quot;config.json&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var provider = new FileSystemStorageProvider();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (await provider.ExistsAsync(uri))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine(&quot;Configuration file exists&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="listing-resources">Listing Resources<a href="#listing-resources" class="hash-link" aria-label="Direct link to Listing Resources" title="Direct link to Listing Resources" translate="no">​</a></h3>
<p>List resources in a directory using <code>ListAsync</code>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.FromFilePath(&quot;C:\\data\\csv_files&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var provider = new FileSystemStorageProvider();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// List only top-level files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await foreach (var item in provider.ListAsync(uri, recursive: false))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine($&quot;{item.Uri}: {item.Size} bytes&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (item.IsDirectory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine(&quot;  (directory)&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// List all files recursively</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await foreach (var item in provider.ListAsync(uri, recursive: true))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine($&quot;{item.Uri}: {item.Size} bytes&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="getting-metadata">Getting Metadata<a href="#getting-metadata" class="hash-link" aria-label="Direct link to Getting Metadata" title="Direct link to Getting Metadata" translate="no">​</a></h3>
<p>Retrieve detailed metadata about a resource:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.FromFilePath(&quot;data.csv&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var provider = new FileSystemStorageProvider();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var metadata = await provider.GetMetadataAsync(uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (metadata != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine($&quot;Size: {metadata.Size} bytes&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine($&quot;Modified: {metadata.LastModified}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine($&quot;Content-Type: {metadata.ContentType}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine($&quot;ETag: {metadata.ETag}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="deleting-resources">Deleting Resources<a href="#deleting-resources" class="hash-link" aria-label="Direct link to Deleting Resources" title="Direct link to Deleting Resources" translate="no">​</a></h3>
<p>Delete files and directories:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.FromFilePath(&quot;C:\\temp\\old_data.csv&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var provider = new FileSystemStorageProvider();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (metadata.SupportsDelete)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    await provider.DeleteAsync(uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine(&quot;File deleted&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="storageuri-format">StorageUri Format<a href="#storageuri-format" class="hash-link" aria-label="Direct link to StorageUri Format" title="Direct link to StorageUri Format" translate="no">​</a></h2>
<p><code>StorageUri</code> represents a location in any storage system:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scheme://[host]/path[?param=value]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Local filesystem (Windows)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file:///C:/data/users.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Local filesystem (Unix)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file:///home/user/data/users.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// UNC path (Windows network share)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file://server/share/data.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// AWS S3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s3://my-bucket/data/2024/users.parquet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Azure Blob Storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">azure://container/logs/app.log?connection-string=...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Custom backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">custom://my-system/resource?auth=token</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-uris">Creating URIs<a href="#creating-uris" class="hash-link" aria-label="Direct link to Creating URIs" title="Direct link to Creating URIs" translate="no">​</a></h3>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// From local file path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.FromFilePath(&quot;C:\\data\\file.csv&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// From URI string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.Parse(&quot;s3://bucket/key&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Combining paths</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var baseUri = StorageUri.FromFilePath(&quot;C:\\data&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var fullUri = baseUri.Combine(&quot;subfolder/file.csv&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Adding parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.FromFilePath(&quot;data.csv&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .WithParameter(&quot;compression&quot;, &quot;gzip&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .WithParameter(&quot;encoding&quot;, &quot;utf-8&quot;);</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="implementation-guide">Implementation Guide<a href="#implementation-guide" class="hash-link" aria-label="Direct link to Implementation Guide" title="Direct link to Implementation Guide" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-a-custom-provider">Creating a Custom Provider<a href="#creating-a-custom-provider" class="hash-link" aria-label="Direct link to Creating a Custom Provider" title="Direct link to Creating a Custom Provider" translate="no">​</a></h3>
<p>To implement a custom storage provider (e.g., for S3, Azure, or a custom system):</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class MyCustomStorageProvider : IStorageProvider, IStorageProviderMetadataProvider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public StorageScheme Scheme =&gt; StorageScheme.Parse(&quot;custom&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool CanHandle(StorageUri uri) =&gt; uri.Scheme == Scheme;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;Stream&gt; OpenReadAsync(StorageUri uri, CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Your implementation here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new NotImplementedException();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;Stream&gt; OpenWriteAsync(StorageUri uri, CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Your implementation here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new NotImplementedException();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;bool&gt; ExistsAsync(StorageUri uri, CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Your implementation here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new NotImplementedException();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Implement DeleteAsync if deletion is supported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task DeleteAsync(StorageUri uri, CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Your implementation here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new NotImplementedException();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Implement ListAsync if listing is supported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async IAsyncEnumerable&lt;StorageItem&gt; ListAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        StorageUri prefix,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool recursive = false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [EnumeratorCancellation] CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Your implementation here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new NotImplementedException();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        yield break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Implement GetMetadataAsync if metadata retrieval is supported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;StorageMetadata?&gt; GetMetadataAsync(StorageUri uri, CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Your implementation here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public StorageProviderMetadata GetMetadata()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new StorageProviderMetadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Name = &quot;My Custom Provider&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SupportedSchemes = [&quot;custom&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SupportsRead = true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SupportsWrite = true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SupportsDelete = true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SupportsListing = true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SupportsMetadata = true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SupportsHierarchy = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices" translate="no">​</a></h3>
<ol>
<li class="">
<p><strong>Normalize Exceptions</strong>: Map provider-specific exceptions to standard .NET exceptions:</p>
<ul>
<li class="">Resource not found → <code>FileNotFoundException</code></li>
<li class="">Access denied → <code>UnauthorizedAccessException</code></li>
<li class="">Network/timeout issues → <code>IOException</code> or <code>OperationCanceledException</code></li>
</ul>
</li>
<li class="">
<p><strong>Document Recursion Semantics</strong>: Clearly explain how <code>recursive</code> works in your implementation:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// &lt;remarks&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// With recursive=false, returns objects matching the prefix with &quot;/&quot; delimiter applied.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// With recursive=true, returns all objects with the prefix (flat list).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/remarks&gt;</span><br></span></code></pre></div></div>
</li>
<li class="">
<p><strong>Implement Capabilities Accurately</strong>: Set capability flags to match actual implementation:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public StorageProviderMetadata GetMetadata()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new StorageProviderMetadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SupportsRead = true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SupportsWrite = false,    // This provider is read-only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SupportsDelete = false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SupportsListing = true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SupportsHierarchy = false // No directory concept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
<li class="">
<p><strong>Respect Cancellation</strong>: Always check the <code>CancellationToken</code> during enumeration:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public async IAsyncEnumerable&lt;StorageItem&gt; ListAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StorageUri prefix,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool recursive = false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [EnumeratorCancellation] CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foreach (var item in GetItems(prefix))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cancellationToken.ThrowIfCancellationRequested();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        yield return item;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
<li class="">
<p><strong>Populate Metadata Fields</strong>: Provide all available metadata:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">return new StorageMetadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Size = contentLength,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LastModified = dateModified,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ContentType = &quot;application/json&quot;,        // If available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CustomMetadata = objectTags,             // If available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ETag = response.ETag,                    // If available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IsDirectory = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre></div></div>
</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-custom-providers">Using Custom Providers<a href="#using-custom-providers" class="hash-link" aria-label="Direct link to Using Custom Providers" title="Direct link to Using Custom Providers" translate="no">​</a></h2>
<p>Register custom providers with dependency injection:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">services.AddSingleton&lt;IStorageProvider&gt;(new MyCustomStorageProvider());</span><br></span></code></pre></div></div>
<p>Then use them with connectors:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.Parse(&quot;custom://bucket/key&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var pipeline = new PipelineBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .AddSource&lt;CsvSourceNode&lt;MyData&gt;&gt;(&quot;source&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ... transforms ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Build();</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="error-handling">Error Handling<a href="#error-handling" class="hash-link" aria-label="Direct link to Error Handling" title="Direct link to Error Handling" translate="no">​</a></h2>
<p>Storage providers normalize backend-specific errors to standard .NET exceptions:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    using var stream = await provider.OpenReadAsync(uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">catch (FileNotFoundException ex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine(&quot;Resource not found&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">catch (UnauthorizedAccessException ex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine(&quot;Access denied&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">catch (IOException ex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine(&quot;I/O error (network, timeout, etc.)&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="filesystem-specific-resilience">Filesystem-Specific Resilience<a href="#filesystem-specific-resilience" class="hash-link" aria-label="Direct link to Filesystem-Specific Resilience" title="Direct link to Filesystem-Specific Resilience" translate="no">​</a></h3>
<p>The filesystem provider includes automatic resilience handling:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="permission-restrictions">Permission Restrictions<a href="#permission-restrictions" class="hash-link" aria-label="Direct link to Permission Restrictions" title="Direct link to Permission Restrictions" translate="no">​</a></h4>
<p>During recursive listing, inaccessible directories are automatically skipped:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var uri = StorageUri.FromFilePath(&quot;C:\\data&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Even if some subdirectories are restricted, listing completes successfully</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await foreach (var item in provider.ListAsync(uri, recursive: true))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Gets all accessible items, skips restricted directories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="concurrent-modifications">Concurrent Modifications<a href="#concurrent-modifications" class="hash-link" aria-label="Direct link to Concurrent Modifications" title="Direct link to Concurrent Modifications" translate="no">​</a></h4>
<p>Files deleted during enumeration are automatically skipped:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// If a file is deleted during enumeration, it&#x27;s skipped without error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await foreach (var item in provider.ListAsync(uri, recursive: true))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Enumeration continues even if files are deleted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="symbolic-links-and-junctions">Symbolic Links and Junctions<a href="#symbolic-links-and-junctions" class="hash-link" aria-label="Direct link to Symbolic Links and Junctions" title="Direct link to Symbolic Links and Junctions" translate="no">​</a></h4>
<p>Circular symlinks and junctions are automatically detected and skipped:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// If C:\data\link points to C:\data (creating a cycle),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// the link is yielded but not traversed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await foreach (var item in provider.ListAsync(uri, recursive: true))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Includes link as an item, but doesn&#x27;t follow it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-considerations">Performance Considerations<a href="#performance-considerations" class="hash-link" aria-label="Direct link to Performance Considerations" title="Direct link to Performance Considerations" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="streaming-large-files">Streaming Large Files<a href="#streaming-large-files" class="hash-link" aria-label="Direct link to Streaming Large Files" title="Direct link to Streaming Large Files" translate="no">​</a></h3>
<p>Always use streaming for large files rather than buffering:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Good: Streaming</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using var stream = await provider.OpenReadAsync(uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using var reader = new StreamReader(stream);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">string line;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while ((line = await reader.ReadLineAsync()) != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Process line by line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Bad: Buffering entire file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var content = await File.ReadAllTextAsync(path);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Uses lots of memory for large files</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="batch-operations">Batch Operations<a href="#batch-operations" class="hash-link" aria-label="Direct link to Batch Operations" title="Direct link to Batch Operations" translate="no">​</a></h3>
<p>When processing multiple files, consider batch operations:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var files = new List&lt;StorageUri&gt; { uri1, uri2, uri3 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Process concurrently (with appropriate limits)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var semaphore = new SemaphoreSlim(3); // 3 concurrent operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var tasks = files.Select(async f =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    await semaphore.WaitAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var metadata = await provider.GetMetadataAsync(f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Process</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finally</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        semaphore.Release();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await Task.WhenAll(tasks);</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="design-considerations">Design Considerations<a href="#design-considerations" class="hash-link" aria-label="Direct link to Design Considerations" title="Direct link to Design Considerations" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="recursion-semantics">Recursion Semantics<a href="#recursion-semantics" class="hash-link" aria-label="Direct link to Recursion Semantics" title="Direct link to Recursion Semantics" translate="no">​</a></h3>
<p>Different backends have different recursion behaviors:</p>
<table><thead><tr><th>Backend</th><th>Non-Recursive (recursive=false)</th><th>Recursive (recursive=true)</th></tr></thead><tbody><tr><td>Filesystem</td><td>Direct children only</td><td>All descendants</td></tr><tr><td>S3/Azure</td><td>Objects with prefix, &quot;/&quot; delimiter applied</td><td>All objects with prefix</td></tr><tr><td>Database</td><td>N/A</td><td>Query-based filtering</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="error-handling-1">Error Handling<a href="#error-handling-1" class="hash-link" aria-label="Direct link to Error Handling" title="Direct link to Error Handling" translate="no">​</a></h3>
<p>During recursive listing, providers should gracefully handle:</p>
<ul>
<li class="">Permission restrictions on subdirectories</li>
<li class="">Concurrent deletions during enumeration</li>
<li class="">Circular references (symlinks/junctions)</li>
</ul>
<p>For filesystem, these are automatically handled by the built-in provider.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance">Performance<a href="#performance" class="hash-link" aria-label="Direct link to Performance" title="Direct link to Performance" translate="no">​</a></h3>
<ul>
<li class="">Use appropriate buffer sizes for streaming</li>
<li class="">Consider pagination for large datasets</li>
<li class="">Minimize allocations in hot paths</li>
<li class="">Cache provider metadata during pipeline lifetime</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="related-documentation">Related Documentation<a href="#related-documentation" class="hash-link" aria-label="Direct link to Related Documentation" title="Direct link to Related Documentation" translate="no">​</a></h2>
<ul>
<li class=""><strong><a class="" href="/docs/connectors/csv">CSV Connector</a></strong> - Example using the filesystem storage provider</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/connectors/csv"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">CSV Connector</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/advanced-topics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Advanced Topics</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#core-interface" class="table-of-contents__link toc-highlight">Core Interface</a><ul><li><a href="#essential-operations" class="table-of-contents__link toc-highlight">Essential Operations</a></li><li><a href="#extended-operations-optional" class="table-of-contents__link toc-highlight">Extended Operations (Optional)</a></li></ul></li><li><a href="#capability-discovery" class="table-of-contents__link toc-highlight">Capability Discovery</a><ul><li><a href="#capability-flags" class="table-of-contents__link toc-highlight">Capability Flags</a></li></ul></li><li><a href="#storage-types" class="table-of-contents__link toc-highlight">Storage Types</a><ul><li><a href="#storageuri" class="table-of-contents__link toc-highlight">StorageUri</a></li><li><a href="#storageitem" class="table-of-contents__link toc-highlight">StorageItem</a></li><li><a href="#storagemetadata" class="table-of-contents__link toc-highlight">StorageMetadata</a></li></ul></li><li><a href="#built-in-providers" class="table-of-contents__link toc-highlight">Built-in Providers</a><ul><li><a href="#filesystem-provider" class="table-of-contents__link toc-highlight">FileSystem Provider</a></li></ul></li><li><a href="#common-operations" class="table-of-contents__link toc-highlight">Common Operations</a><ul><li><a href="#reading-data" class="table-of-contents__link toc-highlight">Reading Data</a></li><li><a href="#writing-data" class="table-of-contents__link toc-highlight">Writing Data</a></li><li><a href="#checking-existence" class="table-of-contents__link toc-highlight">Checking Existence</a></li><li><a href="#listing-resources" class="table-of-contents__link toc-highlight">Listing Resources</a></li><li><a href="#getting-metadata" class="table-of-contents__link toc-highlight">Getting Metadata</a></li><li><a href="#deleting-resources" class="table-of-contents__link toc-highlight">Deleting Resources</a></li></ul></li><li><a href="#storageuri-format" class="table-of-contents__link toc-highlight">StorageUri Format</a><ul><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li><li><a href="#creating-uris" class="table-of-contents__link toc-highlight">Creating URIs</a></li></ul></li><li><a href="#implementation-guide" class="table-of-contents__link toc-highlight">Implementation Guide</a><ul><li><a href="#creating-a-custom-provider" class="table-of-contents__link toc-highlight">Creating a Custom Provider</a></li><li><a href="#best-practices" class="table-of-contents__link toc-highlight">Best Practices</a></li></ul></li><li><a href="#using-custom-providers" class="table-of-contents__link toc-highlight">Using Custom Providers</a></li><li><a href="#error-handling" class="table-of-contents__link toc-highlight">Error Handling</a><ul><li><a href="#filesystem-specific-resilience" class="table-of-contents__link toc-highlight">Filesystem-Specific Resilience</a></li></ul></li><li><a href="#performance-considerations" class="table-of-contents__link toc-highlight">Performance Considerations</a><ul><li><a href="#streaming-large-files" class="table-of-contents__link toc-highlight">Streaming Large Files</a></li><li><a href="#batch-operations" class="table-of-contents__link toc-highlight">Batch Operations</a></li></ul></li><li><a href="#design-considerations" class="table-of-contents__link toc-highlight">Design Considerations</a><ul><li><a href="#recursion-semantics" class="table-of-contents__link toc-highlight">Recursion Semantics</a></li><li><a href="#error-handling-1" class="table-of-contents__link toc-highlight">Error Handling</a></li><li><a href="#performance" class="table-of-contents__link toc-highlight">Performance</a></li></ul></li><li><a href="#related-documentation" class="table-of-contents__link toc-highlight">Related Documentation</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/why-npipeline">Why NPipeline?</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/quick-start">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/core-concepts">Core Concepts</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/npipeline/npipeline" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">&nbsp;</div></div></div></footer></div>
</body>
</html>