<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-core-concepts/pipeline-context" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Pipeline Context (PipelineContext) | NPipeline</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="robots" content="noindex, nofollow"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://npipeline.dev/docs/core-concepts/pipeline-context"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Pipeline Context (PipelineContext) | NPipeline"><meta data-rh="true" name="description" content="Understand how to manage and share state, configuration, and cancellation across your NPipeline nodes using PipelineContext."><meta data-rh="true" property="og:description" content="Understand how to manage and share state, configuration, and cancellation across your NPipeline nodes using PipelineContext."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://npipeline.dev/docs/core-concepts/pipeline-context"><link data-rh="true" rel="alternate" href="https://npipeline.dev/docs/core-concepts/pipeline-context" hreflang="en"><link data-rh="true" rel="alternate" href="https://npipeline.dev/docs/core-concepts/pipeline-context" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Core Concepts","item":"https://npipeline.dev/docs/core-concepts"},{"@type":"ListItem","position":2,"name":"Pipeline Context (PipelineContext)","item":"https://npipeline.dev/docs/core-concepts/pipeline-context"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="NPipeline RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="NPipeline Atom Feed"><link rel="stylesheet" href="/assets/css/styles.a2968c5d.css">
<script src="/assets/js/runtime~main.b24054ed.js" defer="defer"></script>
<script src="/assets/js/main.e01f4df8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="NPipeline logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="NPipeline logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">NPipeline</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/npipeline/npipeline" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/"><span title="Welcome to NPipeline" class="linkLabel_WmDU">Welcome to NPipeline</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/introduction"><span title="Introduction" class="categoryLinkLabel_W154">Introduction</span></a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/learning-paths"><span title="Learning Paths" class="linkLabel_WmDU">Learning Paths</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/getting-started"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/core-concepts"><span title="Core Concepts" class="categoryLinkLabel_W154">Core Concepts</span></a><button aria-label="Collapse sidebar category &#x27;Core Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/grouping-strategies"><span title="Grouping Strategies - Batching vs Aggregation" class="linkLabel_WmDU">Grouping Strategies - Batching vs Aggregation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/ipipeline"><span title="Pipeline" class="linkLabel_WmDU">Pipeline</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/data-pipes"><span title="Data Pipes (IDataPipe)" class="linkLabel_WmDU">Data Pipes (IDataPipe)</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/core-concepts/nodes/"><span title="Nodes" class="categoryLinkLabel_W154">Nodes</span></a><button aria-label="Collapse sidebar category &#x27;Nodes&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/source-nodes"><span title="Source Nodes" class="linkLabel_WmDU">Source Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/transform-nodes"><span title="Transform Nodes" class="linkLabel_WmDU">Transform Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/sink-nodes"><span title="Sink Nodes" class="linkLabel_WmDU">Sink Nodes</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/core-concepts/resilience/"><span title="Resilience" class="categoryLinkLabel_W154">Resilience</span></a><button aria-label="Expand sidebar category &#x27;Resilience&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/core-concepts/advanced-nodes"><span title="Advanced Nodes" class="categoryLinkLabel_W154">Advanced Nodes</span></a><button aria-label="Expand sidebar category &#x27;Advanced Nodes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/pipeline-definition"><span title="Pipeline Definition (IPipelineDefinition, PipelineBuilder)" class="linkLabel_WmDU">Pipeline Definition (IPipelineDefinition, PipelineBuilder)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/pipelinebuilder"><span title="PipelineBuilder" class="linkLabel_WmDU">PipelineBuilder</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/core-concepts/pipeline-execution"><span title="Pipeline Execution" class="categoryLinkLabel_W154">Pipeline Execution</span></a><button aria-label="Expand sidebar category &#x27;Pipeline Execution&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/core-concepts/pipeline-context"><span title="Pipeline Context (PipelineContext)" class="linkLabel_WmDU">Pipeline Context (PipelineContext)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/common-patterns"><span title="Common Patterns" class="linkLabel_WmDU">Common Patterns</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/streaming-vs-buffering"><span title="Streaming vs. Buffering" class="linkLabel_WmDU">Streaming vs. Buffering</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/best-practices"><span title="Best Practices" class="linkLabel_WmDU">Best Practices</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/pipeline-validation"><span title="Pipeline Validation Extensions - Usage Guide" class="linkLabel_WmDU">Pipeline Validation Extensions - Usage Guide</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/architecture/"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a><button aria-label="Collapse sidebar category &#x27;Architecture&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/core-concepts"><span title="Core Concepts" class="linkLabel_WmDU">Core Concepts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/component-architecture"><span title="Component Architecture" class="linkLabel_WmDU">Component Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/execution-flow"><span title="Execution Flow" class="linkLabel_WmDU">Execution Flow</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/data-flow"><span title="Data Flow Details" class="linkLabel_WmDU">Data Flow Details</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/dependency-injection"><span title="Dependency Injection Integration" class="linkLabel_WmDU">Dependency Injection Integration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/error-handling-architecture"><span title="Error Handling Architecture" class="linkLabel_WmDU">Error Handling Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/cancellation-model"><span title="Cancellation Model" class="linkLabel_WmDU">Cancellation Model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/performance-characteristics"><span title="Performance Characteristics" class="linkLabel_WmDU">Performance Characteristics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/extension-points"><span title="Extension Points" class="linkLabel_WmDU">Extension Points</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/design-principles"><span title="Design Principles" class="linkLabel_WmDU">Design Principles</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/optimization-principles"><span title="Optimization Principles - How NPipeline Achieves High Performance" class="linkLabel_WmDU">Optimization Principles - How NPipeline Achieves High Performance</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/extensions"><span title="Extensions" class="categoryLinkLabel_W154">Extensions</span></a><button aria-label="Expand sidebar category &#x27;Extensions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/connectors"><span title="Connectors" class="categoryLinkLabel_W154">Connectors</span></a><button aria-label="Expand sidebar category &#x27;Connectors&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/advanced-topics"><span title="Advanced Topics" class="categoryLinkLabel_W154">Advanced Topics</span></a><button aria-label="Expand sidebar category &#x27;Advanced Topics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/analyzers/"><span title="Build-Time Analyzers" class="categoryLinkLabel_W154">Build-Time Analyzers</span></a><button aria-label="Expand sidebar category &#x27;Build-Time Analyzers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/samples-guide"><span title="Sample Applications" class="linkLabel_WmDU">Sample Applications</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/reference"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/core-concepts"><span>Core Concepts</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Pipeline Context (PipelineContext)</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1><code>PipelineContext</code></h1></header>
<p>The <a class="" href="/docs/core-concepts/src/NPipeline/PipelineContext.cs"><code>PipelineContext</code></a> is a crucial component in NPipeline that provides a mechanism for sharing runtime information, services, and state across different nodes within a pipeline. It acts as a lightweight, scoped container that is passed through the pipeline during execution, allowing nodes to access common resources without explicit dependency injection in their constructors.</p>
<p>This context is particularly useful for:</p>
<ul>
<li class=""><strong>Logging</strong>: Providing a consistent logging mechanism.</li>
<li class=""><strong>Metrics</strong>: Capturing and reporting performance metrics.</li>
<li class=""><strong>Correlation IDs</strong>: Propagating unique identifiers for tracing requests across nodes.</li>
<li class=""><strong>Shared State</strong>: Storing transient state that needs to be accessible by multiple nodes.</li>
<li class=""><strong>CancellationToken</strong>: Propagating cancellation requests throughout the pipeline.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-pipelinecontext">What is <code>PipelineContext</code>?<a href="#what-is-pipelinecontext" class="hash-link" aria-label="Direct link to what-is-pipelinecontext" title="Direct link to what-is-pipelinecontext" translate="no">​</a></h2>
<p><code>PipelineContext</code> is a class that encapsulates runtime information relevant to a specific pipeline execution. It is automatically created when a pipeline starts its <code>RunAsync</code> method and is passed implicitly to your nodes.</p>
<p>Key elements managed by <code>PipelineContext</code> include:</p>
<ul>
<li class=""><strong><code>CancellationToken</code>:</strong> A primary mechanism for cooperative cancellation of the pipeline. All nodes should respect this token for graceful shutdown.</li>
<li class=""><strong>Parameters:</strong> A dictionary for holding runtime parameters passed to the pipeline during initialization.</li>
<li class=""><strong>Items:</strong> A dictionary for sharing transient state between pipeline nodes during execution.</li>
<li class=""><strong>Properties:</strong> A dictionary for storing properties that can be used by extensions and plugins, providing a way to extend PipelineContext without modifying its core structure.</li>
<li class=""><strong>Arbitrary State:</strong> You can store and retrieve any custom data or objects that need to be accessible by multiple nodes during the pipeline&#x27;s execution. This is particularly useful for configuration, metrics, or shared resources.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="constructor-parameters">Constructor Parameters<a href="#constructor-parameters" class="hash-link" aria-label="Direct link to Constructor Parameters" title="Direct link to Constructor Parameters" translate="no">​</a></h2>
<p>The <code>PipelineContext</code> constructor accepts several optional parameters to customize the execution environment:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public PipelineContext(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dictionary&lt;string, object&gt;? parameters = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IPipelineLoggerFactory? loggerFactory = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IPipelineTracer? tracer = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IPipelineErrorHandler? pipelineErrorHandler = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IDeadLetterSink? deadLetterSink = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dictionary&lt;string, object&gt;? items = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IErrorHandlerFactory? errorHandlerFactory = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ILineageFactory? lineageFactory = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IObservabilityFactory? observabilityFactory = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PipelineRetryOptions? retryOptions = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dictionary&lt;string, object&gt;? properties = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CancellationToken cancellationToken = default)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-a-pipelinecontext">Creating a <code>PipelineContext</code><a href="#creating-a-pipelinecontext" class="hash-link" aria-label="Direct link to creating-a-pipelinecontext" title="Direct link to creating-a-pipelinecontext" translate="no">​</a></h2>
<p>The simplest way to create a <code>PipelineContext</code> is by using its public constructor. <strong>All unspecified components automatically use sensible defaults</strong>, so you only need to configure what you need.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="default-components">Default Components<a href="#default-components" class="hash-link" aria-label="Direct link to Default Components" title="Direct link to Default Components" translate="no">​</a></h3>
<p>All of these components have built-in defaults - you don&#x27;t need to explicitly set them:</p>
<ul>
<li class=""><strong><code>ErrorHandlerFactory</code></strong>: <code>DefaultErrorHandlerFactory</code> (handles errors according to pipeline settings)</li>
<li class=""><strong><code>LineageFactory</code></strong>: <code>DefaultLineageFactory</code> (tracks data lineage)</li>
<li class=""><strong><code>ObservabilityFactory</code></strong>: <code>DefaultObservabilityFactory</code> (provides observability hooks)</li>
<li class=""><strong><code>LoggerFactory</code></strong>: <code>NullPipelineLoggerFactory</code> (no-op logger)</li>
<li class=""><strong><code>Tracer</code></strong>: <code>NullPipelineTracer</code> (no-op tracer)</li>
<li class=""><strong><code>RetryOptions</code></strong>: <code>PipelineRetryOptions.Default</code> (no retries)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="quick-start---no-configuration-needed">Quick Start - No Configuration Needed<a href="#quick-start---no-configuration-needed" class="hash-link" aria-label="Direct link to Quick Start - No Configuration Needed" title="Direct link to Quick Start - No Configuration Needed" translate="no">​</a></h3>
<p>For the most basic case, just create a context:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// This gives you a fully configured context with all defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var context = new PipelineContext();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var runner = new PipelineRunner();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await runner.RunAsync&lt;MyPipeline&gt;(context);</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="with-cancellation-token">With Cancellation Token<a href="#with-cancellation-token" class="hash-link" aria-label="Direct link to With Cancellation Token" title="Direct link to With Cancellation Token" translate="no">​</a></h3>
<p>The most common scenario:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var cts = new CancellationTokenSource(TimeSpan.FromMinutes(5));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Pass cancellation token directly through configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var context = new PipelineContext(PipelineContextConfiguration.WithCancellation(cts.Token));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await runner.RunAsync&lt;MyPipeline&gt;(context);</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="with-multiple-configurations">With Multiple Configurations<a href="#with-multiple-configurations" class="hash-link" aria-label="Direct link to With Multiple Configurations" title="Direct link to With Multiple Configurations" translate="no">​</a></h3>
<p>For complex scenarios, use the <code>PipelineContextBuilder</code> with fluent API:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var context = new PipelineContextBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .WithCancellation(cancellationToken)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .WithRetry(new PipelineRetryOptions(maxItemRetries: 3))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .WithParameters(new Dictionary&lt;string, object&gt; { { &quot;userId&quot;, 123 } })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .WithErrorHandlerFactory(myCustomErrorHandlerFactory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .WithObservability(loggerFactory: myLoggerFactory, tracer: myTracer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await runner.RunAsync&lt;MyPipeline&gt;(context);</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="entry-points">Entry Points<a href="#entry-points" class="hash-link" aria-label="Direct link to Entry Points" title="Direct link to Entry Points" translate="no">​</a></h3>
<p>You have several options depending on your needs:</p>
<table><thead><tr><th>Method</th><th>When to Use</th></tr></thead><tbody><tr><td><code>new PipelineContext()</code></td><td>Simple context with all defaults</td></tr><tr><td><code>new PipelineContext(PipelineContextConfiguration.WithCancellation(token))</code></td><td>For cancellation token only</td></tr><tr><td><code>new PipelineContext(config)</code></td><td>When you have a <code>PipelineContextConfiguration</code> object</td></tr><tr><td><code>new PipelineContextBuilder().Build()</code></td><td>Complex multi-step configuration</td></tr><tr><td><code>PipelineContext.Default</code></td><td>Simple read-only default context (rarely used)</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="accessing-pipelinecontext">Accessing <code>PipelineContext</code><a href="#accessing-pipelinecontext" class="hash-link" aria-label="Direct link to accessing-pipelinecontext" title="Direct link to accessing-pipelinecontext" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="standard-access">Standard Access<a href="#standard-access" class="hash-link" aria-label="Direct link to Standard Access" title="Direct link to Standard Access" translate="no">​</a></h3>
<p>Nodes that implement <code>TransformNode&lt;TInput, TOutput&gt;</code> or <code>SinkNode&lt;TInput&gt;</code> can access the <a class="" href="/docs/core-concepts/src/NPipeline/PipelineContext.cs"><code>PipelineContext</code></a> through their <code>ExecuteAsync</code> and <code>ExecuteAsync</code> methods, respectively.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class ExecuteAsync&lt;TInput, TOutput&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IAsyncEnumerable&lt;TOutput&gt; ExecuteAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IAsyncEnumerable&lt;TInput&gt; input,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CancellationToken cancellationToken = default);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SinkNode&lt;TInput&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Task ExecuteAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IAsyncEnumerable&lt;TInput&gt; input,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CancellationToken cancellationToken = default);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="context-aware-nodes">Context-Aware Nodes<a href="#context-aware-nodes" class="hash-link" aria-label="Direct link to Context-Aware Nodes" title="Direct link to Context-Aware Nodes" translate="no">​</a></h3>
<p>To access the full <code>PipelineContext</code> object, your nodes can implement the <code>IContextAwareNode</code> interface.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface IContextAwareNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void SetContext(PipelineContext context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>NPipeline will automatically detect if your node implements <code>IContextAwareNode</code> and inject the <code>PipelineContext</code> instance into it before the pipeline starts.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-properties-and-methods">Key Properties and Methods<a href="#key-properties-and-methods" class="hash-link" aria-label="Direct link to Key Properties and Methods" title="Direct link to Key Properties and Methods" translate="no">​</a></h2>
<p>The <a class="" href="/docs/core-concepts/src/NPipeline/PipelineContext.cs"><code>PipelineContext</code></a> includes properties and methods for:</p>
<ul>
<li class=""><strong><code>CancellationToken</code></strong>: A token that signals if the pipeline execution has been requested to stop. Nodes should monitor this token and cease operations if cancellation is requested.</li>
<li class=""><strong><code>Parameters</code></strong>: A dictionary to hold any runtime parameters for the pipeline. These are typically set during pipeline initialization and remain constant throughout execution.</li>
<li class=""><strong><code>Items</code></strong>: A dictionary for sharing state between pipeline nodes. This is used for transient data that needs to be accessible by multiple nodes during execution.</li>
<li class=""><strong><code>Properties</code></strong>: A dictionary for storing properties that can be used by extensions and plugins. This provides a way to extend PipelineContext without modifying its core structure.</li>
<li class=""><strong><code>LoggerFactory</code></strong>: The logger factory for this pipeline run, providing consistent logging across all nodes.</li>
<li class=""><strong><code>Tracer</code></strong>: The tracer for this pipeline run, enabling distributed tracing.</li>
<li class=""><strong><code>PipelineErrorHandler</code></strong>: The error handler for the entire pipeline.</li>
<li class=""><strong><code>DeadLetterSink</code></strong>: The sink for items that have failed processing and have been redirected.</li>
<li class=""><strong><code>ErrorHandlerFactory</code></strong>: The factory for creating error handlers and dead-letter sinks.</li>
<li class=""><strong><code>LineageFactory</code></strong>: The factory for creating lineage sinks and resolving lineage collectors.</li>
<li class=""><strong><code>ObservabilityFactory</code></strong>: The factory for resolving observability collectors.</li>
<li class=""><strong><code>RetryOptions</code></strong>: Execution / retry configuration for this pipeline run. Values here override builder defaults when provided.</li>
<li class=""><strong><code>CurrentNodeId</code></strong>: The ID of the node currently being executed. This is automatically managed by the pipeline runner.</li>
<li class=""><strong><code>ExecutionObserver</code></strong>: Optional execution observer for instrumentation (node lifecycle, retries, queue/backpressure events).</li>
<li class=""><strong><code>StateManager</code></strong>: Gets the state manager for this pipeline run, if available. This is accessed through the Properties dictionary.</li>
<li class=""><strong><code>StatefulRegistry</code></strong>: Gets the stateful registry for this pipeline run, if available. This is accessed through the Properties dictionary.</li>
<li class=""><strong>Logging/Metrics Interfaces</strong>: References to logging or metrics services (e.g., <code>ILogger</code>, <code>IMetricsRecorder</code>) that nodes can use to report events or data.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="state-management-capabilities">State Management Capabilities<a href="#state-management-capabilities" class="hash-link" aria-label="Direct link to State Management Capabilities" title="Direct link to State Management Capabilities" translate="no">​</a></h2>
<p><code>PipelineContext</code> provides several methods for managing state and resources:</p>
<ul>
<li class=""><strong><code>RegisterForDisposal(IAsyncDisposable disposable)</code></strong>: Registers an <code>IAsyncDisposable</code> resource to be disposed when the pipeline context is disposed. This ensures proper cleanup of resources created during pipeline execution.</li>
<li class=""><strong><code>ScopedNode(string nodeId)</code></strong>: Sets the <code>CurrentNodeId</code> for the duration of the returned disposable scope. This is used internally by the pipeline runner to track which node is currently executing.</li>
<li class=""><strong><code>TryGetStatefulRegistry(out IStatefulRegistry? registry)</code></strong>: Attempts to get the stateful registry for this pipeline run. Returns true if a stateful registry is available, false otherwise.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="difference-between-parameters-items-and-properties">Difference Between Parameters, Items, and Properties<a href="#difference-between-parameters-items-and-properties" class="hash-link" aria-label="Direct link to Difference Between Parameters, Items, and Properties" title="Direct link to Difference Between Parameters, Items, and Properties" translate="no">​</a></h2>
<ul>
<li class=""><strong>Parameters</strong>: These are typically set during pipeline initialization and are meant to be configuration values that remain constant throughout the pipeline execution. They are used to pass configuration to the pipeline as a whole.</li>
<li class=""><strong>Items</strong>: These are used for sharing transient state between pipeline nodes during execution. Items can be modified by nodes and are meant for data that needs to be shared between different parts of the pipeline during a single run.</li>
<li class=""><strong>Properties</strong>: These are used for storing properties that can be used by extensions and plugins. They provide a way to extend PipelineContext without modifying its core structure and are typically used by framework components rather than user code.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-using-pipelinecontext-for-logging">Example: Using <code>PipelineContext</code> for Logging<a href="#example-using-pipelinecontext-for-logging" class="hash-link" aria-label="Direct link to example-using-pipelinecontext-for-logging" title="Direct link to example-using-pipelinecontext-for-logging" translate="no">​</a></h2>
<p>Consider a scenario where you want to log the processing of each item within a transform node, including a correlation ID for tracing.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.DataFlow;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.DataFlow.DataPipes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.Nodes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.Pipeline;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Assume ILogger is an interface for logging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface ILogger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void LogInformation(string message, params object[] args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Assume a simple Logger implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class ConsoleLogger : ILogger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void LogInformation(string message, params object[] args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;[INFO] {string.Format(message, args)}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed record DataItem(Guid Id, string Payload);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class MyTransformWithContext : ITransformNode&lt;DataItem, DataItem&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async IAsyncEnumerable&lt;DataItem&gt; ExecuteAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IAsyncEnumerable&lt;DataItem&gt; input,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Retrieve logger from context (or get a default if not present)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var logger = context.GetItem&lt;ILogger&gt;(&quot;Logger&quot;) ?? new ConsoleLogger();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var correlationId = context.GetItem&lt;Guid&gt;(&quot;CorrelationId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await foreach (var item in input.WithCancellation(cancellationToken))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (cancellationToken.IsCancellationRequested) yield break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            logger.LogInformation(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;[{CorrelationId}] Processing item {ItemId} with payload: {Payload}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                correlationId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                item.Id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                item.Payload);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Simulate some transformation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var transformedItem = item with { Payload = item.Payload.ToUpperInvariant() };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            yield return transformedItem;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class MySource : SourceNode&lt;DataItem&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public override IDataPipe&lt;DataItem&gt; ExecuteAsync(PipelineContext context, CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        static IAsyncEnumerable&lt;DataItem&gt; Stream()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            async IAsyncEnumerable&lt;DataItem&gt; Generate()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                for (int i = 0; i &lt; 3; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    yield return new DataItem(Guid.NewGuid(), $&quot;item-{i}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new StreamingDataPipe&lt;DataItem&gt;(Stream(), &quot;Source Data Stream&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class MySink : SinkNode&lt;DataItem&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public override async Task ExecuteAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IDataPipe&lt;DataItem&gt; input,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var logger = context.Items.TryGetValue(&quot;Logger&quot;, out var loggerObj) &amp;&amp; loggerObj is ILogger loggerInstance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ? loggerInstance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            : new ConsoleLogger();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await foreach (var item in input.WithCancellation(cancellationToken))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            logger.LogInformation(&quot;Sink consumed: {ItemId} - {Payload}&quot;, item.Id, item.Payload);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class MyPipelineDefinition : IPipelineDefinition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void Define(PipelineBuilder builder, PipelineContext context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var sourceHandle = builder.AddSource&lt;MySource, DataItem&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var transformHandle = builder.AddTransform&lt;MyTransformWithContext, DataItem, DataItem&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var sinkHandle = builder.AddSink&lt;MySink, DataItem&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.Connect(sourceHandle, transformHandle);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.Connect(transformHandle, sinkHandle);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static class Program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static async Task Main(string[] args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var logger = new ConsoleLogger();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var correlationId = Guid.NewGuid();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Create a custom PipelineContext and add shared resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var context = PipelineContext.Default;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.Items[&quot;Logger&quot;] = logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.Items[&quot;CorrelationId&quot;] = correlationId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var runner = new PipelineRunner();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Starting pipeline with CorrelationId: {correlationId}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await runner.RunAsync&lt;MyPipelineDefinition&gt;(context); // Pass the custom context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine(&quot;Pipeline finished.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>In this example, a <code>ConsoleLogger</code> and a <code>CorrelationId</code> are added to the <code>PipelineContext</code>. The <code>MyTransformWithContext</code> and <code>MySink</code> nodes then retrieve these items from the context to perform logging with the shared correlation ID.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-using-icontextawarenode">Example: Using <code>IContextAwareNode</code><a href="#example-using-icontextawarenode" class="hash-link" aria-label="Direct link to example-using-icontextawarenode" title="Direct link to example-using-icontextawarenode" translate="no">​</a></h2>
<p>Let&#x27;s imagine a scenario where you want to pass a configuration setting (e.g., a batch size) to multiple nodes, or log information with a unique pipeline run ID.</p>
<p>First, define a custom context object or simply use <code>PipelineContext</code> directly:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.DataFlow;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.DataFlow.DataPipes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.Nodes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class MyConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int BatchSize { get; set; } = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Guid RunId { get; } = Guid.NewGuid();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class ConfigurableSource : SourceNode&lt;string&gt;, IContextAwareNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private PipelineContext _context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void SetContext(PipelineContext context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _context = context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public override IDataPipe&lt;string&gt; ExecuteAsync(PipelineContext context, CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var config = _context.GetOrAdd(&quot;MyConfig&quot;, () =&gt; new MyConfig());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Source (RunId: {config.RunId}): Producing up to {config.BatchSize} items.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        static IAsyncEnumerable&lt;string&gt; Stream(int batchSize)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Generate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            async IAsyncEnumerable&lt;string&gt; Generate()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                for (int i = 0; i &lt; batchSize; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    yield return $&quot;Item {i}&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new StreamingDataPipe&lt;string&gt;(Stream(config.BatchSize), &quot;Configurable Source Stream&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class ContextAwareTransform : TransformNode&lt;string, string&gt;, IContextAwareNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private PipelineContext _context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void SetContext(PipelineContext context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _context = context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public override async Task&lt;string&gt; ExecuteAsync(string item, PipelineContext context, CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var config = _context.GetOrAdd(&quot;MyConfig&quot;, () =&gt; new MyConfig()); // Retrieve the same config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Transform (RunId: {config.RunId}): Transforming {item}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return item.ToUpperInvariant();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class ContextAwareSink : SinkNode&lt;string&gt;, IContextAwareNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private PipelineContext _context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void SetContext(PipelineContext context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _context = context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public override async Task ExecuteAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IDataPipe&lt;string&gt; input,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CancellationToken cancellationToken = default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var config = _context.GetOrAdd(&quot;MyConfig&quot;, () =&gt; new MyConfig()); // Retrieve the same config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Sink (RunId: {config.RunId}): Consuming items.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await foreach (var item in input.WithCancellation(cancellationToken))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Console.WriteLine($&quot;Sink (RunId: {config.RunId}): Received {item}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class ContextAwarePipelineDefinition : IPipelineDefinition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void Define(PipelineBuilder builder, PipelineContext context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var sourceHandle = builder.AddSource&lt;ConfigurableSource, string&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var transformHandle = builder.AddTransform&lt;ContextAwareTransform, string, string&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var sinkHandle = builder.AddSink&lt;ContextAwareSink, string&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.Connect(sourceHandle, transformHandle);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.Connect(transformHandle, sinkHandle);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static class Program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static async Task Main(string[] args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var runner = new PipelineRunner();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await runner.RunAsync&lt;ContextAwarePipelineDefinition&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>In this example, <code>MyConfig</code> is stored in <code>PipelineContext</code> using a key (&quot;MyConfig&quot;). Each <code>IContextAwareNode</code> can then retrieve this shared configuration. The <code>GetOrAdd</code> method ensures that the object is created only once per pipeline run if it doesn&#x27;t already exist for that key.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices" translate="no">​</a></h2>
<ul>
<li class=""><strong>Keep it Lightweight</strong>: Avoid adding large or frequently changing data structures to the context. For complex state management, consider dedicated state management nodes or services.</li>
<li class=""><strong>Transient State:</strong> Use <code>PipelineContext</code> for state that is specific to a single pipeline run. Avoid using it for global application state.</li>
<li class=""><strong>Immutability (where possible)</strong>: While the context itself is mutable, consider making items retrieved from it immutable or thread-safe if they are to be shared and modified across multiple concurrent nodes. Where possible, store immutable objects in context to prevent unexpected side effects from nodes modifying shared state.</li>
<li class=""><strong>Clarity</strong>: Use meaningful keys for items stored in the context to improve readability and prevent naming collisions. Consider defining static string constants for your keys.</li>
<li class=""><strong>Optional Access</strong>: Design nodes to gracefully handle cases where an expected item might not be present in the context (e.g., provide default values or log warnings).</li>
<li class=""><strong>Cancellation:</strong> Always respect the <code>CancellationToken</code> provided by the <code>PipelineContext</code> (or directly via method parameters) to ensure your nodes can respond to cancellation requests.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="related-topics">Related Topics<a href="#related-topics" class="hash-link" aria-label="Direct link to Related Topics" title="Direct link to Related Topics" translate="no">​</a></h2>
<ul>
<li class=""><strong><a class="" href="/docs/core-concepts/streaming-vs-buffering">Streaming vs. Buffering</a></strong>: Understand how NPipeline handles data flow and memory management.</li>
<li class=""><strong><a class="" href="/docs/core-concepts/resilience/error-handling-guide">Error Handling</a></strong>: Learn about NPipeline&#x27;s error handling mechanisms.</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/core-concepts/pipeline-execution/execution-strategies"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Execution Strategies</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/core-concepts/common-patterns"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Common Patterns</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-pipelinecontext" class="table-of-contents__link toc-highlight">What is <code>PipelineContext</code>?</a></li><li><a href="#constructor-parameters" class="table-of-contents__link toc-highlight">Constructor Parameters</a></li><li><a href="#creating-a-pipelinecontext" class="table-of-contents__link toc-highlight">Creating a <code>PipelineContext</code></a><ul><li><a href="#default-components" class="table-of-contents__link toc-highlight">Default Components</a></li><li><a href="#quick-start---no-configuration-needed" class="table-of-contents__link toc-highlight">Quick Start - No Configuration Needed</a></li><li><a href="#with-cancellation-token" class="table-of-contents__link toc-highlight">With Cancellation Token</a></li><li><a href="#with-multiple-configurations" class="table-of-contents__link toc-highlight">With Multiple Configurations</a></li><li><a href="#entry-points" class="table-of-contents__link toc-highlight">Entry Points</a></li></ul></li><li><a href="#accessing-pipelinecontext" class="table-of-contents__link toc-highlight">Accessing <code>PipelineContext</code></a><ul><li><a href="#standard-access" class="table-of-contents__link toc-highlight">Standard Access</a></li><li><a href="#context-aware-nodes" class="table-of-contents__link toc-highlight">Context-Aware Nodes</a></li></ul></li><li><a href="#key-properties-and-methods" class="table-of-contents__link toc-highlight">Key Properties and Methods</a></li><li><a href="#state-management-capabilities" class="table-of-contents__link toc-highlight">State Management Capabilities</a></li><li><a href="#difference-between-parameters-items-and-properties" class="table-of-contents__link toc-highlight">Difference Between Parameters, Items, and Properties</a></li><li><a href="#example-using-pipelinecontext-for-logging" class="table-of-contents__link toc-highlight">Example: Using <code>PipelineContext</code> for Logging</a></li><li><a href="#example-using-icontextawarenode" class="table-of-contents__link toc-highlight">Example: Using <code>IContextAwareNode</code></a></li><li><a href="#best-practices" class="table-of-contents__link toc-highlight">Best Practices</a></li><li><a href="#related-topics" class="table-of-contents__link toc-highlight">Related Topics</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/why-npipeline">Why NPipeline?</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/quick-start">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/core-concepts">Core Concepts</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/npipeline/npipeline" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">&nbsp;</div></div></div></footer></div>
</body>
</html>