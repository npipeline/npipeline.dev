<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-core-concepts/resilience/retries" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Retry Configuration | NPipeline</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="robots" content="noindex, nofollow"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://npipeline.dev/docs/core-concepts/resilience/retries"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Retry Configuration | NPipeline"><meta data-rh="true" name="description" content="Learn how to configure retry behavior in NPipeline using PipelineRetryOptions to manage item retries and node restarts."><meta data-rh="true" property="og:description" content="Learn how to configure retry behavior in NPipeline using PipelineRetryOptions to manage item retries and node restarts."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://npipeline.dev/docs/core-concepts/resilience/retries"><link data-rh="true" rel="alternate" href="https://npipeline.dev/docs/core-concepts/resilience/retries" hreflang="en"><link data-rh="true" rel="alternate" href="https://npipeline.dev/docs/core-concepts/resilience/retries" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Core Concepts","item":"https://npipeline.dev/docs/core-concepts"},{"@type":"ListItem","position":2,"name":"Resilience","item":"https://npipeline.dev/docs/core-concepts/resilience/"},{"@type":"ListItem","position":3,"name":"Retry Configuration","item":"https://npipeline.dev/docs/core-concepts/resilience/retries"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="NPipeline RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="NPipeline Atom Feed"><link rel="stylesheet" href="/assets/css/styles.96187551.css">
<script src="/assets/js/runtime~main.c5fd666d.js" defer="defer"></script>
<script src="/assets/js/main.3ff69910.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="NPipeline logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="NPipeline logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">NPipeline</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/npipeline/npipeline" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/"><span title="Welcome to NPipeline" class="linkLabel_WmDU">Welcome to NPipeline</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/getting-started"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/core-concepts"><span title="Core Concepts" class="categoryLinkLabel_W154">Core Concepts</span></a><button aria-label="Collapse sidebar category &#x27;Core Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/grouping-strategies"><span title="Grouping Strategies - Batching vs Aggregation" class="linkLabel_WmDU">Grouping Strategies - Batching vs Aggregation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/ipipeline"><span title="Pipeline" class="linkLabel_WmDU">Pipeline</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/data-pipes"><span title="Data Pipes (IDataPipe)" class="linkLabel_WmDU">Data Pipes (IDataPipe)</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/core-concepts/nodes/"><span title="Nodes" class="categoryLinkLabel_W154">Nodes</span></a><button aria-label="Collapse sidebar category &#x27;Nodes&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/source-nodes"><span title="Source Nodes" class="linkLabel_WmDU">Source Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/batching"><span title="Batching Nodes" class="linkLabel_WmDU">Batching Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/transform-nodes"><span title="Transform Nodes" class="linkLabel_WmDU">Transform Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/join"><span title="Join Nodes" class="linkLabel_WmDU">Join Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/sink-nodes"><span title="Sink Nodes" class="linkLabel_WmDU">Sink Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/lookup"><span title="Lookup Nodes" class="linkLabel_WmDU">Lookup Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/branch"><span title="Branch Nodes" class="linkLabel_WmDU">Branch Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/tap"><span title="Tap Nodes" class="linkLabel_WmDU">Tap Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/aggregation"><span title="Aggregation Nodes" class="linkLabel_WmDU">Aggregation Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/nodes/time-windowed-join"><span title="Time-Windowed Joins" class="linkLabel_WmDU">Time-Windowed Joins</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/core-concepts/resilience/"><span title="Resilience" class="categoryLinkLabel_W154">Resilience</span></a><button aria-label="Collapse sidebar category &#x27;Resilience&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/resilience/error-handling"><span title="Error Handling in NPipeline" class="linkLabel_WmDU">Error Handling in NPipeline</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/resilience/getting-started"><span title="Resilience Quick Start" class="linkLabel_WmDU">Resilience Quick Start</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/resilience/circuit-breakers"><span title="Circuit Breakers" class="linkLabel_WmDU">Circuit Breakers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/resilience/materialization"><span title="Materialization and Buffering" class="linkLabel_WmDU">Materialization and Buffering</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/resilience/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/core-concepts/resilience/retries"><span title="Retry Configuration" class="linkLabel_WmDU">Retry Configuration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/resilience/retry-delay-advanced"><span title="Advanced Retry Delay Strategies" class="linkLabel_WmDU">Advanced Retry Delay Strategies</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/resilience/retry-delay-quickstart"><span title="Retry Delay Quickstart" class="linkLabel_WmDU">Retry Delay Quickstart</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/resilience/dead-letter-queues"><span title="Dead-Letter Queues" class="linkLabel_WmDU">Dead-Letter Queues</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/pipeline-definition"><span title="Pipeline Definition (IPipelineDefinition, PipelineBuilder)" class="linkLabel_WmDU">Pipeline Definition (IPipelineDefinition, PipelineBuilder)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/pipelinebuilder"><span title="PipelineBuilder" class="linkLabel_WmDU">PipelineBuilder</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/core-concepts/pipeline-execution"><span title="Pipeline Execution" class="categoryLinkLabel_W154">Pipeline Execution</span></a><button aria-label="Expand sidebar category &#x27;Pipeline Execution&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/pipeline-context"><span title="Pipeline Context (PipelineContext)" class="linkLabel_WmDU">Pipeline Context (PipelineContext)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/common-patterns"><span title="Common Patterns" class="linkLabel_WmDU">Common Patterns</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/streaming-vs-buffering"><span title="Streaming vs. Buffering" class="linkLabel_WmDU">Streaming vs. Buffering</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/best-practices"><span title="Best Practices" class="linkLabel_WmDU">Best Practices</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/pipeline-validation"><span title="Pipeline Validation Extensions - Usage Guide" class="linkLabel_WmDU">Pipeline Validation Extensions - Usage Guide</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/thread-safety"><span title="Thread Safety Guidelines" class="linkLabel_WmDU">Thread Safety Guidelines</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/architecture/"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a><button aria-label="Collapse sidebar category &#x27;Architecture&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/core-concepts"><span title="Core Concepts" class="linkLabel_WmDU">Core Concepts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/component-architecture"><span title="Component Architecture" class="linkLabel_WmDU">Component Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/execution-flow"><span title="Execution Flow" class="linkLabel_WmDU">Execution Flow</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/data-flow"><span title="Data Flow Details" class="linkLabel_WmDU">Data Flow Details</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/dependency-injection"><span title="Dependency Injection Integration" class="linkLabel_WmDU">Dependency Injection Integration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/error-handling-architecture"><span title="Error Handling Architecture" class="linkLabel_WmDU">Error Handling Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/cancellation-model"><span title="Cancellation Model" class="linkLabel_WmDU">Cancellation Model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/performance-characteristics"><span title="Performance Characteristics" class="linkLabel_WmDU">Performance Characteristics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/retry-delay-architecture"><span title="Retry Delay Strategies Architecture" class="linkLabel_WmDU">Retry Delay Strategies Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/extension-points"><span title="Extension Points" class="linkLabel_WmDU">Extension Points</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/design-principles"><span title="Design Principles" class="linkLabel_WmDU">Design Principles</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/optimization-principles"><span title="Optimization Principles - How NPipeline Achieves High Performance" class="linkLabel_WmDU">Optimization Principles - How NPipeline Achieves High Performance</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/extensions"><span title="Extensions" class="categoryLinkLabel_W154">Extensions</span></a><button aria-label="Expand sidebar category &#x27;Extensions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/connectors"><span title="Connectors" class="categoryLinkLabel_W154">Connectors</span></a><button aria-label="Expand sidebar category &#x27;Connectors&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/advanced-topics"><span title="Advanced Topics" class="categoryLinkLabel_W154">Advanced Topics</span></a><button aria-label="Expand sidebar category &#x27;Advanced Topics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/samples/"><span title="Samples" class="categoryLinkLabel_W154">Samples</span></a><button aria-label="Expand sidebar category &#x27;Samples&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/reference"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/tooling/"><span title="Tooling" class="categoryLinkLabel_W154">Tooling</span></a><button aria-label="Expand sidebar category &#x27;Tooling&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/core-concepts"><span>Core Concepts</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/core-concepts/resilience/"><span>Resilience</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Retry Configuration</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Retry Configuration</h1></header>
<p>Retry configuration in NPipeline allows you to define how the pipeline should respond to transient failures by retrying operations. This is essential for building resilient pipelines that can recover from temporary issues without manual intervention.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">​</a></h2>
<p>NPipeline provides configurable retry options that control both individual item retries (for node-level errors) and node restart attempts (for pipeline-level errors). These options can be set globally for the entire pipeline or overridden for specific nodes.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="pipelineretryoptions">PipelineRetryOptions<a href="#pipelineretryoptions" class="hash-link" aria-label="Direct link to PipelineRetryOptions" title="Direct link to PipelineRetryOptions" translate="no">​</a></h2>
<p>The <a class="" href="/docs/src/NPipeline/Configuration/PipelineRetryOptions.cs"><code>PipelineRetryOptions</code></a> record configures retry behavior for items and node restarts.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed record PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int MaxItemRetries,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int MaxNodeRestartAttempts,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int MaxSequentialNodeAttempts,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int? MaxMaterializedItems = null) // Null =&gt; unbounded (no cap)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static PipelineRetryOptions Default { get; } = new(0, 3, 5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public PipelineRetryOptions With(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int? maxItemRetries = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int? maxNodeRestartAttempts = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int? maxSequentialNodeAttempts = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int? maxMaterializedItems = null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            maxItemRetries ?? MaxItemRetries,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            maxNodeRestartAttempts ?? MaxNodeRestartAttempts,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            maxSequentialNodeAttempts ?? MaxSequentialNodeAttempts,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            maxMaterializedItems ?? MaxMaterializedItems);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong><code>MaxItemRetries</code></strong>: The maximum number of times an individual item will be re-processed by a node&#x27;s execution strategy if its <code>INodeErrorHandler</code> returns <code>NodeErrorDecision.Retry</code>.</li>
<li class=""><strong><code>MaxNodeRestartAttempts</code></strong>: The maximum number of times a node&#x27;s entire stream will be re-executed by <code>ResilientExecutionStrategy</code> if <code>IPipelineErrorHandler</code> returns <code>PipelineErrorDecision.RestartNode</code>.</li>
<li class=""><strong><code>MaxSequentialNodeAttempts</code></strong>: (Used by <code>SequentialExecutionStrategy</code> for node restarts) The maximum number of attempts for a node in a sequential pipeline.</li>
<li class=""><strong><code>MaxMaterializedItems</code></strong>: An optional cap on the number of items to materialize (buffer) for replay when using <code>ResilientExecutionStrategy</code>.<!-- -->
<ul>
<li class="">When <code>null</code> (default): Unbounded materialization - all items are buffered</li>
<li class="">When has a value: Limited materialization - only the specified number of items are buffered, after which new items replace the oldest ones</li>
<li class="">This parameter prevents excessive memory consumption in case of large streams and is particularly important for long-running pipelines with high throughput</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="basic-retry-configuration">Basic Retry Configuration<a href="#basic-retry-configuration" class="hash-link" aria-label="Direct link to Basic Retry Configuration" title="Direct link to Basic Retry Configuration" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="global-retry-options">Global Retry Options<a href="#global-retry-options" class="hash-link" aria-label="Direct link to Global Retry Options" title="Direct link to Global Retry Options" translate="no">​</a></h3>
<p>You can set retry options globally for the pipeline:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.Nodes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.Pipeline;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class RetryPipelineDefinition : IPipelineDefinition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void Define(PipelineBuilder builder, PipelineContext context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var sourceHandle = builder.AddSource&lt;DataSource, string&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var transformHandle = builder.AddTransform&lt;DataTransform, string, string&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var sinkHandle = builder.AddSink&lt;DataSink, string&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.Connect(sourceHandle, transformHandle);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.Connect(transformHandle, sinkHandle);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Configure retry policy using PipelineRetryOptions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.WithRetryOptions(new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxItemRetries: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxNodeRestartAttempts: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxSequentialNodeAttempts: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static class Program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static async Task Main(string[] args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var runner = PipelineRunner.Create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await runner.RunAsync&lt;RetryPipelineDefinition&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="per-node-retry-options">Per-Node Retry Options<a href="#per-node-retry-options" class="hash-link" aria-label="Direct link to Per-Node Retry Options" title="Direct link to Per-Node Retry Options" translate="no">​</a></h3>
<p>You can override the global retry options for a specific node using the <code>WithRetryOptions</code> method that accepts a <code>NodeHandle</code>:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.Nodes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.Pipeline;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class PerNodeRetryPipelineDefinition : IPipelineDefinition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void Define(PipelineBuilder builder, PipelineContext context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var sourceHandle = builder.AddSource&lt;DataSource, string&gt;(&quot;source&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var criticalTransformHandle = builder.AddTransform&lt;CriticalDataTransform, string, string&gt;(&quot;critical-transform&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var normalTransformHandle = builder.AddTransform&lt;NormalDataTransform, string, string&gt;(&quot;normal-transform&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var sinkHandle = builder.AddSink&lt;DataSink, string&gt;(&quot;sink&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.Connect(sourceHandle, criticalTransformHandle);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.Connect(criticalTransformHandle, normalTransformHandle);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.Connect(normalTransformHandle, sinkHandle);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Configure global retry options (default for all nodes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.WithRetryOptions(new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxItemRetries: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxNodeRestartAttempts: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxSequentialNodeAttempts: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Override retry options for the critical transform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        builder.WithRetryOptions(criticalTransformHandle, new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxItemRetries: 5,              // More retries for critical processing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxNodeRestartAttempts: 10,      // More restart attempts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxSequentialNodeAttempts: 15,   // Higher total attempt limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxMaterializedItems: 1000       // Higher memory limit for replay</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-cases-for-per-node-retry-configuration">Use Cases for Per-Node Retry Configuration<a href="#use-cases-for-per-node-retry-configuration" class="hash-link" aria-label="Direct link to Use Cases for Per-Node Retry Configuration" title="Direct link to Use Cases for Per-Node Retry Configuration" translate="no">​</a></h4>
<p>Per-node retry options are useful in scenarios where different parts of your pipeline have different resilience requirements:</p>
<p><strong>1. External API Calls vs. Internal Processing</strong></p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// More aggressive retries for external API calls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.WithRetryOptions(apiTransformHandle, new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxItemRetries: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxNodeRestartAttempts: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxSequentialNodeAttempts: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Conservative retries for internal data processing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.WithRetryOptions(internalTransformHandle, new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxItemRetries: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxNodeRestartAttempts: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxSequentialNodeAttempts: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">));</span><br></span></code></pre></div></div>
<p><strong>2. Critical vs. Non-Critical Processing</strong></p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Maximum resilience for critical business logic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.WithRetryOptions(criticalProcessorHandle, new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxItemRetries: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxNodeRestartAttempts: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxSequentialNodeAttempts: 20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxMaterializedItems: 5000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Best-effort processing for non-critical data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.WithRetryOptions(loggingProcessorHandle, new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxItemRetries: 0,  // No retries for logging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxNodeRestartAttempts: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxSequentialNodeAttempts: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">));</span><br></span></code></pre></div></div>
<p><strong>3. Resource-Intensive Operations</strong></p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Limited retries for memory-intensive operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.WithRetryOptions(memoryIntensiveHandle, new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxItemRetries: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxNodeRestartAttempts: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxSequentialNodeAttempts: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxMaterializedItems: 100  // Strict memory limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">));</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="precedence-rules">Precedence Rules<a href="#precedence-rules" class="hash-link" aria-label="Direct link to Precedence Rules" title="Direct link to Precedence Rules" translate="no">​</a></h4>
<p>When both global and per-node retry options are configured:</p>
<ol>
<li class=""><strong>Per-node options take precedence</strong> over global options</li>
<li class=""><strong>Unspecified properties</strong> in per-node options inherit from global options</li>
<li class=""><strong>Global options</strong> apply to all nodes without specific overrides</li>
</ol>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Global configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.WithRetryOptions(new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxItemRetries: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxNodeRestartAttempts: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxSequentialNodeAttempts: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Per-node override (only MaxItemRetries is overridden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.WithRetryOptions(specificNodeHandle, new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxItemRetries: 5,              // Overridden</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxNodeRestartAttempts: 3,       // Inherited from global</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxSequentialNodeAttempts: 5      // Inherited from global</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">));</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="retry-delay-strategies">Retry Delay Strategies<a href="#retry-delay-strategies" class="hash-link" aria-label="Direct link to Retry Delay Strategies" title="Direct link to Retry Delay Strategies" translate="no">​</a></h2>
<p>NPipeline provides built-in retry delay strategies that combine <strong>backoff</strong> (how delays increase over time) with <strong>jitter</strong> (randomness to prevent synchronized retries). These strategies are essential for distributed systems to prevent thundering herd problems.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-backoff-and-jitter-matter">Why Backoff and Jitter Matter<a href="#why-backoff-and-jitter-matter" class="hash-link" aria-label="Direct link to Why Backoff and Jitter Matter" title="Direct link to Why Backoff and Jitter Matter" translate="no">​</a></h3>
<p><strong>The Thundering Herd Problem:</strong> When multiple pipeline instances encounter failures simultaneously and retry immediately, they can overwhelm a recovering service, causing cascading failures. Backoff strategies prevent this by increasing delays between retries, and jitter adds randomness to prevent synchronized retries.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="available-backoff-strategies">Available Backoff Strategies<a href="#available-backoff-strategies" class="hash-link" aria-label="Direct link to Available Backoff Strategies" title="Direct link to Available Backoff Strategies" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="exponential-backoff">Exponential Backoff<a href="#exponential-backoff" class="hash-link" aria-label="Direct link to Exponential Backoff" title="Direct link to Exponential Backoff" translate="no">​</a></h4>
<p>Delays grow exponentially, ideal for distributed systems with transient failures:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Configuration approach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var config = new ExponentialBackoffConfiguration(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseDelay: TimeSpan.FromSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multiplier: 2.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxDelay: TimeSpan.FromMinutes(1));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Runtime configuration via PipelineContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">context.UseExponentialBackoffDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseDelay: TimeSpan.FromSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multiplier: 2.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxDelay: TimeSpan.FromMinutes(1));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Direct delegate creation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var exponentialBackoff = BackoffStrategies.ExponentialBackoff(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseDelay: TimeSpan.FromSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multiplier: 2.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxDelay: TimeSpan.FromMinutes(1));</span><br></span></code></pre></div></div>
<p><strong>Delay progression:</strong> 1s → 2s → 4s → 8s → 16s → 32s → 60s (capped)</p>
<p><strong>Use cases:</strong></p>
<ul>
<li class="">Web API calls with transient network failures</li>
<li class="">Database connections during temporary overload</li>
<li class="">Microservice communication during partial outages</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="linear-backoff">Linear Backoff<a href="#linear-backoff" class="hash-link" aria-label="Direct link to Linear Backoff" title="Direct link to Linear Backoff" translate="no">​</a></h4>
<p>Delays grow linearly, providing predictable recovery:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Configuration approach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var config = new LinearBackoffConfiguration(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseDelay: TimeSpan.FromSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    increment: TimeSpan.FromSeconds(2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxDelay: TimeSpan.FromSeconds(30));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Runtime configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">context.UseLinearBackoffDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseDelay: TimeSpan.FromSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    increment: TimeSpan.FromSeconds(2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxDelay: TimeSpan.FromSeconds(30));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Direct delegate creation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var linearBackoff = BackoffStrategies.LinearBackoff(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseDelay: TimeSpan.FromSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    increment: TimeSpan.FromSeconds(2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxDelay: TimeSpan.FromSeconds(30));</span><br></span></code></pre></div></div>
<p><strong>Delay progression:</strong> 1s → 3s → 5s → 7s → 9s → ... → 30s (capped)</p>
<p><strong>Use cases:</strong></p>
<ul>
<li class="">File processing with temporary resource contention</li>
<li class="">Batch operations with predictable recovery patterns</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="fixed-delay">Fixed Delay<a href="#fixed-delay" class="hash-link" aria-label="Direct link to Fixed Delay" title="Direct link to Fixed Delay" translate="no">​</a></h4>
<p>Constant delay between all retries:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Configuration approach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var config = new FixedDelayConfiguration(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    delay: TimeSpan.FromSeconds(5));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Runtime configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">context.UseFixedDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    delay: TimeSpan.FromSeconds(5));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Direct delegate creation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var fixedBackoff = BackoffStrategies.FixedDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    delay: TimeSpan.FromSeconds(5));</span><br></span></code></pre></div></div>
<p><strong>Delay progression:</strong> 5s → 5s → 5s → 5s → ...</p>
<p><strong>Use cases:</strong></p>
<ul>
<li class="">Testing and debugging scenarios</li>
<li class="">Known recovery times</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="available-jitter-strategies">Available Jitter Strategies<a href="#available-jitter-strategies" class="hash-link" aria-label="Direct link to Available Jitter Strategies" title="Direct link to Available Jitter Strategies" translate="no">​</a></h3>
<p>Jitter strategies are now implemented as delegates rather than interfaces, providing a more streamlined API:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Jitter strategy delegate type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using JitterStrategy = Func&lt;TimeSpan, Random, TimeSpan&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Built-in jitter strategies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JitterStrategy fullJitter = JitterStrategies.FullJitter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JitterStrategy equalJitter = JitterStrategies.EqualJitter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JitterStrategy decorrelatedJitter = JitterStrategies.DecorrelatedJitter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JitterStrategy noJitter = JitterStrategies.NoJitter();</span><br></span></code></pre></div></div>
<p>This delegate approach reduces complexity while maintaining the same functionality. Each jitter strategy takes a base delay and a Random instance, and returns a jittered delay.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="decorrelated-jitter">Decorrelated Jitter<a href="#decorrelated-jitter" class="hash-link" aria-label="Direct link to Decorrelated Jitter" title="Direct link to Decorrelated Jitter" translate="no">​</a></h4>
<p>Adapts based on previous delays:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var config = new DecorrelatedJitterConfiguration(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxDelay: TimeSpan.FromMinutes(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multiplier: 3.0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Direct delegate creation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var decorrelatedJitter = JitterStrategies.DecorrelatedJitter();</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="no-jitter">No Jitter<a href="#no-jitter" class="hash-link" aria-label="Direct link to No Jitter" title="Direct link to No Jitter" translate="no">​</a></h4>
<p>Deterministic timing (useful for testing):</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var config = new NoJitterConfiguration();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Direct delegate creation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var noJitter = JitterStrategies.NoJitter();</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="recommended-strategy-combinations">Recommended Strategy Combinations<a href="#recommended-strategy-combinations" class="hash-link" aria-label="Direct link to Recommended Strategy Combinations" title="Direct link to Recommended Strategy Combinations" translate="no">​</a></h3>
<p><strong>Web APIs (Recommended):</strong></p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">context.UseExponentialBackoffDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseDelay: TimeSpan.FromSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multiplier: 2.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxDelay: TimeSpan.FromMinutes(1));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Or using delegates directly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var backoff = BackoffStrategies.ExponentialBackoff(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TimeSpan.FromSeconds(1), 2.0, TimeSpan.FromMinutes(1));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var jitter = JitterStrategies.FullJitter();</span><br></span></code></pre></div></div>
<p><strong>Database Operations:</strong></p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">context.UseLinearBackoffDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseDelay: TimeSpan.FromMilliseconds(100),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    increment: TimeSpan.FromMilliseconds(200),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxDelay: TimeSpan.FromSeconds(5));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Or using delegates directly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var backoff = BackoffStrategies.LinearBackoff(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TimeSpan.FromMilliseconds(100), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TimeSpan.FromMilliseconds(200), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TimeSpan.FromSeconds(5));</span><br></span></code></pre></div></div>
<p><strong>File Processing:</strong></p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">context.UseFixedDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    delay: TimeSpan.FromSeconds(2));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Or using delegates directly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var backoff = BackoffStrategies.FixedDelay(TimeSpan.FromSeconds(2));</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuration-at-initialization">Configuration at Initialization<a href="#configuration-at-initialization" class="hash-link" aria-label="Direct link to Configuration at Initialization" title="Direct link to Configuration at Initialization" translate="no">​</a></h3>
<p>You can configure delay strategies when building your pipeline:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var retryOptions = new PipelineRetryOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxItemRetries: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxNodeRestartAttempts: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxSequentialNodeAttempts: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    delayStrategyConfiguration: new RetryDelayStrategyConfiguration(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new ExponentialBackoffConfiguration(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TimeSpan.FromSeconds(1), 2.0, TimeSpan.FromMinutes(1)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new FullJitterConfiguration()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.WithRetryOptions(retryOptions);</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="runtime-configuration">Runtime Configuration<a href="#runtime-configuration" class="hash-link" aria-label="Direct link to Runtime Configuration" title="Direct link to Runtime Configuration" translate="no">​</a></h3>
<p>Configure delay strategies at runtime within your pipeline definition:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public void Define(PipelineBuilder builder, PipelineContext context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Check system conditions and configure accordingly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (IsHighLoad(context))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.UseExponentialBackoffDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            baseDelay: TimeSpan.FromSeconds(2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            multiplier: 3.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            maxDelay: TimeSpan.FromMinutes(5));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.UseExponentialBackoffDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            baseDelay: TimeSpan.FromSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            multiplier: 2.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            maxDelay: TimeSpan.FromMinutes(1));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var source = builder.AddSource&lt;MySource, MyData&gt;(&quot;Source&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var transform = builder.AddTransform&lt;MyTransform, MyData, ProcessedData&gt;(&quot;Transform&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    builder.Connect(source, transform);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>For more advanced retry delay patterns and scenarios, see the <a class="" href="/docs/core-concepts/resilience/retry-delay-advanced">Advanced Retry Delay Strategies</a> guide.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="retry-delay-api-reference">Retry Delay API Reference<a href="#retry-delay-api-reference" class="hash-link" aria-label="Direct link to Retry Delay API Reference" title="Direct link to Retry Delay API Reference" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="core-interfaces">Core Interfaces<a href="#core-interfaces" class="hash-link" aria-label="Direct link to Core Interfaces" title="Direct link to Core Interfaces" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="iretrydelaystrategy">IRetryDelayStrategy<a href="#iretrydelaystrategy" class="hash-link" aria-label="Direct link to IRetryDelayStrategy" title="Direct link to IRetryDelayStrategy" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface IRetryDelayStrategy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ValueTask&lt;TimeSpan&gt; GetDelayAsync(int attemptNumber, CancellationToken cancellationToken = default);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Defines the contract for calculating retry delays. The <code>attemptNumber</code> is 0-based (0 = first retry).</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="backoffstrategy-delegate-type">BackoffStrategy (Delegate Type)<a href="#backoffstrategy-delegate-type" class="hash-link" aria-label="Direct link to BackoffStrategy (Delegate Type)" title="Direct link to BackoffStrategy (Delegate Type)" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public delegate TimeSpan BackoffStrategy(int attemptNumber);</span><br></span></code></pre></div></div>
<p>Represents a backoff strategy that calculates delay based on attempt number. This delegate type replaces the IBackoffStrategy interface with a simpler function-based approach.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="strategy-classes">Strategy Classes<a href="#strategy-classes" class="hash-link" aria-label="Direct link to Strategy Classes" title="Direct link to Strategy Classes" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="backoffstrategies-static-class">BackoffStrategies Static Class<a href="#backoffstrategies-static-class" class="hash-link" aria-label="Direct link to BackoffStrategies Static Class" title="Direct link to BackoffStrategies Static Class" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static class BackoffStrategies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static BackoffStrategy ExponentialBackoff(TimeSpan baseDelay, double multiplier = 2.0, TimeSpan? maxDelay = null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static BackoffStrategy LinearBackoff(TimeSpan baseDelay, TimeSpan? increment = null, TimeSpan? maxDelay = null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static BackoffStrategy FixedDelay(TimeSpan delay);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Provides factory methods for creating backoff strategy delegates.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="exponential-backoff-1">Exponential Backoff<a href="#exponential-backoff-1" class="hash-link" aria-label="Direct link to Exponential Backoff" title="Direct link to Exponential Backoff" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var exponentialBackoff = BackoffStrategies.ExponentialBackoff(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseDelay: TimeSpan.FromSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multiplier: 2.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxDelay: TimeSpan.FromMinutes(1));</span><br></span></code></pre></div></div>
<p>Formula: <code>delay = baseDelay × multiplier^attemptNumber</code> (capped at maxDelay)</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="linear-backoff-1">Linear Backoff<a href="#linear-backoff-1" class="hash-link" aria-label="Direct link to Linear Backoff" title="Direct link to Linear Backoff" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var linearBackoff = BackoffStrategies.LinearBackoff(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseDelay: TimeSpan.FromSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    increment: TimeSpan.FromSeconds(2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxDelay: TimeSpan.FromSeconds(30));</span><br></span></code></pre></div></div>
<p>Formula: <code>delay = baseDelay + (increment × attemptNumber)</code> (capped at maxDelay)</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="fixed-delay-1">Fixed Delay<a href="#fixed-delay-1" class="hash-link" aria-label="Direct link to Fixed Delay" title="Direct link to Fixed Delay" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var fixedBackoff = BackoffStrategies.FixedDelay(delay: TimeSpan.FromSeconds(5));</span><br></span></code></pre></div></div>
<p>Returns the same delay for all attempts.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="jitter-strategies">Jitter Strategies<a href="#jitter-strategies" class="hash-link" aria-label="Direct link to Jitter Strategies" title="Direct link to Jitter Strategies" translate="no">​</a></h4>
<p><strong>JitterStrategies.FullJitter():</strong> Returns a delegate that implements <code>random(0, baseDelay)</code>
<strong>JitterStrategies.EqualJitter():</strong> Returns a delegate that implements <code>baseDelay/2 + random(0, baseDelay/2)</code>
<strong>JitterStrategies.DecorrelatedJitter():</strong> Returns a delegate that implements <code>random(baseDelay, min(maxDelay, previousDelay × multiplier))</code>
<strong>JitterStrategies.NoJitter():</strong> Returns a delegate that returns baseDelay unchanged</p>
<p>These static methods on the <code>JitterStrategies</code> class provide convenient access to built-in jitter implementations as delegates, eliminating the need to instantiate strategy classes.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="compositeretrydelaystrategy">CompositeRetryDelayStrategy<a href="#compositeretrydelaystrategy" class="hash-link" aria-label="Direct link to CompositeRetryDelayStrategy" title="Direct link to CompositeRetryDelayStrategy" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class CompositeRetryDelayStrategy : IRetryDelayStrategy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CompositeRetryDelayStrategy(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BackoffStrategy backoffStrategy,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        JitterStrategy jitterStrategy);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Combines backoff and jitter strategies. Both strategies are now delegates rather than interface implementations.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="noopretrydelaystrategy">NoOpRetryDelayStrategy<a href="#noopretrydelaystrategy" class="hash-link" aria-label="Direct link to NoOpRetryDelayStrategy" title="Direct link to NoOpRetryDelayStrategy" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class NoOpRetryDelayStrategy : IRetryDelayStrategy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static NoOpRetryDelayStrategy Instance { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Singleton that always returns <code>TimeSpan.Zero</code> for immediate retries.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuration-classes">Configuration Classes<a href="#configuration-classes" class="hash-link" aria-label="Direct link to Configuration Classes" title="Direct link to Configuration Classes" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="exponentialbackoffconfiguration">ExponentialBackoffConfiguration<a href="#exponentialbackoffconfiguration" class="hash-link" aria-label="Direct link to ExponentialBackoffConfiguration" title="Direct link to ExponentialBackoffConfiguration" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class ExponentialBackoffConfiguration : BackoffStrategyConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ExponentialBackoffConfiguration(TimeSpan baseDelay, double multiplier, TimeSpan maxDelay);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public TimeSpan BaseDelay { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public double Multiplier { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public TimeSpan MaxDelay { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Constraints:</strong></p>
<ul>
<li class=""><code>baseDelay</code> &gt; TimeSpan.Zero</li>
<li class=""><code>multiplier</code> ≥ 1.0</li>
<li class=""><code>maxDelay</code> ≥ baseDelay</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="linearbackoffconfiguration">LinearBackoffConfiguration<a href="#linearbackoffconfiguration" class="hash-link" aria-label="Direct link to LinearBackoffConfiguration" title="Direct link to LinearBackoffConfiguration" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class LinearBackoffConfiguration : BackoffStrategyConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public LinearBackoffConfiguration(TimeSpan baseDelay, TimeSpan increment, TimeSpan maxDelay);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public TimeSpan BaseDelay { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public TimeSpan Increment { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public TimeSpan MaxDelay { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Constraints:</strong></p>
<ul>
<li class=""><code>baseDelay</code> &gt; TimeSpan.Zero</li>
<li class=""><code>increment</code> ≥ TimeSpan.Zero</li>
<li class=""><code>maxDelay</code> ≥ baseDelay</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="fixeddelayconfiguration">FixedDelayConfiguration<a href="#fixeddelayconfiguration" class="hash-link" aria-label="Direct link to FixedDelayConfiguration" title="Direct link to FixedDelayConfiguration" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class FixedDelayConfiguration : BackoffStrategyConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FixedDelayConfiguration(TimeSpan delay);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public TimeSpan Delay { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Constraints:</strong></p>
<ul>
<li class=""><code>delay</code> &gt; TimeSpan.Zero</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="jitter-configurations">Jitter Configurations<a href="#jitter-configurations" class="hash-link" aria-label="Direct link to Jitter Configurations" title="Direct link to Jitter Configurations" translate="no">​</a></h4>
<ul>
<li class=""><code>FullJitterConfiguration</code> - No parameters required</li>
<li class=""><code>EqualJitterConfiguration</code> - No parameters required</li>
<li class=""><code>DecorrelatedJitterConfiguration</code> - No parameters required</li>
<li class=""><code>NoJitterConfiguration</code> - No parameters required</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="retrydelaystrategyconfiguration">RetryDelayStrategyConfiguration<a href="#retrydelaystrategyconfiguration" class="hash-link" aria-label="Direct link to RetryDelayStrategyConfiguration" title="Direct link to RetryDelayStrategyConfiguration" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class RetryDelayStrategyConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public RetryDelayStrategyConfiguration(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BackoffStrategyConfiguration backoffConfiguration,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        JitterStrategyConfiguration jitterConfiguration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Combines backoff and jitter configurations.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="extension-methods">Extension Methods<a href="#extension-methods" class="hash-link" aria-label="Direct link to Extension Methods" title="Direct link to Extension Methods" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="pipelinecontextretrydelayextensions">PipelineContextRetryDelayExtensions<a href="#pipelinecontextretrydelayextensions" class="hash-link" aria-label="Direct link to PipelineContextRetryDelayExtensions" title="Direct link to PipelineContextRetryDelayExtensions" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static class PipelineContextRetryDelayExtensions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static IRetryDelayStrategy GetRetryDelayStrategy(this PipelineContext context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static Task&lt;TimeSpan&gt; GetRetryDelayAsync(this PipelineContext context, int attempt);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static PipelineContext UseExponentialBackoffDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeSpan baseDelay,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double multiplier = 2.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeSpan? maxDelay = null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static PipelineContext UseLinearBackoffDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeSpan baseDelay,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeSpan increment,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeSpan? maxDelay = null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static PipelineContext UseFixedDelay(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeSpan delay);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static PipelineContext UseExponentialBackoffWithJitter(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeSpan baseDelay,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double multiplier = 2.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeSpan? maxDelay = null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeSpan? jitterMax = null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="factory">Factory<a href="#factory" class="hash-link" aria-label="Direct link to Factory" title="Direct link to Factory" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="defaultretrydelaystrategyfactory">DefaultRetryDelayStrategyFactory<a href="#defaultretrydelaystrategyfactory" class="hash-link" aria-label="Direct link to DefaultRetryDelayStrategyFactory" title="Direct link to DefaultRetryDelayStrategyFactory" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class DefaultRetryDelayStrategyFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public IRetryDelayStrategy CreateStrategy(RetryDelayStrategyConfiguration configuration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public IRetryDelayStrategy CreateExponentialBackoff(ExponentialBackoffConfiguration config, JitterStrategy jitterStrategy = null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public IRetryDelayStrategy CreateLinearBackoff(LinearBackoffConfiguration config, JitterStrategy jitterStrategy = null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public IRetryDelayStrategy CreateFixedDelay(FixedDelayConfiguration config, JitterStrategy jitterStrategy = null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Creates retry delay strategies from configurations. The jitter strategy parameter is now a delegate rather than an interface implementation.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="validation">Validation<a href="#validation" class="hash-link" aria-label="Direct link to Validation" title="Direct link to Validation" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="retrydelaystrategyvalidator">RetryDelayStrategyValidator<a href="#retrydelaystrategyvalidator" class="hash-link" aria-label="Direct link to RetryDelayStrategyValidator" title="Direct link to RetryDelayStrategyValidator" translate="no">​</a></h4>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static class RetryDelayStrategyValidator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void ValidateExponentialBackoffConfiguration(ExponentialBackoffConfiguration configuration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void ValidateLinearBackoffConfiguration(LinearBackoffConfiguration configuration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void ValidateFixedDelayConfiguration(FixedDelayConfiguration configuration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static bool IsValidAttemptNumber(int attemptNumber);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static bool IsValidDelay(TimeSpan delay);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Validates retry delay strategy configurations.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="retry-strategies">Retry Strategies<a href="#retry-strategies" class="hash-link" aria-label="Direct link to Retry Strategies" title="Direct link to Retry Strategies" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="fixed-delay-retry">Fixed Delay Retry<a href="#fixed-delay-retry" class="hash-link" aria-label="Direct link to Fixed Delay Retry" title="Direct link to Fixed Delay Retry" translate="no">​</a></h3>
<p>The simplest retry strategy uses a fixed delay between attempts:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class FixedDelayRetryHandler : INodeErrorHandler&lt;ITransformNode&lt;string, string&gt;, string&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly TimeSpan _delay = TimeSpan.FromSeconds(2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly ILogger _logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FixedDelayRetryHandler(ILogger logger)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _logger = logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;NodeErrorDecision&gt; HandleAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ITransformNode&lt;string, string&gt; node,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string failedItem,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Exception error,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CancellationToken cancellationToken)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (IsTransientError(error))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _logger.LogInformation(&quot;Retrying in {Delay}ms for item: {Item}&quot;, _delay.TotalMilliseconds, failedItem);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await Task.Delay(_delay, cancellationToken);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return NodeErrorDecision.Retry;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return NodeErrorDecision.Skip;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static bool IsTransientError(Exception error)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return error is TimeoutException or HttpRequestException;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="exponential-backoff-with-jitter">Exponential Backoff with Jitter<a href="#exponential-backoff-with-jitter" class="hash-link" aria-label="Direct link to Exponential Backoff with Jitter" title="Direct link to Exponential Backoff with Jitter" translate="no">​</a></h3>
<p>Exponential backoff with jitter is a more sophisticated strategy that helps prevent thundering herd problems:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class ExponentialBackoffRetryHandler : INodeErrorHandler&lt;ITransformNode&lt;string, string&gt;, string&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly TimeSpan _baseDelay = TimeSpan.FromSeconds(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly TimeSpan _maxDelay = TimeSpan.FromMinutes(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly Random _jitter = new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly ILogger _logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ExponentialBackoffRetryHandler(ILogger logger)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _logger = logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;NodeErrorDecision&gt; HandleAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ITransformNode&lt;string, string&gt; node,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string failedItem,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Exception error,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CancellationToken cancellationToken)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (IsTransientError(error))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Get retry count from context (you would need to implement this)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var retryCount = GetRetryCount(context, failedItem);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Calculate exponential delay with jitter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var exponentialDelay = TimeSpan.FromSeconds(Math.Pow(2, retryCount));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var jitter = TimeSpan.FromMilliseconds(_jitter.Next(0, 1000));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var delay = TimeSpan.FromTicks(Math.Min(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                (_baseDelay + exponentialDelay + jitter).Ticks,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _maxDelay.Ticks));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _logger.LogInformation(&quot;Retrying in {Delay}ms (attempt {RetryCount}) for item: {Item}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                delay.TotalMilliseconds, retryCount + 1, failedItem);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await Task.Delay(delay, cancellationToken);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return NodeErrorDecision.Retry;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return NodeErrorDecision.Skip;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static bool IsTransientError(Exception error)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return error is TimeoutException or HttpRequestException;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int GetRetryCount(PipelineContext context, string item)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // In a real implementation, you would track retry count in the context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // This is a simplified example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="context-aware-retry">Context-Aware Retry<a href="#context-aware-retry" class="hash-link" aria-label="Direct link to Context-Aware Retry" title="Direct link to Context-Aware Retry" translate="no">​</a></h2>
<p>Sometimes you want to adjust retry behavior based on the context:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class ContextAwareRetryHandler : INodeErrorHandler&lt;ITransformNode&lt;string, string&gt;, string&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly ILogger _logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly Dictionary&lt;string, RetryPolicy&gt; _policies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ContextAwareRetryHandler(ILogger logger)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _logger = logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _policies = new Dictionary&lt;string, RetryPolicy&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [&quot;critical&quot;] = new RetryPolicy(maxRetries: 5, baseDelay: TimeSpan.FromSeconds(1)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [&quot;normal&quot;] = new RetryPolicy(maxRetries: 3, baseDelay: TimeSpan.FromSeconds(2)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [&quot;low&quot;] = new RetryPolicy(maxRetries: 1, baseDelay: TimeSpan.FromSeconds(5))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;NodeErrorDecision&gt; HandleAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ITransformNode&lt;string, string&gt; node,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string failedItem,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Exception error,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CancellationToken cancellationToken)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Determine priority from context or item</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var priority = GetPriority(context, failedItem);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var policy = _policies[priority];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (IsTransientError(error) &amp;&amp; policy.CanRetry)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _logger.LogInformation(&quot;Retrying with {Priority} policy (attempt {RetryCount}/{MaxRetries}) for item: {Item}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                priority, policy.CurrentRetry + 1, policy.MaxRetries, failedItem);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await Task.Delay(policy.GetDelay(), cancellationToken);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            policy.IncrementRetry();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return NodeErrorDecision.Retry;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return NodeErrorDecision.Skip;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static bool IsTransientError(Exception error)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return error is TimeoutException or HttpRequestException;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private string GetPriority(PipelineContext context, string item)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // In a real implementation, you would determine priority from context or item</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // This is a simplified example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return item.Contains(&quot;critical&quot;) ? &quot;critical&quot; :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               item.Contains(&quot;low&quot;) ? &quot;low&quot; : &quot;normal&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private class RetryPolicy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public int MaxRetries { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public TimeSpan BaseDelay { get; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public int CurrentRetry { get; private set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public bool CanRetry =&gt; CurrentRetry &lt; MaxRetries;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public RetryPolicy(int maxRetries, TimeSpan baseDelay)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxRetries = maxRetries;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            BaseDelay = baseDelay;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public TimeSpan GetDelay()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Simple exponential backoff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return TimeSpan.FromSeconds(Math.Pow(2, CurrentRetry) * BaseDelay.TotalSeconds);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void IncrementRetry()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            CurrentRetry++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices" translate="no">​</a></h2>
<ol>
<li class="">
<p><strong>Differentiate between transient and permanent errors</strong>: Only retry transient errors that might resolve themselves.</p>
</li>
<li class="">
<p><strong>Implement appropriate delays</strong>: Use delays between retries to give the system time to recover.</p>
</li>
<li class="">
<p><strong>Set reasonable retry limits</strong>: Prevent infinite loops by setting maximum retry counts.</p>
</li>
<li class="">
<p><strong>Use jitter in distributed systems</strong>: Add randomness to retry delays to prevent thundering herd problems.</p>
</li>
<li class="">
<p><strong>Monitor retry patterns</strong>: Track retry metrics to identify systemic issues.</p>
</li>
<li class="">
<p><strong>Consider resource constraints</strong>: Be mindful of the resources consumed by retries, especially in high-volume scenarios.</p>
</li>
<li class="">
<p><strong>Implement circuit breakers</strong>: Combine retries with circuit breakers to prevent cascading failures.</p>
</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="production-example">Production Example<a href="#production-example" class="hash-link" aria-label="Direct link to Production Example" title="Direct link to Production Example" translate="no">​</a></h2>
<p>Here&#x27;s a comprehensive example that combines multiple retry strategies:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.ErrorHandling;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using NPipeline.Pipeline;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ProductionRetryHandler : INodeErrorHandler&lt;ITransformNode&lt;string, string&gt;, string&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly ILogger _logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly IMetrics _metrics;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly Dictionary&lt;string, RetryState&gt; _retryStates = new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly TimeSpan _baseDelay = TimeSpan.FromSeconds(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly TimeSpan _maxDelay = TimeSpan.FromMinutes(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly Random _jitter = new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private class RetryState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public int RetryCount { get; set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public DateTime FirstFailureTime { get; set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ProductionRetryHandler(ILogger logger, IMetrics metrics)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _logger = logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _metrics = metrics;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;NodeErrorDecision&gt; HandleAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ITransformNode&lt;string, string&gt; node,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string failedItem,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Exception error,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PipelineContext context,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CancellationToken cancellationToken)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var itemKey = $&quot;{node.Id}:{failedItem}&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (!_retryStates.TryGetValue(itemKey, out var retryState))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            retryState = new RetryState { FirstFailureTime = DateTime.UtcNow };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _retryStates[itemKey] = retryState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Record metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _metrics.Increment(&quot;item_retries&quot;, new[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new KeyValuePair&lt;string, object&gt;(&quot;node_id&quot;, node.Id),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new KeyValuePair&lt;string, object&gt;(&quot;error_type&quot;, error.GetType().Name),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new KeyValuePair&lt;string, object&gt;(&quot;retry_count&quot;, retryState.RetryCount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (IsTransientError(error))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Check if we&#x27;ve exceeded the maximum retry count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (retryState.RetryCount &gt;= 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _logger.LogWarning(&quot;Maximum retries exceeded for item {Item} in node {NodeId}&quot;, failedItem, node.Id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _retryStates.Remove(itemKey);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return NodeErrorDecision.DeadLetter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Calculate delay with exponential backoff and jitter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var exponentialDelay = TimeSpan.FromSeconds(Math.Pow(2, retryState.RetryCount));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var jitter = TimeSpan.FromMilliseconds(_jitter.Next(0, 1000));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var delay = TimeSpan.FromTicks(Math.Min(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                (_baseDelay + exponentialDelay + jitter).Ticks,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _maxDelay.Ticks));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _logger.LogInformation(&quot;Retrying item {Item} in node {NodeId} (attempt {RetryCount}/{MaxRetries}) after {Delay}ms&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                failedItem, node.Id, retryState.RetryCount + 1, 3, delay.TotalMilliseconds);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            retryState.RetryCount++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await Task.Delay(delay, cancellationToken);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return NodeErrorDecision.Retry;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // For non-transient errors, don&#x27;t retry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _logger.LogWarning(&quot;Non-transient error for item {Item} in node {NodeId}: {ErrorType}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            failedItem, node.Id, error.GetType().Name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _retryStates.Remove(itemKey);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return NodeErrorDecision.Skip;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static bool IsTransientError(Exception error)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return error is TimeoutException or HttpRequestException or OperationCanceledException;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<blockquote>
<p>⚠️<!-- --> Materialization Requirements
When configuring retries with <code>MaxMaterializedItems</code>, it&#x27;s important to understand how buffering enables replay functionality. Materialization is critical because it creates a snapshot of input items that can be replayed if a node fails and needs to restart, preventing data loss and ensuring processing continuity. See <a class="" href="/docs/core-concepts/resilience/materialization">Materialization and Buffering</a> in the resilience section for detailed guidance.</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="troubleshooting-retry-strategies">Troubleshooting Retry Strategies<a href="#troubleshooting-retry-strategies" class="hash-link" aria-label="Direct link to Troubleshooting Retry Strategies" title="Direct link to Troubleshooting Retry Strategies" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-issues-and-solutions">Common Issues and Solutions<a href="#common-issues-and-solutions" class="hash-link" aria-label="Direct link to Common Issues and Solutions" title="Direct link to Common Issues and Solutions" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="too-many-retries">Too Many Retries<a href="#too-many-retries" class="hash-link" aria-label="Direct link to Too Many Retries" title="Direct link to Too Many Retries" translate="no">​</a></h4>
<ul>
<li class=""><strong>Symptoms:</strong> High retry counts, long processing times</li>
<li class=""><strong>Solutions:</strong>
<ul>
<li class="">Increase base delay or multiplier to back off more aggressively</li>
<li class="">Lower maximum retry count</li>
<li class="">Add circuit breaker to fail fast</li>
<li class="">Check for systemic issues beyond transient failures</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="too-few-retries">Too Few Retries<a href="#too-few-retries" class="hash-link" aria-label="Direct link to Too Few Retries" title="Direct link to Too Few Retries" translate="no">​</a></h4>
<ul>
<li class=""><strong>Symptoms:</strong> Premature failures, low success rate</li>
<li class=""><strong>Solutions:</strong>
<ul>
<li class="">Decrease base delay or multiplier for faster retry attempts</li>
<li class="">Increase maximum retry count</li>
<li class="">Verify error classification (distinguish transient vs permanent failures)</li>
<li class="">Check timeout configurations</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="thundering-herd-problem">Thundering Herd Problem<a href="#thundering-herd-problem" class="hash-link" aria-label="Direct link to Thundering Herd Problem" title="Direct link to Thundering Herd Problem" translate="no">​</a></h4>
<ul>
<li class=""><strong>Symptoms:</strong> Synchronized retry spikes, sudden service overload</li>
<li class=""><strong>Solutions:</strong>
<ul>
<li class="">Add or increase jitter (full jitter is most effective)</li>
<li class="">Use decorrelated jitter for adaptive behavior</li>
<li class="">Reduce concurrent retry attempts</li>
<li class="">Implement rate limiting</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="long-recovery-times">Long Recovery Times<a href="#long-recovery-times" class="hash-link" aria-label="Direct link to Long Recovery Times" title="Direct link to Long Recovery Times" translate="no">​</a></h4>
<ul>
<li class=""><strong>Symptoms:</strong> Slow recovery after service restoration</li>
<li class=""><strong>Solutions:</strong>
<ul>
<li class="">Decrease maximum delay cap</li>
<li class="">Use linear backoff instead of exponential for more predictable delays</li>
<li class="">Lower base delay for faster initial retries</li>
<li class="">Implement circuit breaker reset mechanisms</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="debugging-retry-patterns">Debugging Retry Patterns<a href="#debugging-retry-patterns" class="hash-link" aria-label="Direct link to Debugging Retry Patterns" title="Direct link to Debugging Retry Patterns" translate="no">​</a></h3>
<p>Monitor retry behavior using PipelineContext:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class RetryAnalyzer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task AnalyzeRetryPatternAsync(PipelineContext context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var strategy = context.GetRetryDelayStrategy();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var delays = new List&lt;TimeSpan&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Simulate retry delays for analysis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int attempt = 0; attempt &lt; 5; attempt++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var delay = await strategy.GetDelayAsync(attempt);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            delays.Add(delay);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Console.WriteLine($&quot;Attempt {attempt}: {delay.TotalMilliseconds:F2}ms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Average delay: {delays.Average(d =&gt; d.TotalMilliseconds):F2}ms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Max delay: {delays.Max(d =&gt; d.TotalMilliseconds):F2}ms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-profiling">Performance Profiling<a href="#performance-profiling" class="hash-link" aria-label="Direct link to Performance Profiling" title="Direct link to Performance Profiling" translate="no">​</a></h3>
<p>Profile strategy performance:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class RetryStrategyProfiler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task ProfileStrategyAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IRetryDelayStrategy strategy, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int attempts = 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var stopwatch = Stopwatch.StartNew();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var delays = new List&lt;TimeSpan&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; attempts; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var delay = await strategy.GetDelayAsync(i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            delays.Add(delay);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stopwatch.Stop();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Strategy: {strategy.GetType().Name}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Total time: {stopwatch.ElapsedMilliseconds}ms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Average delay: {delays.Average(d =&gt; d.TotalMilliseconds):F2}ms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Min delay: {delays.Min(d =&gt; d.TotalMilliseconds):F2}ms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Max delay: {delays.Max(d =&gt; d.TotalMilliseconds):F2}ms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="implementation-guidelines">Implementation Guidelines<a href="#implementation-guidelines" class="hash-link" aria-label="Direct link to Implementation Guidelines" title="Direct link to Implementation Guidelines" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="integration-checklist">Integration Checklist<a href="#integration-checklist" class="hash-link" aria-label="Direct link to Integration Checklist" title="Direct link to Integration Checklist" translate="no">​</a></h3>
<ol>
<li class=""><strong>Assess current retry behavior</strong> - Understand existing patterns and limitations</li>
<li class=""><strong>Choose appropriate strategy</strong> - Based on your service type and use case</li>
<li class=""><strong>Test with new configuration</strong> - Validate retry behavior in test environments</li>
<li class=""><strong>Monitor in production</strong> - Observe actual retry patterns and success rates</li>
<li class=""><strong>Fine-tune parameters</strong> - Optimize base delay, multiplier/increment, and max delay based on metrics</li>
<li class=""><strong>Document decisions</strong> - Record why specific strategies were chosen for future reference</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="parameter-selection-guidelines">Parameter Selection Guidelines<a href="#parameter-selection-guidelines" class="hash-link" aria-label="Direct link to Parameter Selection Guidelines" title="Direct link to Parameter Selection Guidelines" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="base-delay">Base Delay<a href="#base-delay" class="hash-link" aria-label="Direct link to Base Delay" title="Direct link to Base Delay" translate="no">​</a></h4>
<ul>
<li class=""><strong>Too short:</strong> Can overwhelm the failing service, defeating the purpose of backoff</li>
<li class=""><strong>Too long:</strong> Unnecessary delays during normal recovery</li>
<li class=""><strong>Guidance:</strong> Start with 10-50% of expected operation time, then adjust based on observation</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="backoff-multiplierincrement">Backoff Multiplier/Increment<a href="#backoff-multiplierincrement" class="hash-link" aria-label="Direct link to Backoff Multiplier/Increment" title="Direct link to Backoff Multiplier/Increment" translate="no">​</a></h4>
<ul>
<li class=""><strong>Exponential multiplier:</strong> 1.5-3.0 (2.0 is a common default)</li>
<li class=""><strong>Linear increment:</strong> 50-200% of base delay</li>
<li class=""><strong>Consider:</strong> Service recovery patterns and whether you want aggressive or conservative backoff</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="maximum-delay">Maximum Delay<a href="#maximum-delay" class="hash-link" aria-label="Direct link to Maximum Delay" title="Direct link to Maximum Delay" translate="no">​</a></h4>
<ul>
<li class=""><strong>Web APIs:</strong> 30 seconds to 5 minutes (services usually recover quickly)</li>
<li class=""><strong>Databases:</strong> 5-30 seconds (recovery time depends on lock contention and query queues)</li>
<li class=""><strong>File operations:</strong> 1-10 seconds (filesystem recovery is usually immediate)</li>
<li class=""><strong>Message queues:</strong> 10-60 seconds (depends on queue depth and processing rate)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="monitoring-key-metrics">Monitoring Key Metrics<a href="#monitoring-key-metrics" class="hash-link" aria-label="Direct link to Monitoring Key Metrics" title="Direct link to Monitoring Key Metrics" translate="no">​</a></h3>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class RetryMetricsCollector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void CollectMetrics(PipelineContext context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var metrics = new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TotalAttempts = context.Metrics.GetCounter(&quot;total_attempts&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SuccessfulRetries = context.Metrics.GetCounter(&quot;successful_retries&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            FailedRetries = context.Metrics.GetCounter(&quot;failed_retries&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            AverageRetryDelay = context.Metrics.GetGauge(&quot;average_retry_delay_ms&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MaxRetryDelayReached = context.Metrics.GetCounter(&quot;max_retry_delay_reached&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var successRate = (double)metrics.SuccessfulRetries / metrics.TotalAttempts;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Retry success rate: {successRate:P}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Average retry delay: {metrics.AverageRetryDelay:F2}ms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="see-also">See Also<a href="#see-also" class="hash-link" aria-label="Direct link to See Also" title="Direct link to See Also" translate="no">​</a></h2>
<ul>
<li class=""><strong><a class="" href="/docs/core-concepts/resilience/">Resilience Overview</a></strong>: Comprehensive guide to building fault-tolerant pipelines</li>
<li class=""><strong><a class="" href="/docs/core-concepts/resilience/materialization">Materialization and Buffering</a></strong>: Understanding buffer requirements for resilience</li>
<li class=""><strong><a class="" href="/docs/core-concepts/resilience/error-handling">Error Handling Guide</a></strong>: Comprehensive error handling patterns and practical implementation guidance</li>
<li class=""><strong><a class="" href="/docs/core-concepts/resilience/troubleshooting">Troubleshooting</a></strong>: Diagnose and resolve common resilience issues</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="related-topics">Related Topics<a href="#related-topics" class="hash-link" aria-label="Direct link to Related Topics" title="Direct link to Related Topics" translate="no">​</a></h2>
<ul>
<li class=""><strong><a class="" href="/docs/core-concepts/resilience/error-handling">Node-level Error Handling</a></strong>: Learn about handling errors for individual items.</li>
<li class=""><strong><a class="" href="/docs/core-concepts/resilience/error-handling">Pipeline-level Error Handling</a></strong>: Learn about handling errors that affect entire node streams.</li>
<li class=""><strong><a class="" href="/docs/core-concepts/resilience/circuit-breakers">Circuit Breakers</a></strong>: Configure circuit breaker patterns.</li>
<li class=""><strong><a class="" href="/docs/core-concepts/resilience/dead-letter-queues">Dead-Letter Queues</a></strong>: Implement dead-letter queues for problematic items.</li>
<li class=""><strong><a class="" href="/docs/core-concepts/resilience/error-handling">Error Handling Overview</a></strong>: Return to the error handling overview.</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/core-concepts/resilience/troubleshooting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Troubleshooting</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/core-concepts/resilience/retry-delay-advanced"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Advanced Retry Delay Strategies</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#pipelineretryoptions" class="table-of-contents__link toc-highlight">PipelineRetryOptions</a></li><li><a href="#basic-retry-configuration" class="table-of-contents__link toc-highlight">Basic Retry Configuration</a><ul><li><a href="#global-retry-options" class="table-of-contents__link toc-highlight">Global Retry Options</a></li><li><a href="#per-node-retry-options" class="table-of-contents__link toc-highlight">Per-Node Retry Options</a></li></ul></li><li><a href="#retry-delay-strategies" class="table-of-contents__link toc-highlight">Retry Delay Strategies</a><ul><li><a href="#why-backoff-and-jitter-matter" class="table-of-contents__link toc-highlight">Why Backoff and Jitter Matter</a></li><li><a href="#available-backoff-strategies" class="table-of-contents__link toc-highlight">Available Backoff Strategies</a></li><li><a href="#available-jitter-strategies" class="table-of-contents__link toc-highlight">Available Jitter Strategies</a></li><li><a href="#recommended-strategy-combinations" class="table-of-contents__link toc-highlight">Recommended Strategy Combinations</a></li><li><a href="#configuration-at-initialization" class="table-of-contents__link toc-highlight">Configuration at Initialization</a></li><li><a href="#runtime-configuration" class="table-of-contents__link toc-highlight">Runtime Configuration</a></li></ul></li><li><a href="#retry-delay-api-reference" class="table-of-contents__link toc-highlight">Retry Delay API Reference</a><ul><li><a href="#core-interfaces" class="table-of-contents__link toc-highlight">Core Interfaces</a></li><li><a href="#strategy-classes" class="table-of-contents__link toc-highlight">Strategy Classes</a></li><li><a href="#configuration-classes" class="table-of-contents__link toc-highlight">Configuration Classes</a></li><li><a href="#extension-methods" class="table-of-contents__link toc-highlight">Extension Methods</a></li><li><a href="#factory" class="table-of-contents__link toc-highlight">Factory</a></li><li><a href="#validation" class="table-of-contents__link toc-highlight">Validation</a></li></ul></li><li><a href="#retry-strategies" class="table-of-contents__link toc-highlight">Retry Strategies</a><ul><li><a href="#fixed-delay-retry" class="table-of-contents__link toc-highlight">Fixed Delay Retry</a></li><li><a href="#exponential-backoff-with-jitter" class="table-of-contents__link toc-highlight">Exponential Backoff with Jitter</a></li></ul></li><li><a href="#context-aware-retry" class="table-of-contents__link toc-highlight">Context-Aware Retry</a></li><li><a href="#best-practices" class="table-of-contents__link toc-highlight">Best Practices</a></li><li><a href="#production-example" class="table-of-contents__link toc-highlight">Production Example</a></li><li><a href="#troubleshooting-retry-strategies" class="table-of-contents__link toc-highlight">Troubleshooting Retry Strategies</a><ul><li><a href="#common-issues-and-solutions" class="table-of-contents__link toc-highlight">Common Issues and Solutions</a></li><li><a href="#debugging-retry-patterns" class="table-of-contents__link toc-highlight">Debugging Retry Patterns</a></li><li><a href="#performance-profiling" class="table-of-contents__link toc-highlight">Performance Profiling</a></li></ul></li><li><a href="#implementation-guidelines" class="table-of-contents__link toc-highlight">Implementation Guidelines</a><ul><li><a href="#integration-checklist" class="table-of-contents__link toc-highlight">Integration Checklist</a></li><li><a href="#parameter-selection-guidelines" class="table-of-contents__link toc-highlight">Parameter Selection Guidelines</a></li><li><a href="#monitoring-key-metrics" class="table-of-contents__link toc-highlight">Monitoring Key Metrics</a></li></ul></li><li><a href="#see-also" class="table-of-contents__link toc-highlight">See Also</a></li><li><a href="#related-topics" class="table-of-contents__link toc-highlight">Related Topics</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/why-npipeline">Why NPipeline?</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/quick-start">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/core-concepts">Core Concepts</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/npipeline/npipeline" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">&nbsp;</div></div></div></footer></div>
</body>
</html>