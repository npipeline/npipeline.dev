"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[2108],{6882:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>x,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"tooling/analyzers/code-fixes","title":"Code Fix Providers","description":"Automated code fixes for common analyzer issues in NPipeline.","source":"@site/docs/tooling/analyzers/code-fixes.md","sourceDirName":"tooling/analyzers","slug":"/tooling/analyzers/code-fixes","permalink":"/docs/tooling/analyzers/code-fixes","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Code Fix Providers","description":"Automated code fixes for common analyzer issues in NPipeline.","sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"Configuration Analyzers","permalink":"/docs/tooling/analyzers/configuration"},"next":{"title":"NPipeline Analyzer Code Mapping Document","permalink":"/docs/tooling/analyzers/code-mapping"}}');var t=i(4848),s=i(8453);const o={title:"Code Fix Providers",description:"Automated code fixes for common analyzer issues in NPipeline.",sidebar_position:6},a=void 0,c={},l=[{value:"Code Fix Providers",id:"code-fix-providers",level:2},{value:"Overview",id:"overview",level:3},{value:"Available Code Fixes",id:"available-code-fixes",level:3},{value:"NP9501: Unbounded Materialization Configuration",id:"np9501-unbounded-materialization-configuration",level:4},{value:"Before Fix",id:"before-fix",level:5},{value:"After Fix",id:"after-fix",level:5},{value:"Fix Options",id:"fix-options",level:5},{value:"NP9502: Inappropriate Parallelism Configuration",id:"np9502-inappropriate-parallelism-configuration",level:4},{value:"Before Fix",id:"before-fix-1",level:5},{value:"After Fix",id:"after-fix-1",level:5},{value:"Fix Options",id:"fix-options-1",level:5},{value:"NP9503: Batching Configuration Mismatch",id:"np9503-batching-configuration-mismatch",level:4},{value:"Before Fix",id:"before-fix-2",level:5},{value:"After Fix",id:"after-fix-2",level:5},{value:"Fix Strategies",id:"fix-strategies",level:5},{value:"NP9504: Timeout Configuration Issues",id:"np9504-timeout-configuration-issues",level:4},{value:"Before Fix",id:"before-fix-3",level:5},{value:"After Fix",id:"after-fix-3",level:5},{value:"Timeout Recommendations",id:"timeout-recommendations",level:5},{value:"NP9505: Missing Parameterless Constructor",id:"np9505-missing-parameterless-constructor",level:4},{value:"Before Fix",id:"before-fix-4",level:5},{value:"After Fix",id:"after-fix-4",level:5},{value:"Performance Impact",id:"performance-impact",level:5},{value:"Constructor Strategies",id:"constructor-strategies",level:5},{value:"Best Practices",id:"best-practices",level:5},{value:"Related Configuration",id:"related-configuration",level:5},{value:"NP9101: Blocking Operations in Async Methods",id:"np9101-blocking-operations-in-async-methods",level:4},{value:"Before Fix",id:"before-fix-5",level:5},{value:"After Fix",id:"after-fix-5",level:5},{value:"NP9102: Swallowed OperationCanceledException",id:"np9102-swallowed-operationcanceledexception",level:4},{value:"Before Fix",id:"before-fix-6",level:5},{value:"After Fix",id:"after-fix-6",level:5},{value:"NP9103: Synchronous over Async Patterns",id:"np9103-synchronous-over-async-patterns",level:4},{value:"Before Fix",id:"before-fix-7",level:5},{value:"After Fix",id:"after-fix-7",level:5},{value:"NP9104: Cancellation Token Not Respected",id:"np9104-cancellation-token-not-respected",level:4},{value:"Before Fix",id:"before-fix-8",level:5},{value:"After Fix",id:"after-fix-8",level:5},{value:"NP9201: LINQ Operations in Hot Paths",id:"np9201-linq-operations-in-hot-paths",level:4},{value:"Before Fix",id:"before-fix-9",level:5},{value:"After Fix",id:"after-fix-9",level:5},{value:"NP9202: Inefficient String Operations",id:"np9202-inefficient-string-operations",level:4},{value:"Before Fix",id:"before-fix-10",level:5},{value:"After Fix",id:"after-fix-10",level:5},{value:"NP9203: Anonymous Object Allocation",id:"np9203-anonymous-object-allocation",level:4},{value:"Before Fix",id:"before-fix-11",level:5},{value:"After Fix",id:"after-fix-11",level:5},{value:"NP9204: Missing ValueTask Optimization",id:"np9204-missing-valuetask-optimization",level:4},{value:"Before Fix",id:"before-fix-12",level:5},{value:"After Fix",id:"after-fix-12",level:5},{value:"NP9205: Non-Streaming Patterns in SourceNode",id:"np9205-non-streaming-patterns-in-sourcenode",level:4},{value:"Before Fix",id:"before-fix-13",level:5},{value:"After Fix",id:"after-fix-13",level:5},{value:"NP9301: Inefficient Exception Handling",id:"np9301-inefficient-exception-handling",level:4},{value:"Before Fix",id:"before-fix-14",level:5},{value:"After Fix",id:"after-fix-14",level:5},{value:"NP9302: SinkNode Input Not Consumed",id:"np9302-sinknode-input-not-consumed",level:4},{value:"Before Fix",id:"before-fix-15",level:5},{value:"After Fix",id:"after-fix-15",level:5},{value:"NP9303: Unsafe PipelineContext Access",id:"np9303-unsafe-pipelinecontext-access",level:4},{value:"Before Fix",id:"before-fix-16",level:5},{value:"After Fix",id:"after-fix-16",level:5},{value:"NP9401: Direct Dependency Instantiation",id:"np9401-direct-dependency-instantiation",level:4},{value:"Before Fix",id:"before-fix-17",level:5},{value:"After Fix",id:"after-fix-17",level:5},{value:"NP9001: Incomplete Resilience Configuration",id:"np9001-incomplete-resilience-configuration",level:4},{value:"Before Fix",id:"before-fix-18",level:5},{value:"After Fix",id:"after-fix-18",level:5},{value:"Using Code Fixes",id:"using-code-fixes",level:3},{value:"In Visual Studio",id:"in-visual-studio",level:4},{value:"In VS Code",id:"in-vs-code",level:4},{value:"In Rider",id:"in-rider",level:4},{value:"Code Fix Best Practices",id:"code-fix-best-practices",level:3},{value:"Review Before Applying",id:"review-before-applying",level:4},{value:"Customizing Fixes",id:"customizing-fixes",level:4},{value:"Combining Fixes",id:"combining-fixes",level:4},{value:"Limitations",id:"limitations",level:3},{value:"Extending Code Fixes",id:"extending-code-fixes",level:3},{value:"Troubleshooting Code Fixes",id:"troubleshooting-code-fixes",level:3},{value:"Fix Not Available",id:"fix-not-available",level:4},{value:"Fix Produces Errors",id:"fix-produces-errors",level:4},{value:"Contributing",id:"contributing",level:3},{value:"Configuration",id:"configuration",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"code-fix-providers",children:"Code Fix Providers"}),"\n",(0,t.jsx)(n.p,{children:"NPipeline analyzers include automated code fix providers that can automatically resolve many common issues detected by the analyzers. These code fixes appear as light bulb suggestions in Visual Studio and can be applied with a single click."}),"\n",(0,t.jsx)(n.h3,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Code fix providers help developers quickly resolve analyzer warnings by:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Automatically generating correct code patterns"})," - No need to remember exact syntax"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Applying framework best practices"})," - Fixes follow NPipeline conventions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Reducing cognitive load"})," - Focus on business logic instead of boilerplate"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Preventing copy-paste errors"})," - Consistent, correct implementations"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"available-code-fixes",children:"Available Code Fixes"}),"\n",(0,t.jsx)(n.h4,{id:"np9501-unbounded-materialization-configuration",children:"NP9501: Unbounded Materialization Configuration"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"UnboundedMaterializationConfigurationCodeFixProvider"})]}),"\n",(0,t.jsxs)(n.p,{children:["This code fix automatically adds appropriate ",(0,t.jsx)(n.code,{children:"MaxMaterializedItems"})," values to ",(0,t.jsx)(n.code,{children:"PipelineRetryOptions"})," constructors."]}),"\n",(0,t.jsx)(n.h5,{id:"before-fix",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: Missing MaxMaterializedItems parameter\nvar retryOptions = new PipelineRetryOptions(\n    maxRetryCount: 3,\n    baseDelay: TimeSpan.FromSeconds(1),\n    maxDelay: TimeSpan.FromMinutes(1));\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: Fixed with reasonable default\nvar retryOptions = new PipelineRetryOptions(\n    maxRetryCount: 3,\n    baseDelay: TimeSpan.FromSeconds(1),\n    maxDelay: TimeSpan.FromMinutes(1),\n    maxMaterializedItems: 1000);\n"})}),"\n",(0,t.jsx)(n.h5,{id:"fix-options",children:"Fix Options"}),"\n",(0,t.jsx)(n.p,{children:"The code fix provider offers several options based on context:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Option"}),(0,t.jsx)(n.th,{children:"Value"}),(0,t.jsx)(n.th,{children:"Use Case"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Conservative"}),(0,t.jsx)(n.td,{children:"100"}),(0,t.jsx)(n.td,{children:"Memory-constrained environments"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Balanced"}),(0,t.jsx)(n.td,{children:"1000"}),(0,t.jsx)(n.td,{children:"General purpose scenarios"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"High Throughput"}),(0,t.jsx)(n.td,{children:"10000"}),(0,t.jsx)(n.td,{children:"High-performance scenarios"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Custom"}),(0,t.jsx)(n.td,{children:"Prompts for value"}),(0,t.jsx)(n.td,{children:"Specific requirements"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"np9502-inappropriate-parallelism-configuration",children:"NP9502: Inappropriate Parallelism Configuration"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"InappropriateParallelismConfigurationCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix suggests appropriate parallelism values based on workload type and system characteristics."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-1",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :x: Excessive parallelism for CPU-bound work\nbuilder.AddTransform<CpuTransform, Input, Output>("transform")\n    .WithParallelism(Environment.ProcessorCount * 4);\n'})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-1",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :heavy_check_mark: Fixed with appropriate parallelism\nbuilder.AddTransform<CpuTransform, Input, Output>("transform")\n    .WithParallelism(Environment.ProcessorCount);\n'})}),"\n",(0,t.jsx)(n.h5,{id:"fix-options-1",children:"Fix Options"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Workload Type"}),(0,t.jsx)(n.th,{children:"Suggested Parallelism"}),(0,t.jsx)(n.th,{children:"Rationale"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CPU-bound"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Environment.ProcessorCount"})}),(0,t.jsx)(n.td,{children:"Matches available cores"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"I/O-bound"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Environment.ProcessorCount * 2"})}),(0,t.jsx)(n.td,{children:"I/O can handle more concurrency"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Mixed"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Environment.ProcessorCount * 1.5"})}),(0,t.jsx)(n.td,{children:"Balanced approach"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Memory-intensive"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Environment.ProcessorCount / 2"})}),(0,t.jsx)(n.td,{children:"Conservative resource usage"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"np9503-batching-configuration-mismatch",children:"NP9503: Batching Configuration Mismatch"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"BatchingConfigurationMismatchCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix aligns batch sizes with appropriate timeout values based on processing characteristics."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-2",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: Large batch with short timeout\nvar batchingOptions = new BatchingOptions(\n    batchSize: 1000,\n    timeout: TimeSpan.FromMilliseconds(100));\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-2",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: Fixed with proportional timeout\nvar batchingOptions = new BatchingOptions(\n    batchSize: 1000,\n    timeout: TimeSpan.FromSeconds(5));\n"})}),"\n",(0,t.jsx)(n.h5,{id:"fix-strategies",children:"Fix Strategies"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Batch Size"}),(0,t.jsx)(n.th,{children:"Recommended Timeout"}),(0,t.jsx)(n.th,{children:"Calculation Method"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"1-10"}),(0,t.jsx)(n.td,{children:"50-500ms"}),(0,t.jsx)(n.td,{children:"50ms per item"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"10-100"}),(0,t.jsx)(n.td,{children:"500ms-2s"}),(0,t.jsx)(n.td,{children:"20ms per item"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"100-1000"}),(0,t.jsx)(n.td,{children:"1-10s"}),(0,t.jsx)(n.td,{children:"10ms per item"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"1000+"}),(0,t.jsx)(n.td,{children:"5-30s"}),(0,t.jsx)(n.td,{children:"5ms per item"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"np9504-timeout-configuration-issues",children:"NP9504: Timeout Configuration Issues"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"TimeoutConfigurationCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix suggests appropriate timeout values based on operation type and characteristics."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-3",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :x: Zero timeout for I/O operations\nbuilder.AddTransform<DatabaseTransform, Input, Output>("transform")\n    .WithTimeout(TimeSpan.Zero);\n'})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-3",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :heavy_check_mark: Fixed with appropriate timeout\nbuilder.AddTransform<DatabaseTransform, Input, Output>("transform")\n    .WithTimeout(TimeSpan.FromSeconds(30));\n'})}),"\n",(0,t.jsx)(n.h5,{id:"timeout-recommendations",children:"Timeout Recommendations"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Operation Type"}),(0,t.jsx)(n.th,{children:"Suggested Timeout"}),(0,t.jsx)(n.th,{children:"Maximum"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Database I/O"}),(0,t.jsx)(n.td,{children:"30 seconds"}),(0,t.jsx)(n.td,{children:"5 minutes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Network I/O"}),(0,t.jsx)(n.td,{children:"10 seconds"}),(0,t.jsx)(n.td,{children:"2 minutes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"File I/O"}),(0,t.jsx)(n.td,{children:"60 seconds"}),(0,t.jsx)(n.td,{children:"10 minutes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CPU-bound"}),(0,t.jsx)(n.td,{children:"2 minutes"}),(0,t.jsx)(n.td,{children:"30 minutes"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"np9505-missing-parameterless-constructor",children:"NP9505: Missing Parameterless Constructor"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"NodeParameterlessConstructorCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix adds parameterless constructors to node classes to enable optimized instantiation using compiled expression delegates. The optimized factory pattern achieves 3-5x performance improvement (50-100\u03bcs vs 200-300\u03bcs) compared to reflection-based instantiation."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-4",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: PROBLEM: No parameterless constructor - uses slow Activator.CreateInstance\npublic class DataTransform : ITransformNode<Input, Output>\n{\n    private readonly ILogger<DataTransform> _logger;\n    private readonly IConfiguration _config;\n\n    // Only parameterized constructor\n    public DataTransform(ILogger<DataTransform> logger, IConfiguration config)\n    {\n        _logger = logger;\n        _config = config;\n    }\n\n    protected override async Task<Output> ExecuteAsync(\n        Input input,\n        PipelineContext context,\n        CancellationToken cancellationToken)\n    {\n        // Process data\n        return new Output();\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-4",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: Added parameterless constructor for optimized instantiation\npublic class DataTransform : ITransformNode<Input, Output>\n{\n    private readonly ILogger<DataTransform> _logger;\n    private readonly IConfiguration _config;\n\n    /// <summary>\n    /// Parameterless constructor for optimized factory instantiation.\n    /// </summary>\n    public DataTransform()\n    {\n        _logger = null!;\n        _config = null!;\n    }\n\n    // Original parameterized constructor\n    public DataTransform(ILogger<DataTransform> logger, IConfiguration config)\n    {\n        _logger = logger;\n        _config = config;\n    }\n\n    protected override async Task<Output> ExecuteAsync(\n        Input input,\n        PipelineContext context,\n        CancellationToken cancellationToken)\n    {\n        // Process data\n        return new Output();\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"performance-impact",children:"Performance Impact"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Scenario"}),(0,t.jsx)(n.th,{children:"Reflection (Activator)"}),(0,t.jsx)(n.th,{children:"Compiled Expression"}),(0,t.jsx)(n.th,{children:"Speedup"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"First instantiation"}),(0,t.jsx)(n.td,{children:"200-300\u03bcs"}),(0,t.jsx)(n.td,{children:"50-100\u03bcs"}),(0,t.jsx)(n.td,{children:"2-6x faster"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Cached instantiation"}),(0,t.jsx)(n.td,{children:"180-250\u03bcs"}),(0,t.jsx)(n.td,{children:"50-100\u03bcs"}),(0,t.jsx)(n.td,{children:"3-5x faster"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Cold startup (100 nodes)"}),(0,t.jsx)(n.td,{children:"~25ms"}),(0,t.jsx)(n.td,{children:"~5-10ms"}),(0,t.jsx)(n.td,{children:"2.5-5x faster"})]})]})]}),"\n",(0,t.jsx)(n.h5,{id:"constructor-strategies",children:"Constructor Strategies"}),"\n",(0,t.jsx)(n.p,{children:"The code fix supports multiple patterns:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Option 1: Pure Parameterless"})," - When all dependencies are optional or have defaults"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public DataTransform()\n{\n    _logger = LoggerFactory.CreateLogger<DataTransform>();\n    _config = new DefaultConfiguration();\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Option 2: Mixed Constructors"})," - Parameterless + Parameterized (recommended)"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public DataTransform() : this(null!, null!) { }\n\npublic DataTransform(ILogger<DataTransform> logger, IConfiguration config)\n{\n    _logger = logger;\n    _config = config;\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Option 3: Lazy Initialization"})," - Parameterless with lazy property initialization"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public DataTransform()\n{\n    _logger = null!;\n    _config = null!;\n}\n\npublic ILogger<DataTransform> Logger => _logger ??= LoggerFactory.CreateLogger<DataTransform>();\n"})}),"\n",(0,t.jsx)(n.h5,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use Mixed Constructors"}),": Keep the parameterless constructor lightweight and delegate to the parameterized one"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Null Forgiving for DI"}),": Use ",(0,t.jsx)(n.code,{children:"null!"})," for fields that get injected via the parameterized constructor"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Factory Configuration"}),": Pre-configure instances with complex initialization in factory configuration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Documentation"}),": Add XML comments explaining the parameterless constructor's purpose"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Testing"}),": Verify that parameterless instantiation works correctly for your use case"]}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"related-configuration",children:"Related Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Enable optimization-level diagnostics in ",(0,t.jsx)(n.code,{children:".editorconfig"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"# Node instantiation optimization\ndotnet_diagnostic.NP9505.severity = warning\ndotnet_code_fix.NP9505.enable = true\n"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/docs/architecture/node-instantiation",children:"Node Instantiation Optimization"})," for architectural details and ",(0,t.jsx)(n.a,{href:"/docs/tooling/analyzers/best-practices#np9505-node-instantiation",children:"Best Practices: NP9505"})," for comprehensive guidance."]}),"\n",(0,t.jsx)(n.h4,{id:"np9101-blocking-operations-in-async-methods",children:"NP9101: Blocking Operations in Async Methods"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"BlockingAsyncOperationCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix automatically converts blocking operations in async methods to proper async patterns."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-5",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :x: PROBLEM: Blocking on Task.Result\npublic async Task<string> ProcessDataAsync()\n{\n    var task = SomeOperationAsync();\n    return task.Result; // NP9101: Blocks until task completes\n}\n\n// :x: PROBLEM: Synchronous I/O in async method\npublic async Task ProcessFileAsync()\n{\n    var content = File.ReadAllText("file.txt"); // NP9101: Synchronous I/O\n    await ProcessAsync(content);\n}\n'})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-5",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :heavy_check_mark: CORRECT: Use await\npublic async Task<string> ProcessDataAsync()\n{\n    var task = SomeOperationAsync();\n    return await task; // Properly awaits without blocking\n}\n\n// :heavy_check_mark: CORRECT: Use async I/O\npublic async Task ProcessFileAsync()\n{\n    var content = await File.ReadAllTextAsync("file.txt"); // Async I/O\n    await ProcessAsync(content);\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"np9102-swallowed-operationcanceledexception",children:"NP9102: Swallowed OperationCanceledException"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"OperationCanceledExceptionCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix ensures that OperationCanceledException is properly re-thrown or handled to maintain cancellation contracts."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-6",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :x: PROBLEM: Swallowing OperationCanceledException\npublic async Task ProcessAsync(CancellationToken cancellationToken)\n{\n    try\n    {\n        await SomeOperationAsync(cancellationToken);\n    }\n    catch (OperationCanceledException)\n    {\n        // NP9102: Silently swallowing cancellation\n        Console.WriteLine("Operation cancelled");\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-6",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: Re-throw cancellation exception\npublic async Task ProcessAsync(CancellationToken cancellationToken)\n{\n    try\n    {\n        await SomeOperationAsync(cancellationToken);\n    }\n    catch (OperationCanceledException) when (cancellationToken.IsCancellationRequested)\n    {\n        throw; // Re-throw to propagate cancellation\n    }\n    catch (OperationCanceledException)\n    {\n        // Handle other cancellation scenarios\n        throw;\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"np9103-synchronous-over-async-patterns",children:"NP9103: Synchronous over Async Patterns"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"SynchronousOverAsyncCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix converts fire-and-forget async calls to properly awaited async operations."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-7",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: PROBLEM: Fire-and-forget async call (unawaited)\npublic async Task ProcessDataAsync()\n{\n    SomeOperationAsync(); // NP9103: Async method not awaited\n    DoSomethingElse();\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-7",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: Await the async call\npublic async Task ProcessDataAsync()\n{\n    await SomeOperationAsync(); // Properly awaited\n    DoSomethingElse();\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"np9104-cancellation-token-not-respected",children:"NP9104: Cancellation Token Not Respected"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"CancellationTokenRespectCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix adds proper cancellation token checking and propagation in long-running operations."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-8",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: PROBLEM: Not checking cancellation token in loop\npublic async Task ProcessItemsAsync(IEnumerable<Item> items, CancellationToken cancellationToken)\n{\n    foreach (var item in items)\n    {\n        // NP9104: Not checking cancellation token\n        await ProcessItemAsync(item);\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-8",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: Check cancellation token before processing\npublic async Task ProcessItemsAsync(IEnumerable<Item> items, CancellationToken cancellationToken)\n{\n    foreach (var item in items)\n    {\n        cancellationToken.ThrowIfCancellationRequested();\n        await ProcessItemAsync(item, cancellationToken);\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"np9201-linq-operations-in-hot-paths",children:"NP9201: LINQ Operations in Hot Paths"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"LinqInHotPathsCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix converts LINQ operations in performance-critical code to imperative alternatives."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-9",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: PROBLEM: LINQ in ExecuteAsync method\npublic class BadTransform : ITransformNode<Input, Output>\n{\n    protected override async Task<Output> ExecuteAsync(Input input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        // NP9201: LINQ in hot path creates allocations\n        var filtered = input.Items.Where(x => x.IsActive).ToList();\n        var sorted = filtered.OrderBy(x => x.Priority).ToList();\n        return new Output(sorted);\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-9",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: Use imperative processing\npublic class GoodTransform : ITransformNode<Input, Output>\n{\n    protected override async Task<Output> ExecuteAsync(Input input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        var filtered = new List<Item>();\n        foreach (var item in input.Items)\n        {\n            if (item.IsActive)\n                filtered.Add(item);\n        }\n        \n        filtered.Sort((x, y) => x.Priority.CompareTo(y.Priority));\n        \n        return new Output(filtered);\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"np9202-inefficient-string-operations",children:"NP9202: Inefficient String Operations"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"InefficientStringOperationsCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix replaces inefficient string operations with high-performance alternatives."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-10",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :x: PROBLEM: String concatenation in loop\npublic class BadTransform : ITransformNode<Input, Output>\n{\n    protected override async Task<Output> ExecuteAsync(Input input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        string result = "";\n        foreach (var item in input.Items) // NP9202: Concatenation in loop\n        {\n            result += item.ToString(); // Creates new string each iteration\n        }\n        return new Output(result);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-10",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: Use StringBuilder for concatenation\npublic class GoodTransform : ITransformNode<Input, Output>\n{\n    protected override async Task<Output> ExecuteAsync(Input input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        var sb = new StringBuilder();\n        foreach (var item in input.Items)\n        {\n            sb.Append(item.ToString());\n        }\n        return new Output(sb.ToString());\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"np9203-anonymous-object-allocation",children:"NP9203: Anonymous Object Allocation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"AnonymousObjectAllocationCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix creates named types to replace anonymous object allocations in performance-critical code."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-11",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: PROBLEM: Anonymous objects in ExecuteAsync\nprotected override async Task ExecuteAsync(IDataPipe<Output> output, PipelineContext context, CancellationToken cancellationToken)\n{\n    foreach (var item in inputItems)\n    {\n        // NP9203: Anonymous object allocation in hot path\n        var result = new { Id = item.Id, Name = item.Name, Value = item.Value * 2 };\n        await output.ProduceAsync(new Output(result), cancellationToken);\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-11",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: Define named type for results\npublic record ProcessedItem(int Id, string Name, double Value);\n\nprotected override async Task ExecuteAsync(IDataPipe<Output> output, PipelineContext context, CancellationToken cancellationToken)\n{\n    foreach (var item in inputItems)\n    {\n        var result = new ProcessedItem(item.Id, item.Name, item.Value * 2);\n        await output.ProduceAsync(new Output(result), cancellationToken);\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"np9204-missing-valuetask-optimization",children:"NP9204: Missing ValueTask Optimization"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"ValueTaskOptimizationCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix converts Task return types to ValueTask for methods that frequently complete synchronously."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-12",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: PROBLEM: Allocates heap object even for synchronous completions\npublic async Task<string> GetDataAsync(string id)\n{\n    var cached = _cache.Get(id);\n    if (cached != null)\n    {\n        return cached; // Allocates Task on heap\n    }\n    \n    return await FetchFromDatabaseAsync(id);\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-12",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: No allocation for synchronous returns\npublic async ValueTask<string> GetDataAsync(string id)\n{\n    var cached = _cache.Get(id);\n    if (cached != null)\n    {\n        return cached; // No allocation - synchronous completion\n    }\n    \n    return await FetchFromDatabaseAsync(id);\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"np9205-non-streaming-patterns-in-sourcenode",children:"NP9205: Non-Streaming Patterns in SourceNode"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"SourceNodeStreamingCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix converts non-streaming SourceNode implementations to proper streaming patterns using IAsyncEnumerable."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-13",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: PROBLEM: Non-streaming implementation\npublic class BadSourceNode : ISourceNode<Output>\n{\n    public override IDataPipe<Output> Initialize(PipelineContext context, CancellationToken cancellationToken)\n    {\n        var items = LoadAllItems(); // Loads everything into memory\n        return new StreamingDataPipe<Output>(items.ToAsyncEnumerable());\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-13",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: Streaming implementation\npublic class GoodSourceNode : ISourceNode<Output>\n{\n    public override IDataPipe<Output> Initialize(PipelineContext context, CancellationToken cancellationToken)\n    {\n        return new StreamingDataPipe<Output>(GetItemsAsync(cancellationToken));\n    }\n    \n    private async IAsyncEnumerable<Output> GetItemsAsync([EnumeratorCancellation] CancellationToken cancellationToken)\n    {\n        // Stream items one at a time\n        await foreach (var item in _dataSource.GetItemsAsync(cancellationToken))\n        {\n            yield return ProcessItem(item);\n        }\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"np9301-inefficient-exception-handling",children:"NP9301: Inefficient Exception Handling"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"InefficientExceptionHandlingCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix converts inefficient exception handling patterns to specific exception handling and alternative patterns."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-14",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :x: PROBLEM: Catching Exception instead of specific exceptions\npublic async Task ProcessAsync(Input input, CancellationToken cancellationToken)\n{\n    try\n    {\n        await ProcessItemAsync(input, cancellationToken);\n    }\n    catch (Exception ex) // NP9301: Too broad exception handling\n    {\n        _logger.LogError(ex, "Processing failed");\n        throw;\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-14",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :heavy_check_mark: CORRECT: Catch specific exceptions\npublic async Task ProcessAsync(Input input, CancellationToken cancellationToken)\n{\n    try\n    {\n        await ProcessItemAsync(input, cancellationToken);\n    }\n    catch (InvalidOperationException ex)\n    {\n        _logger.LogError(ex, "Invalid operation during processing");\n        throw;\n    }\n    catch (TimeoutException ex)\n    {\n        _logger.LogError(ex, "Processing timeout");\n        throw new ProcessingTimeoutException("Item processing timed out", ex);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"np9302-sinknode-input-not-consumed",children:"NP9302: SinkNode Input Not Consumed"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"SinkNodeInputConsumptionCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix adds proper input consumption patterns to SinkNode implementations."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-15",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: PROBLEM: Not consuming input\npublic class BadSinkNode : ISinkNode<Input>\n{\n    protected override async Task ExecuteAsync(IDataPipe<Input> input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        // NP9302: Input pipe not consumed - items are dropped\n        await Task.Delay(TimeSpan.FromSeconds(1), cancellationToken);\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-15",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: Consume all input\npublic class GoodSinkNode : ISinkNode<Input>\n{\n    protected override async Task ExecuteAsync(IDataPipe<Input> input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        await foreach (var item in input.ConsumeAsync(cancellationToken))\n        {\n            await ProcessItemAsync(item, cancellationToken);\n        }\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"np9303-unsafe-pipelinecontext-access",children:"NP9303: Unsafe PipelineContext Access"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"PipelineContextAccessCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix adds null-safe patterns and proper error handling for PipelineContext access."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-16",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :x: PROBLEM: Unsafe context access\npublic class BadTransform : ITransformNode<Input, Output>\n{\n    protected override async Task<Output> ExecuteAsync(Input input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        // NP9303: Potential null reference exception\n        var nodeId = context.NodeId;\n        var metadata = context.Metadata["key"];\n        return new Output(input, nodeId, metadata);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-16",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// :heavy_check_mark: CORRECT: Safe context access\npublic class GoodTransform : ITransformNode<Input, Output>\n{\n    protected override async Task<Output> ExecuteAsync(Input input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        var nodeId = context?.NodeId ?? "unknown";\n        var metadata = context?.Metadata?.ContainsKey("key") == true\n            ? context.Metadata["key"]\n            : null;\n        return new Output(input, nodeId, metadata);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"np9401-direct-dependency-instantiation",children:"NP9401: Direct Dependency Instantiation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"DependencyInjectionCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix converts direct dependency instantiation to proper constructor injection patterns."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-17",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: PROBLEM: Direct dependency instantiation\npublic class BadTransform : ITransformNode<Input, Output>\n{\n    protected override async Task<Output> ExecuteAsync(Input input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        // NP9401: Direct instantiation creates tight coupling\n        var processor = new DataProcessor();\n        var result = await processor.ProcessAsync(input);\n        return new Output(result);\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-17",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: Constructor injection\npublic class GoodTransform : ITransformNode<Input, Output>\n{\n    private readonly IDataProcessor _processor;\n    \n    public GoodTransform(IDataProcessor processor)\n    {\n        _processor = processor ?? throw new ArgumentNullException(nameof(processor));\n    }\n    \n    protected override async Task<Output> ExecuteAsync(Input input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        var result = await _processor.ProcessAsync(input);\n        return new Output(result);\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"np9001-incomplete-resilience-configuration",children:"NP9001: Incomplete Resilience Configuration"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fix Provider:"})," ",(0,t.jsx)(n.code,{children:"ResilientExecutionConfigurationCodeFixProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"This code fix adds missing resilience configuration prerequisites to error handlers."}),"\n",(0,t.jsx)(n.h5,{id:"before-fix-18",children:"Before Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :x: PROBLEM: Incomplete resilience configuration\npublic class MyErrorHandler : IPipelineErrorHandler\n{\n    public async Task<PipelineErrorDecision> HandleNodeFailureAsync(\n        string nodeId,\n        Exception error,\n        PipelineContext context,\n        CancellationToken cancellationToken)\n    {\n        return error switch\n        {\n            TimeoutException => PipelineErrorDecision.RestartNode,  // Intent is clear\n            _ => PipelineErrorDecision.FailPipeline\n        };\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"after-fix-18",children:"After Fix"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// :heavy_check_mark: CORRECT: Complete resilience configuration\n[ResilientExecution(\n    MaxRetryCount = 3,\n    BaseDelay = TimeSpan.FromSeconds(1),\n    MaxDelay = TimeSpan.FromMinutes(1),\n    MaxMaterializedItems = 1000)]\npublic class MyErrorHandler : IPipelineErrorHandler\n{\n    public async Task<PipelineErrorDecision> HandleNodeFailureAsync(\n        string nodeId,\n        Exception error,\n        PipelineContext context,\n        CancellationToken cancellationToken)\n    {\n        return error switch\n        {\n            TimeoutException => PipelineErrorDecision.RestartNode,\n            _ => PipelineErrorDecision.FailPipeline\n        };\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"using-code-fixes",children:"Using Code Fixes"}),"\n",(0,t.jsx)(n.h4,{id:"in-visual-studio",children:"In Visual Studio"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Analyzer Warning Appears"}),": A wavy underline appears under the problematic code"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Light Bulb Icon"}),": Click the light bulb or press ",(0,t.jsx)(n.code,{children:"Ctrl+."})," (period)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Select Fix"}),": Choose from the available code fix options"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Apply Fix"}),": The fix is automatically applied to your code"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"in-vs-code",children:"In VS Code"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Analyzer Warning"}),": A red or yellow underline appears"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Quick Fix"}),": Click the light bulb icon or press ",(0,t.jsx)(n.code,{children:"Ctrl+."})," (period)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Choose Fix"}),": Select the appropriate fix from the dropdown"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Preview Changes"}),": Review the proposed changes before applying"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"in-rider",children:"In Rider"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Warning Highlight"}),": Code is highlighted with a warning indicator"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Alt+Enter"}),": Press ",(0,t.jsx)(n.code,{children:"Alt+Enter"})," to open quick fixes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Select Fix"}),": Choose the desired code fix from the list"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Apply"}),": The fix is applied automatically"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"code-fix-best-practices",children:"Code Fix Best Practices"}),"\n",(0,t.jsx)(n.h4,{id:"review-before-applying",children:"Review Before Applying"}),"\n",(0,t.jsx)(n.p,{children:"While code fixes are helpful, always review the generated code:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Understand the Change"}),": Know what the fix is doing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Validate the Logic"}),": Ensure it matches your requirements"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test Thoroughly"}),": Verify the fix works in your scenario"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Consider Alternatives"}),": Sometimes a different approach is better"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"customizing-fixes",children:"Customizing Fixes"}),"\n",(0,t.jsx)(n.p,{children:"Code fixes provide sensible defaults, but you may need to customize:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// Code fix provides this:\nmaxMaterializedItems: 1000\n\n// You might customize to:\nmaxMaterializedItems: GetOptimalBatchSize(); // Your custom logic\n"})}),"\n",(0,t.jsx)(n.h4,{id:"combining-fixes",children:"Combining Fixes"}),"\n",(0,t.jsx)(n.p,{children:"Some issues require multiple fixes:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// Original problematic code\nvar retryOptions = new PipelineRetryOptions(\n    maxRetryCount: 3,\n    baseDelay: TimeSpan.FromSeconds(1));\n\n// Apply NP9501 fix first\nvar retryOptions = new PipelineRetryOptions(\n    maxRetryCount: 3,\n    baseDelay: TimeSpan.FromSeconds(1),\n    maxMaterializedItems: 1000);\n\n// Then apply NP9504 fix if needed\nvar retryOptions = new PipelineRetryOptions(\n    maxRetryCount: 3,\n    baseDelay: TimeSpan.FromSeconds(1),\n    maxDelay: TimeSpan.FromMinutes(5), // Added by NP9504 fix\n    maxMaterializedItems: 1000);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"limitations",children:"Limitations"}),"\n",(0,t.jsx)(n.p,{children:"Code fix providers have some limitations:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Context-Dependent"}),": Fixes are based on static analysis, not runtime behavior"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Conservative Values"}),": Suggested values are conservative for safety"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Simple Scenarios"}),": Complex refactoring scenarios may need manual intervention"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Business Logic"}),": Fixes can't understand your specific business requirements"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"extending-code-fixes",children:"Extending Code Fixes"}),"\n",(0,t.jsx)(n.p,{children:"You can extend code fix behavior through configuration:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"# .editorconfig\n# Customize default values for code fixes\ndotnet_diagnostic.NP9501.code_fix.default_max_materialized = 500\ndotnet_diagnostic.NP9502.code_fix.cpu_bound_parallelism = processor_count\ndotnet_diagnostic.NP9503.code_fix.timeout_per_item = 10ms\n"})}),"\n",(0,t.jsx)(n.h3,{id:"troubleshooting-code-fixes",children:"Troubleshooting Code Fixes"}),"\n",(0,t.jsx)(n.h4,{id:"fix-not-available",children:"Fix Not Available"}),"\n",(0,t.jsx)(n.p,{children:"If a code fix doesn't appear:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Check Analyzer Version"}),": Ensure you have the latest analyzer package"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Verify Context"}),": Some fixes only apply in specific contexts"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Check Syntax"}),": The code must match the expected pattern exactly"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Restart IDE"}),": Sometimes a restart is needed after package updates"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"fix-produces-errors",children:"Fix Produces Errors"}),"\n",(0,t.jsx)(n.p,{children:"If a code fix introduces errors:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Report the Issue"}),": File a bug report with example code"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use Manual Fix"}),": Apply the suggested pattern manually"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Check Dependencies"}),": Ensure all required packages are installed"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Verify Compatibility"}),": Check for version conflicts"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"contributing",children:"Contributing"}),"\n",(0,t.jsx)(n.p,{children:"Code fix providers are open source and contributions are welcome:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Fork the Repository"}),": Get the source code from GitHub"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Identify Improvement"}),": Find a scenario that needs better fixes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Implement Fix"}),": Add or improve code fix logic"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Add Tests"}),": Ensure comprehensive test coverage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Submit Pull Request"}),": Contribute back to the community"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Enable or disable code fixes in your ",(0,t.jsx)(n.code,{children:".editorconfig"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"# Enable all code fixes (default)\ndotnet_code_fix.enable = true\n\n# Disable specific code fix providers\ndotnet_code_fix.NP9501.enable = false\ndotnet_code_fix.NP9502.enable = false\n\n# Performance-related code fixes\ndotnet_code_fix.NP9101.enable = true\ndotnet_code_fix.NP9102.enable = true\ndotnet_code_fix.NP9103.enable = true\ndotnet_code_fix.NP9104.enable = true\ndotnet_code_fix.NP9201.enable = true\ndotnet_code_fix.NP9202.enable = true\ndotnet_code_fix.NP9203.enable = true\ndotnet_code_fix.NP9204.enable = true\ndotnet_code_fix.NP9205.enable = true\n\n# Reliability and data processing code fixes\ndotnet_code_fix.NP9301.enable = true\ndotnet_code_fix.NP9302.enable = true\ndotnet_code_fix.NP9303.enable = true\n\n# Best practice and configuration code fixes\ndotnet_code_fix.NP9401.enable = true\ndotnet_code_fix.NP9001.enable = true\n\n# Customize code fix behavior\ndotnet_code_fix.NP9501.default_value = 500\ndotnet_code_fix.NP9502.strategy = conservative\ndotnet_code_fix.NP9101.prefer_async_overloads = true\ndotnet_code_fix.NP9201.use_imperative_alternatives = true\ndotnet_code_fix.NP9202.use_string_builder_threshold = 3\ndotnet_code_fix.NP9203.generate_records = true\n"})}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/tooling/analyzers/configuration",children:"Configuration Analyzers"})," - Understanding the issues code fixes address"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/tooling/analyzers/performance",children:"Performance Analyzers"})," - Performance-related code fixes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/tooling/analyzers/best-practices",children:"Best Practice Analyzers"})," - Framework convention fixes"]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var r=i(6540);const t={},s=r.createContext(t);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);