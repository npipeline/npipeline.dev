"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[9799],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>t});var s=i(96540);const r={},o=s.createContext(r);function a(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(o.Provider,{value:n},e.children)}},91092:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"analyzers/code-fixes","title":"Code Fix Providers","description":"Automated code fixes for common analyzer issues in NPipeline.","source":"@site/docs/analyzers/code-fixes.md","sourceDirName":"analyzers","slug":"/analyzers/code-fixes","permalink":"/docs/analyzers/code-fixes","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"title":"Code Fix Providers","description":"Automated code fixes for common analyzer issues in NPipeline.","sidebar_position":7},"sidebar":"docsSidebar","previous":{"title":"Configuration Analyzers","permalink":"/docs/analyzers/configuration"},"next":{"title":"Analyzer Code Reference","permalink":"/docs/analyzers/code-mapping"}}');var r=i(74848),o=i(28453);const a={title:"Code Fix Providers",description:"Automated code fixes for common analyzer issues in NPipeline.",sidebar_position:7},t=void 0,l={},c=[{value:"Code Fix Providers",id:"code-fix-providers",level:2},{value:"Overview",id:"overview",level:3},{value:"Available Code Fixes",id:"available-code-fixes",level:3},{value:"NP9501: Unbounded Materialization Configuration",id:"np9501-unbounded-materialization-configuration",level:4},{value:"NP9502: Inappropriate Parallelism Configuration",id:"np9502-inappropriate-parallelism-configuration",level:4},{value:"NP9503: Batching Configuration Mismatch",id:"np9503-batching-configuration-mismatch",level:4},{value:"NP9504: Timeout Configuration Issues",id:"np9504-timeout-configuration-issues",level:4},{value:"NP9101: Blocking Operations in Async Methods",id:"np9101-blocking-operations-in-async-methods",level:4},{value:"NP9205: Non-Streaming Patterns in SourceNode",id:"np9205-non-streaming-patterns-in-sourcenode",level:4},{value:"NP9401: Direct Dependency Instantiation",id:"np9401-direct-dependency-instantiation",level:4},{value:"NP9302: SinkNode Input Not Consumed",id:"np9302-sinknode-input-not-consumed",level:4},{value:"Using Code Fixes",id:"using-code-fixes",level:3},{value:"In Visual Studio",id:"in-visual-studio",level:4},{value:"In VS Code",id:"in-vs-code",level:4},{value:"In Rider",id:"in-rider",level:4},{value:"Code Fix Best Practices",id:"code-fix-best-practices",level:3},{value:"Review Before Applying",id:"review-before-applying",level:4},{value:"Customizing Fixes",id:"customizing-fixes",level:4},{value:"Combining Fixes",id:"combining-fixes",level:4},{value:"Configuration",id:"configuration",level:3},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"code-fix-providers",children:"Code Fix Providers"}),"\n",(0,r.jsx)(n.p,{children:"NPipeline analyzers include automated code fix providers that can automatically resolve many common issues detected by the analyzers. These code fixes appear as light bulb suggestions in Visual Studio and can be applied with a single click."}),"\n",(0,r.jsx)(n.h3,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Code fix providers help developers quickly resolve analyzer warnings by:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Automatically generating correct code patterns"})," - No need to remember exact syntax"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Applying framework best practices"})," - Fixes follow NPipeline conventions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reducing cognitive load"})," - Focus on business logic instead of boilerplate"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Preventing copy-paste errors"})," - Consistent, correct implementations"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"available-code-fixes",children:"Available Code Fixes"}),"\n",(0,r.jsx)(n.h4,{id:"np9501-unbounded-materialization-configuration",children:"NP9501: Unbounded Materialization Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["This code fix automatically adds appropriate ",(0,r.jsx)(n.code,{children:"MaxMaterializedItems"})," values to ",(0,r.jsx)(n.code,{children:"PipelineRetryOptions"})," constructors."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"var retryOptions = new PipelineRetryOptions(\n    maxRetryCount: 3,\n    baseDelay: TimeSpan.FromSeconds(1),\n    maxDelay: TimeSpan.FromMinutes(1));\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"var retryOptions = new PipelineRetryOptions(\n    maxRetryCount: 3,\n    baseDelay: TimeSpan.FromSeconds(1),\n    maxDelay: TimeSpan.FromMinutes(1),\n    maxMaterializedItems: 1000);\n"})}),"\n",(0,r.jsx)(n.h4,{id:"np9502-inappropriate-parallelism-configuration",children:"NP9502: Inappropriate Parallelism Configuration"}),"\n",(0,r.jsx)(n.p,{children:"This code fix suggests appropriate parallelism values based on workload type and system characteristics."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'builder.AddTransform<CpuTransform, Input, Output>("transform")\n    .WithParallelism(Environment.ProcessorCount * 4);\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'builder.AddTransform<CpuTransform, Input, Output>("transform")\n    .WithParallelism(Environment.ProcessorCount);\n'})}),"\n",(0,r.jsx)(n.h4,{id:"np9503-batching-configuration-mismatch",children:"NP9503: Batching Configuration Mismatch"}),"\n",(0,r.jsx)(n.p,{children:"This code fix aligns batch sizes with appropriate timeout values based on processing characteristics."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"var batchingOptions = new BatchingOptions(\n    batchSize: 1000,\n    timeout: TimeSpan.FromMilliseconds(100));\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"var batchingOptions = new BatchingOptions(\n    batchSize: 1000,\n    timeout: TimeSpan.FromSeconds(5));\n"})}),"\n",(0,r.jsx)(n.h4,{id:"np9504-timeout-configuration-issues",children:"NP9504: Timeout Configuration Issues"}),"\n",(0,r.jsx)(n.p,{children:"This code fix suggests appropriate timeout values based on operation type and characteristics."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'builder.AddTransform<DatabaseTransform, Input, Output>("transform")\n    .WithTimeout(TimeSpan.Zero);\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'builder.AddTransform<DatabaseTransform, Input, Output>("transform")\n    .WithTimeout(TimeSpan.FromSeconds(30));\n'})}),"\n",(0,r.jsx)(n.h4,{id:"np9101-blocking-operations-in-async-methods",children:"NP9101: Blocking Operations in Async Methods"}),"\n",(0,r.jsx)(n.p,{children:"This code fix automatically converts blocking operations in async methods to proper async patterns."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public async Task<string> ProcessDataAsync()\n{\n    var task = SomeOperationAsync();\n    return task.Result;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public async Task<string> ProcessDataAsync()\n{\n    var task = SomeOperationAsync();\n    return await task;\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"np9205-non-streaming-patterns-in-sourcenode",children:"NP9205: Non-Streaming Patterns in SourceNode"}),"\n",(0,r.jsx)(n.p,{children:"This code fix converts non-streaming SourceNode implementations to proper streaming patterns using IAsyncEnumerable."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public class BadSourceNode : SourceNode<Output>\n{\n    public override IDataPipe<Output> Initialize(PipelineContext context, CancellationToken cancellationToken)\n    {\n        var items = LoadAllItems();\n        return new StreamingDataPipe<Output>(items.ToAsyncEnumerable());\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public class GoodSourceNode : SourceNode<Output>\n{\n    public override IDataPipe<Output> Initialize(PipelineContext context, CancellationToken cancellationToken)\n    {\n        return new StreamingDataPipe<Output>(GetItemsAsync(cancellationToken));\n    }\n    \n    private async IAsyncEnumerable<Output> GetItemsAsync([EnumeratorCancellation] CancellationToken cancellationToken)\n    {\n        await foreach (var item in _dataSource.GetItemsAsync(cancellationToken))\n        {\n            yield return ProcessItem(item);\n        }\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"np9401-direct-dependency-instantiation",children:"NP9401: Direct Dependency Instantiation"}),"\n",(0,r.jsx)(n.p,{children:"This code fix converts direct dependency instantiation to proper constructor injection patterns."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public class BadTransform : TransformNode<Input, Output>\n{\n    protected override async Task<Output> ExecuteAsync(Input input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        var processor = new DataProcessor();\n        var result = await processor.ProcessAsync(input);\n        return new Output(result);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public class GoodTransform : TransformNode<Input, Output>\n{\n    private readonly IDataProcessor _processor;\n    \n    public GoodTransform(IDataProcessor processor)\n    {\n        _processor = processor;\n    }\n    \n    protected override async Task<Output> ExecuteAsync(Input input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        var result = await _processor.ProcessAsync(input);\n        return new Output(result);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"np9302-sinknode-input-not-consumed",children:"NP9302: SinkNode Input Not Consumed"}),"\n",(0,r.jsx)(n.p,{children:"This code fix adds proper input consumption patterns to SinkNode implementations."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public class BadSinkNode : SinkNode<Input>\n{\n    protected override async Task ExecuteAsync(IDataPipe<Input> input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        await Task.Delay(TimeSpan.FromSeconds(1), cancellationToken);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After Fix:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public class GoodSinkNode : SinkNode<Input>\n{\n    protected override async Task ExecuteAsync(IDataPipe<Input> input, PipelineContext context, CancellationToken cancellationToken)\n    {\n        await foreach (var item in input.WithCancellation(cancellationToken))\n        {\n            await ProcessItemAsync(item, cancellationToken);\n        }\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"using-code-fixes",children:"Using Code Fixes"}),"\n",(0,r.jsx)(n.h4,{id:"in-visual-studio",children:"In Visual Studio"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analyzer Warning Appears"}),": A wavy underline appears under the problematic code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Light Bulb Icon"}),": Click the light bulb or press ",(0,r.jsx)(n.code,{children:"Ctrl+."})," (period)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Select Fix"}),": Choose from the available code fix options"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Apply Fix"}),": The fix is automatically applied to your code"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"in-vs-code",children:"In VS Code"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analyzer Warning"}),": A red or yellow underline appears"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quick Fix"}),": Click the light bulb icon or press ",(0,r.jsx)(n.code,{children:"Ctrl+."})," (period)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Choose Fix"}),": Select the appropriate fix from the dropdown"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Preview Changes"}),": Review the proposed changes before applying"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"in-rider",children:"In Rider"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Warning Highlight"}),": Code is highlighted with a warning indicator"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Alt+Enter"}),": Press ",(0,r.jsx)(n.code,{children:"Alt+Enter"})," to open quick fixes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Select Fix"}),": Choose the desired code fix from the list"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Apply"}),": The fix is applied automatically"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"code-fix-best-practices",children:"Code Fix Best Practices"}),"\n",(0,r.jsx)(n.h4,{id:"review-before-applying",children:"Review Before Applying"}),"\n",(0,r.jsx)(n.p,{children:"While code fixes are helpful, always review the generated code to ensure it matches your requirements."}),"\n",(0,r.jsx)(n.h4,{id:"customizing-fixes",children:"Customizing Fixes"}),"\n",(0,r.jsx)(n.p,{children:"Code fixes provide sensible defaults, but you may customize them based on your specific needs and constraints."}),"\n",(0,r.jsx)(n.h4,{id:"combining-fixes",children:"Combining Fixes"}),"\n",(0,r.jsx)(n.p,{children:"Some issues may require multiple fixes to be applied in sequence. The order generally doesn't matter, but test after applying fixes."}),"\n",(0,r.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Enable or disable code fixes in your ",(0,r.jsx)(n.code,{children:".editorconfig"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"# Enable all code fixes (default)\ndotnet_code_fix.enable = true\n\n# Disable specific code fix providers\ndotnet_code_fix.NP9501.enable = false\ndotnet_code_fix.NP9502.enable = false\n"})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/analyzers/configuration",children:"Configuration Analyzers"})," - Understanding the issues code fixes address"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/analyzers/performance",children:"Performance Analyzers"})," - Performance-related code fixes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/analyzers/best-practices",children:"Best Practice Analyzers"})," - Framework convention fixes"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);