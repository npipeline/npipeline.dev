"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[1605],{5841:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"core-concepts/resilience/configuration-guide","title":"Configuration Guide","description":"Step-by-step workflow for configuring resilience in NPipeline.","source":"@site/docs/core-concepts/resilience/configuration-guide.md","sourceDirName":"core-concepts/resilience","slug":"/core-concepts/resilience/configuration-guide","permalink":"/npipeline.dev/docs/core-concepts/resilience/configuration-guide","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Configuration Guide","description":"Step-by-step workflow for configuring resilience in NPipeline.","sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Dependency Chains","permalink":"/npipeline.dev/docs/core-concepts/resilience/dependency-chains"},"next":{"title":"Troubleshooting","permalink":"/npipeline.dev/docs/core-concepts/resilience/troubleshooting"}}');var t=i(4848),o=i(8453);const s={title:"Configuration Guide",description:"Step-by-step workflow for configuring resilience in NPipeline.",sidebar_position:5},l="Configuration Guide",c={},a=[{value:"Configuration Workflow",id:"configuration-workflow",level:2},{value:"Step 1: Choose Your Execution Strategy",id:"step-1-choose-your-execution-strategy",level:3},{value:"Step 2: Configure Retry Options",id:"step-2-configure-retry-options",level:3},{value:"Step 3: Configure Circuit Breaker (Optional)",id:"step-3-configure-circuit-breaker-optional",level:3},{value:"Step 4: Configure Error Handling",id:"step-4-configure-error-handling",level:3},{value:"Step 5: Put It All Together",id:"step-5-put-it-all-together",level:3},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"Common Mistakes",id:"common-mistakes",level:2},{value:"\u27a1\ufe0f Next Steps",id:"arrow_right-next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"configuration-guide",children:"Configuration Guide"})}),"\n",(0,t.jsxs)(n.p,{children:["This guide provides a structured workflow for configuring resilience in NPipeline. For comprehensive code examples with real-world scenarios, see ",(0,t.jsx)(n.a,{href:"/npipeline.dev/docs/core-concepts/resilience/resilient-execution-strategy#common-configuration-patterns",children:"Common Configuration Patterns"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"configuration-workflow",children:"Configuration Workflow"}),"\n",(0,t.jsx)(n.p,{children:"To properly configure resilience for your pipeline, follow these steps:"}),"\n",(0,t.jsx)(n.h3,{id:"step-1-choose-your-execution-strategy",children:"Step 1: Choose Your Execution Strategy"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Strategy"}),(0,t.jsx)(n.th,{children:"Use Case"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Sequential"}),(0,t.jsx)(n.td,{children:"Simple processing, order matters"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Parallel"}),(0,t.jsx)(n.td,{children:"CPU/IO-bound, high throughput"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Wrap with ",(0,t.jsx)(n.code,{children:"ResilientExecutionStrategy"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'var nodeHandle = builder\r\n    .AddTransform<MyTransform, Input, Output>("myNode")\r\n    .WithExecutionStrategy(builder, new ResilientExecutionStrategy(\r\n        new SequentialExecutionStrategy()\r\n    ));\n'})}),"\n",(0,t.jsx)(n.h3,{id:"step-2-configure-retry-options",children:"Step 2: Configure Retry Options"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"var options = new PipelineRetryOptions(\r\n    MaxItemRetries: 3,\r\n    MaxNodeRestartAttempts: 2,\r\n    MaxSequentialNodeAttempts: 5,\r\n    MaxMaterializedItems: 1000\r\n);\r\n\r\nvar context = PipelineContext.WithRetry(options);\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Decision Matrix:"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Scenario"}),(0,t.jsx)(n.th,{children:"MaxItemRetries"}),(0,t.jsx)(n.th,{children:"MaxNodeRestartAttempts"}),(0,t.jsx)(n.th,{children:"MaxMaterializedItems"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Stable internal services"}),(0,t.jsx)(n.td,{children:"1-2"}),(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"500-1000"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Unstable external APIs"}),(0,t.jsx)(n.td,{children:"3-5"}),(0,t.jsx)(n.td,{children:"3-5"}),(0,t.jsx)(n.td,{children:"1000-2000"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"High-volume streaming"}),(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"2"}),(0,t.jsx)(n.td,{children:"5000-10000"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Critical business logic"}),(0,t.jsx)(n.td,{children:"3-5"}),(0,t.jsx)(n.td,{children:"5"}),(0,t.jsx)(n.td,{children:"2000-5000"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"step-3-configure-circuit-breaker-optional",children:"Step 3: Configure Circuit Breaker (Optional)"}),"\n",(0,t.jsx)(n.p,{children:"Protect against cascading failures by tripping the circuit breaker when failures exceed a threshold:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// Basic configuration\r\nbuilder.WithCircuitBreaker(\r\n    failureThreshold: 5,\r\n    openDuration: TimeSpan.FromMinutes(1),\r\n    samplingWindow: TimeSpan.FromMinutes(5)\r\n);\r\n\r\n// For high-volume or long-running pipelines, tune memory cleanup\r\nbuilder.ConfigureCircuitBreakerMemoryManagement(opts =>\r\n    opts with\r\n    {\r\n        InactivityThreshold = TimeSpan.FromMinutes(10),\r\n        MaxTrackedCircuitBreakers = 500\r\n    }\r\n);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/npipeline.dev/docs/core-concepts/resilience/circuit-breaker-advanced-configuration",children:"Circuit Breaker Advanced Configuration"})," for detailed guidance on threshold types and memory management."]}),"\n",(0,t.jsx)(n.h3,{id:"step-4-configure-error-handling",children:"Step 4: Configure Error Handling"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public class CustomErrorHandler : IPipelineErrorHandler\r\n{\r\n    public Task<PipelineErrorDecision> HandleNodeFailureAsync(\r\n        string nodeId, Exception error, PipelineContext context, CancellationToken ct)\r\n    {\r\n        return error switch\r\n        {\r\n            TimeoutException => Task.FromResult(PipelineErrorDecision.RestartNode),\r\n            _ => Task.FromResult(PipelineErrorDecision.FailPipeline)\r\n        };\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-5-put-it-all-together",children:"Step 5: Put It All Together"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public class MyPipelineDefinition : IPipelineDefinition\r\n{\r\n    public void Define(PipelineBuilder builder, PipelineContext context)\r\n    {\r\n        var criticalHandle = builder\r\n            .AddTransform<CriticalTransform, Input, Output>("criticalNode")\r\n            .WithExecutionStrategy(builder, \r\n                new ResilientExecutionStrategy(new SequentialExecutionStrategy()));\r\n        // ... add other nodes\r\n        \r\n        builder.AddPipelineErrorHandler<CustomErrorHandler>();\r\n    }\r\n}\r\n\r\nvar runner = new PipelineRunner();\r\nawait runner.RunAsync<MyPipelineDefinition>(context);\r\nawait runner.RunAsync(pipeline, context);\n'})}),"\n",(0,t.jsx)(n.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/npipeline.dev/docs/core-concepts/resilience/resilient-execution-strategy#common-configuration-patterns",children:"Common Configuration Patterns"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"E-commerce Order Processing"}),"\n",(0,t.jsx)(n.li,{children:"High-Volume Data Analytics"}),"\n",(0,t.jsx)(n.li,{children:"Microservice Integration"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,t.jsxs)(n.p,{children:["For avoiding configuration errors, see ",(0,t.jsx)(n.a,{href:"/npipeline.dev/docs/core-concepts/resilience/resilient-execution-strategy#common-configuration-mistakes-to-avoid",children:"Common Configuration Mistakes to Avoid"}),"."]}),"\n",(0,t.jsxs)(n.h2,{id:"arrow_right-next-steps",children:["\u27a1\ufe0f"," Next Steps"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/npipeline.dev/docs/core-concepts/resilience/resilient-execution-strategy",children:"Resilient Execution Strategy"})," - Learn how ResilientExecutionStrategy works"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/npipeline.dev/docs/core-concepts/resilience/materialization-and-buffering",children:"Materialization and Buffering"})," - Understand memory management"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/npipeline.dev/docs/core-concepts/resilience/troubleshooting",children:"Troubleshooting"})," - Diagnose configuration issues"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>l});var r=i(6540);const t={},o=r.createContext(t);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);