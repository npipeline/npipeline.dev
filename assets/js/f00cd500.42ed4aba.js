"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[5075],{1848:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"analyzers/resilience","title":"Resilience Analyzers","description":"Detect incomplete resilience configuration that could lead to silent failures and unexpected behavior.","source":"@site/docs/analyzers/resilience.md","sourceDirName":"analyzers","slug":"/analyzers/resilience","permalink":"/docs/analyzers/resilience","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Resilience Analyzers","description":"Detect incomplete resilience configuration that could lead to silent failures and unexpected behavior.","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Build-Time Analyzers","permalink":"/docs/analyzers/"},"next":{"title":"Performance Analyzers","permalink":"/docs/analyzers/performance"}}');var t=i(4848),s=i(8453);const l={title:"Resilience Analyzers",description:"Detect incomplete resilience configuration that could lead to silent failures and unexpected behavior.",sidebar_position:2},o=void 0,a={},c=[{value:"Resilience Analyzers",id:"resilience-analyzers",level:2},{value:"NP9002: Incomplete Resilient Configuration",id:"np9002-incomplete-resilient-configuration",level:3},{value:"The Problem",id:"the-problem",level:4},{value:"With the Analyzer",id:"with-the-analyzer",level:4},{value:"Solution: Complete Configuration",id:"solution-complete-configuration",level:4},{value:"Best Practices",id:"best-practices",level:4},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"resilience-analyzers",children:"Resilience Analyzers"}),"\n",(0,t.jsx)(n.p,{children:"Resilience analyzers protect against incomplete error handling configuration that can cause silent failures, where error recovery appears to succeed but silently fails at runtime."}),"\n",(0,t.jsx)(n.h3,{id:"np9002-incomplete-resilient-configuration",children:"NP9002: Incomplete Resilient Configuration"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"ID:"})," ",(0,t.jsx)(n.code,{children:"NP9002"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Severity:"})," Warning",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Category:"})," Resilience"]}),"\n",(0,t.jsxs)(n.p,{children:["This analyzer detects when an error handler can return ",(0,t.jsx)(n.code,{children:"PipelineErrorDecision.RestartNode"})," but is missing one or more of the three mandatory prerequisites:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ResilientExecutionStrategy"})," wrapping the node"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"MaxNodeRestartAttempts > 0"})," in PipelineRetryOptions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"MaxMaterializedItems != null"})," in PipelineRetryOptions"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"the-problem",children:"The Problem"}),"\n",(0,t.jsx)(n.p,{children:"Before this analyzer existed, developers could easily miss one of the three mandatory prerequisites for node restart:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// \u274c User's Code - Looks correct but is missing prerequisites\npublic class MyErrorHandler : IPipelineErrorHandler\n{\n    public async Task<PipelineErrorDecision> HandleNodeFailureAsync(\n        string nodeId,\n        Exception error,\n        PipelineContext context,\n        CancellationToken cancellationToken)\n    {\n        return error switch\n        {\n            TimeoutException => PipelineErrorDecision.RestartNode,  // \u2190 Intent is clear\n            _ => PipelineErrorDecision.FailPipeline\n        };\n    }\n}\n\n// But at runtime, restart silently fails because prerequisites are missing!\n// The entire pipeline crashes instead of just restarting the node.\n"})}),"\n",(0,t.jsx)(n.h4,{id:"with-the-analyzer",children:"With the Analyzer"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"CSC : warning NP9002: Error handler can return PipelineErrorDecision.RestartNode \nbut the node may not have all three mandatory prerequisites configured...\n"})}),"\n",(0,t.jsx)(n.p,{children:"This gets flagged immediately at build time, before deployment."}),"\n",(0,t.jsx)(n.h4,{id:"solution-complete-configuration",children:"Solution: Complete Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// \u2705 CORRECT: All three prerequisites configured\n\n// 1. Wrap node with ResilientExecutionStrategy\nvar node = new MyTransformNode();\nvar resilientNode = new ResilientExecutionStrategy(node);\n\n// 2. Configure retry options with MaxNodeRestartAttempts > 0\nvar retryOptions = new PipelineRetryOptions\n{\n    MaxNodeRestartAttempts = 3,\n    MaxMaterializedItems = 10000\n};\n\n// 3. Provide error handler that can return RestartNode\nvar pipeline = new PipelineBuilder<string>()\n    .AddNode(resilientNode)\n    .WithErrorHandler(new MyErrorHandler())\n    .WithRetryOptions(retryOptions)\n    .Build();\n"})}),"\n",(0,t.jsx)(n.h4,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Always configure all three prerequisites together"})," - They work as a unit"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use ResilientExecutionStrategy consistently"})," - Apply it to all nodes that need restart capability"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Set realistic MaxNodeRestartAttempts"})," - Usually 2-3 attempts is sufficient"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Configure MaxMaterializedItems appropriately"})," - Balance memory usage with retry capability"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/core-concepts/resilience/configuration-guide",children:"Resilience Configuration Guide"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/architecture/error-handling-architecture",children:"Error Handling Architecture"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/architecture/cancellation-model",children:"Cancellation Model"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var r=i(6540);const t={},s=r.createContext(t);function l(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);