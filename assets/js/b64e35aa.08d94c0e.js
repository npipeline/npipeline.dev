"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[2620],{3255:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"analyzers/configuration","title":"Configuration Analyzers","description":"Detect configuration issues that can cause performance problems, resource leaks, or silent failures in NPipeline pipelines.","source":"@site/docs/analyzers/configuration.md","sourceDirName":"analyzers","slug":"/analyzers/configuration","permalink":"/docs/analyzers/configuration","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Configuration Analyzers","description":"Detect configuration issues that can cause performance problems, resource leaks, or silent failures in NPipeline pipelines.","sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"Best Practice Analyzers","permalink":"/docs/analyzers/best-practices"},"next":{"title":"Code Fix Providers","permalink":"/docs/analyzers/code-fixes"}}');var r=n(74848),t=n(28453);const a={title:"Configuration Analyzers",description:"Detect configuration issues that can cause performance problems, resource leaks, or silent failures in NPipeline pipelines.",sidebar_position:6},l=void 0,o={},d=[{value:"Configuration Analyzers",id:"configuration-analyzers",level:2},{value:"NP9501: Unbounded Materialization Configuration",id:"np9501-unbounded-materialization-configuration",level:3},{value:"Why This Matters",id:"why-this-matters",level:4},{value:"Solution: Set MaxMaterializedItems",id:"solution-set-maxmaterializeditems",level:4},{value:"Choosing the Right MaxMaterializedItems Value",id:"choosing-the-right-maxmaterializeditems-value",level:4},{value:"NP9502: Inappropriate Parallelism Configuration",id:"np9502-inappropriate-parallelism-configuration",level:3},{value:"Why This Matters",id:"why-this-matters-1",level:4},{value:"Parallelism Guidelines",id:"parallelism-guidelines",level:4},{value:"NP9503: Batching Configuration Mismatch",id:"np9503-batching-configuration-mismatch",level:3},{value:"Batching Configuration Guidelines",id:"batching-configuration-guidelines",level:4},{value:"NP9504: Timeout Configuration Issues",id:"np9504-timeout-configuration-issues",level:3},{value:"Timeout Guidelines",id:"timeout-guidelines",level:4},{value:"Configuration Best Practices",id:"configuration-best-practices",level:2},{value:"Configuration",id:"configuration",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const i={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h2,{id:"configuration-analyzers",children:"Configuration Analyzers"}),"\n",(0,r.jsx)(i.p,{children:"Configuration analyzers detect issues with pipeline configuration that can lead to performance problems, resource leaks, or silent failures. These analyzers focus on ensuring that your pipeline configuration is optimal for your workload and doesn't introduce hidden problems."}),"\n",(0,r.jsx)(i.h3,{id:"np9501-unbounded-materialization-configuration",children:"NP9501: Unbounded Materialization Configuration"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"ID:"})," ",(0,r.jsx)(i.code,{children:"NP9501"}),(0,r.jsx)(i.br,{}),"\n",(0,r.jsx)(i.strong,{children:"Severity:"})," Error",(0,r.jsx)(i.br,{}),"\n",(0,r.jsx)(i.strong,{children:"Category:"})," Configuration"]}),"\n",(0,r.jsxs)(i.p,{children:["This analyzer detects when ",(0,r.jsx)(i.code,{children:"PipelineRetryOptions.MaxMaterializedItems"})," is null or missing, which causes unbounded memory growth in ",(0,r.jsx)(i.code,{children:"ResilientExecutionStrategy"})," and silently disables restart functionality. This is a critical configuration error that can lead to ",(0,r.jsx)(i.code,{children:"OutOfMemoryException"})," in production."]}),"\n",(0,r.jsx)(i.h4,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,r.jsx)(i.p,{children:"Unbounded materialization configuration causes:"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Memory Leaks"}),": Unlimited memory growth as items are materialized for retry scenarios"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Silent Failures"}),": Restart functionality is disabled without any indication"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Production Crashes"}),": OutOfMemoryException in high-throughput scenarios"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Resource Exhaustion"}),": System becomes unstable under load"]}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"solution-set-maxmaterializeditems",children:"Solution: Set MaxMaterializedItems"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:"// CORRECT: Set reasonable MaxMaterializedItems\nvar retryOptions = new PipelineRetryOptions(\n    maxRetryCount: 3,\n    baseDelay: TimeSpan.FromSeconds(1),\n    maxDelay: TimeSpan.FromMinutes(1),\n    maxMaterializedItems: 1000); // Bounded memory usage\n"})}),"\n",(0,r.jsx)(i.h4,{id:"choosing-the-right-maxmaterializeditems-value",children:"Choosing the Right MaxMaterializedItems Value"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Scenario"}),(0,r.jsx)(i.th,{children:"Recommended Value"}),(0,r.jsx)(i.th,{children:"Reason"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Small items (< 1KB)"}),(0,r.jsx)(i.td,{children:"1000-10000"}),(0,r.jsx)(i.td,{children:"Low memory per item"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Medium items (1KB-10KB)"}),(0,r.jsx)(i.td,{children:"100-1000"}),(0,r.jsx)(i.td,{children:"Balance memory and performance"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Large items (> 10KB)"}),(0,r.jsx)(i.td,{children:"10-100"}),(0,r.jsx)(i.td,{children:"Prevent memory pressure"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Memory-constrained environments"}),(0,r.jsx)(i.td,{children:"10-50"}),(0,r.jsx)(i.td,{children:"Conservative approach"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"High-throughput scenarios"}),(0,r.jsx)(i.td,{children:"100-1000"}),(0,r.jsx)(i.td,{children:"Depends on item size"})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"np9502-inappropriate-parallelism-configuration",children:"NP9502: Inappropriate Parallelism Configuration"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"ID:"})," ",(0,r.jsx)(i.code,{children:"NP9502"}),(0,r.jsx)(i.br,{}),"\n",(0,r.jsx)(i.strong,{children:"Severity:"})," Warning",(0,r.jsx)(i.br,{}),"\n",(0,r.jsx)(i.strong,{children:"Category:"})," Performance"]}),"\n",(0,r.jsx)(i.p,{children:"This analyzer detects inappropriate parallelism configurations that can cause resource contention, thread pool starvation, or suboptimal resource utilization in NPipeline pipelines."}),"\n",(0,r.jsx)(i.h4,{id:"why-this-matters-1",children:"Why This Matters"}),"\n",(0,r.jsx)(i.p,{children:"Inappropriate parallelism configuration causes:"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Resource Contention"}),": Too much parallelism competes for limited resources"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Thread Pool Starvation"}),": Excessive parallelism exhausts available threads"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Poor Performance"}),": Suboptimal resource utilization reduces throughput"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"System Instability"}),": Overloaded system becomes unpredictable"]}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"parallelism-guidelines",children:"Parallelism Guidelines"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Workload Type"}),(0,r.jsx)(i.th,{children:"Recommended Parallelism"}),(0,r.jsx)(i.th,{children:"PreserveOrdering"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"CPU-bound"}),(0,r.jsx)(i.td,{children:"Processor count"}),(0,r.jsx)(i.td,{children:"Only if required"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"I/O-bound"}),(0,r.jsx)(i.td,{children:"Processor count \xd7 2"}),(0,r.jsx)(i.td,{children:"Only if required"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Mixed"}),(0,r.jsx)(i.td,{children:"Processor count \xd7 1.5"}),(0,r.jsx)(i.td,{children:"Only if required"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Memory-intensive"}),(0,r.jsx)(i.td,{children:"Processor count \xf7 2"}),(0,r.jsx)(i.td,{children:"Only if required"})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"np9503-batching-configuration-mismatch",children:"NP9503: Batching Configuration Mismatch"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"ID:"})," ",(0,r.jsx)(i.code,{children:"NP9503"}),(0,r.jsx)(i.br,{}),"\n",(0,r.jsx)(i.strong,{children:"Severity:"})," Warning",(0,r.jsx)(i.br,{}),"\n",(0,r.jsx)(i.strong,{children:"Category:"})," Performance"]}),"\n",(0,r.jsx)(i.p,{children:"This analyzer detects batching configurations where batch sizes and timeouts are misaligned, causing either excessive latency from large batches or inefficient processing from small batches."}),"\n",(0,r.jsx)(i.h4,{id:"batching-configuration-guidelines",children:"Batching Configuration Guidelines"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Batch Size"}),(0,r.jsx)(i.th,{children:"Recommended Timeout"}),(0,r.jsx)(i.th,{children:"Use Case"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"1-10"}),(0,r.jsx)(i.td,{children:"50-500ms"}),(0,r.jsx)(i.td,{children:"Low-latency scenarios"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"10-100"}),(0,r.jsx)(i.td,{children:"500ms-2s"}),(0,r.jsx)(i.td,{children:"General purpose"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"100-1000"}),(0,r.jsx)(i.td,{children:"1-10s"}),(0,r.jsx)(i.td,{children:"High-throughput scenarios"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"1000+"}),(0,r.jsx)(i.td,{children:"5-30s"}),(0,r.jsx)(i.td,{children:"Batch processing systems"})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"np9504-timeout-configuration-issues",children:"NP9504: Timeout Configuration Issues"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"ID:"})," ",(0,r.jsx)(i.code,{children:"NP9504"}),(0,r.jsx)(i.br,{}),"\n",(0,r.jsx)(i.strong,{children:"Severity:"})," Warning",(0,r.jsx)(i.br,{}),"\n",(0,r.jsx)(i.strong,{children:"Category:"})," Configuration"]}),"\n",(0,r.jsx)(i.p,{children:"This analyzer detects inappropriate timeout configurations that can cause resource leaks, hanging operations, or inefficient resource utilization in NPipeline pipelines."}),"\n",(0,r.jsx)(i.h4,{id:"timeout-guidelines",children:"Timeout Guidelines"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Operation Type"}),(0,r.jsx)(i.th,{children:"Recommended Timeout"}),(0,r.jsx)(i.th,{children:"Maximum Timeout"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Database I/O"}),(0,r.jsx)(i.td,{children:"5-60 seconds"}),(0,r.jsx)(i.td,{children:"5 minutes"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Network I/O"}),(0,r.jsx)(i.td,{children:"1-30 seconds"}),(0,r.jsx)(i.td,{children:"2 minutes"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"File I/O"}),(0,r.jsx)(i.td,{children:"10-120 seconds"}),(0,r.jsx)(i.td,{children:"10 minutes"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"CPU-bound"}),(0,r.jsx)(i.td,{children:"30 seconds-5 minutes"}),(0,r.jsx)(i.td,{children:"30 minutes"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Retry operations"}),(0,r.jsx)(i.td,{children:"1-10 minutes"}),(0,r.jsx)(i.td,{children:"30 minutes"})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"configuration-best-practices",children:"Configuration Best Practices"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Profile Before Optimizing"}),": Measure actual performance when changing configuration"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Start Conservative"}),": Begin with conservative values and adjust based on metrics"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Monitor Resource Usage"}),": Watch memory, CPU, and thread pool metrics"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Test Under Load"}),": Validate configuration with realistic workloads"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(i.p,{children:["Adjust analyzer severity in ",(0,r.jsx)(i.code,{children:".editorconfig"}),":"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ini",children:"# Treat unbounded materialization as errors\ndotnet_diagnostic.NP9501.severity = error\n\n# Treat inappropriate parallelism as warnings\ndotnet_diagnostic.NP9502.severity = warning\n\n# Treat batching mismatches as warnings\ndotnet_diagnostic.NP9503.severity = warning\n\n# Treat timeout issues as warnings\ndotnet_diagnostic.NP9504.severity = warning\n"})}),"\n",(0,r.jsx)(i.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"../../core-concepts/resilience/error-handling",children:"Resilience Configuration"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"../../architecture/performance-characteristics",children:"Performance Characteristics"})}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>l});var s=n(96540);const r={},t=s.createContext(r);function a(e){const i=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:i},e.children)}}}]);