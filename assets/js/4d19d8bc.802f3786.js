"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[888],{2205:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"introduction/faq","title":"Frequently Asked Questions","description":"Answers to common questions about NPipeline.","source":"@site/docs/introduction/faq.md","sourceDirName":"introduction","slug":"/introduction/faq","permalink":"/npipeline.dev/docs/introduction/faq","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"title":"Frequently Asked Questions","description":"Answers to common questions about NPipeline.","sidebar_position":10},"sidebar":"docsSidebar","previous":{"title":"Why NPipeline?","permalink":"/npipeline.dev/docs/introduction/why-npipeline"},"next":{"title":"Troubleshooting Guide","permalink":"/npipeline.dev/docs/introduction/troubleshooting"}}');var s=i(4848),l=i(8453);const t={title:"Frequently Asked Questions",description:"Answers to common questions about NPipeline.",sidebar_position:10},o="Frequently Asked Questions",a={},d=[{value:"General Questions",id:"general-questions",level:2},{value:"What is NPipeline?",id:"what-is-npipeline",level:3},{value:"When should I use NPipeline?",id:"when-should-i-use-npipeline",level:3},{value:"What makes NPipeline different from other pipeline libraries?",id:"what-makes-npipeline-different-from-other-pipeline-libraries",level:3},{value:"Does NPipeline support streaming data?",id:"does-npipeline-support-streaming-data",level:3},{value:"Installation &amp; Setup",id:"installation--setup",level:2},{value:"Which version of .NET is supported?",id:"which-version-of-net-is-supported",level:3},{value:"Do I need to install all the extensions?",id:"do-i-need-to-install-all-the-extensions",level:3},{value:"Can I use NPipeline with ASP.NET Core?",id:"can-i-use-npipeline-with-aspnet-core",level:3},{value:"How do I set up logging?",id:"how-do-i-set-up-logging",level:3},{value:"Architecture &amp; Concepts",id:"architecture--concepts",level:2},{value:"What&#39;s the difference between IPipeline and IPipelineDefinition?",id:"whats-the-difference-between-ipipeline-and-ipipelinedefinition",level:3},{value:"Can a pipeline have multiple sources?",id:"can-a-pipeline-have-multiple-sources",level:3},{value:"What&#39;s the purpose of PipelineContext?",id:"whats-the-purpose-of-pipelinecontext",level:3},{value:"How does data flow between nodes?",id:"how-does-data-flow-between-nodes",level:3},{value:"Performance &amp; Optimization",id:"performance--optimization",level:2},{value:"How do I improve pipeline performance?",id:"how-do-i-improve-pipeline-performance",level:3},{value:"Should I use parallelism?",id:"should-i-use-parallelism",level:3},{value:"How do I handle large files?",id:"how-do-i-handle-large-files",level:3},{value:"What&#39;s the memory footprint?",id:"whats-the-memory-footprint",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"What happens if a transform throws an exception?",id:"what-happens-if-a-transform-throws-an-exception",level:3},{value:"How do I implement retries?",id:"how-do-i-implement-retries",level:3},{value:"Error Codes Reference",id:"error-codes-reference",level:2},{value:"What do the error codes like [NP0101] mean?",id:"what-do-the-error-codes-like-np0101-mean",level:3},{value:"How do I handle invalid data?",id:"how-do-i-handle-invalid-data",level:3},{value:"Testing",id:"testing",level:2},{value:"How do I test a pipeline?",id:"how-do-i-test-a-pipeline",level:3},{value:"Can I test individual nodes?",id:"can-i-test-individual-nodes",level:3},{value:"How do I mock external dependencies?",id:"how-do-i-mock-external-dependencies",level:3},{value:"Integration",id:"integration",level:2},{value:"How do I use NPipeline with a database?",id:"how-do-i-use-npipeline-with-a-database",level:3},{value:"How do I use NPipeline with Message Queues (like RabbitMQ)?",id:"how-do-i-use-npipeline-with-message-queues-like-rabbitmq",level:3},{value:"Can I use NPipeline with dependency injection containers?",id:"can-i-use-npipeline-with-dependency-injection-containers",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"My pipeline is running out of memory",id:"my-pipeline-is-running-out-of-memory",level:3},{value:"Pipeline is slow",id:"pipeline-is-slow",level:3},{value:"Nodes aren&#39;t being registered with DI",id:"nodes-arent-being-registered-with-di",level:3},{value:"CancellationToken not working",id:"cancellationtoken-not-working",level:3},{value:"\u27a1\ufe0f Next Steps",id:"arrow_right-next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"frequently-asked-questions",children:"Frequently Asked Questions"})}),"\n",(0,s.jsx)(n.h2,{id:"general-questions",children:"General Questions"}),"\n",(0,s.jsx)(n.h3,{id:"what-is-npipeline",children:"What is NPipeline?"}),"\n",(0,s.jsx)(n.p,{children:"NPipeline is a high-performance, graph-based streaming data pipeline library for .NET. It allows you to build complex data processing workflows by defining interconnected nodes (sources, transforms, and sinks) that process data efficiently without loading entire datasets into memory."}),"\n",(0,s.jsx)(n.h3,{id:"when-should-i-use-npipeline",children:"When should I use NPipeline?"}),"\n",(0,s.jsx)(n.p,{children:"NPipeline is ideal for:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ETL (Extract, Transform, Load) pipelines"}),"\n",(0,s.jsx)(n.li,{children:"Real-time data processing"}),"\n",(0,s.jsx)(n.li,{children:"Batch file processing (CSV, JSON, XML)"}),"\n",(0,s.jsx)(n.li,{children:"Data validation and cleansing"}),"\n",(0,s.jsx)(n.li,{children:"API data integration"}),"\n",(0,s.jsx)(n.li,{children:"Any scenario requiring efficient data flow processing"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"what-makes-npipeline-different-from-other-pipeline-libraries",children:"What makes NPipeline different from other pipeline libraries?"}),"\n",(0,s.jsx)(n.p,{children:"NPipeline offers:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Graph-based architecture"})," for clear data flow visualization"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"High performance"})," with minimal memory allocations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type safety"})," with compile-time validation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Flexibility"})," to mix sequential and parallel execution"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Production-ready"})," error handling and resilience"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Testability"})," with built-in testing utilities"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"does-npipeline-support-streaming-data",children:"Does NPipeline support streaming data?"}),"\n",(0,s.jsxs)(n.p,{children:["Yes! NPipeline is designed around streaming data using ",(0,s.jsx)(n.code,{children:"IAsyncEnumerable<T>"}),". Data flows through the pipeline without loading everything into memory at once."]}),"\n",(0,s.jsx)(n.h2,{id:"installation--setup",children:"Installation & Setup"}),"\n",(0,s.jsx)(n.h3,{id:"which-version-of-net-is-supported",children:"Which version of .NET is supported?"}),"\n",(0,s.jsxs)(n.p,{children:["NPipeline requires ",(0,s.jsx)(n.strong,{children:".NET 8.0, 9.0, or 10.0"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"do-i-need-to-install-all-the-extensions",children:"Do I need to install all the extensions?"}),"\n",(0,s.jsxs)(n.p,{children:["No. The core ",(0,s.jsx)(n.code,{children:"NPipeline"})," package is all you need. Extensions are optional:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DependencyInjection"})," - For managing dependencies"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parallelism"})," - For parallel execution"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Testing"})," - For unit testing pipelines"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Connectors"})," - For pre-built source/sink nodes"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"can-i-use-npipeline-with-aspnet-core",children:"Can I use NPipeline with ASP.NET Core?"}),"\n",(0,s.jsxs)(n.p,{children:["Yes! NPipeline integrates well with ASP.NET Core via dependency injection. See ",(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/extensions/dependency-injection",children:"Dependency Injection"})," for details."]}),"\n",(0,s.jsx)(n.h3,{id:"how-do-i-set-up-logging",children:"How do I set up logging?"}),"\n",(0,s.jsx)(n.p,{children:"Integrate with Microsoft.Extensions.Logging:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"services.AddLogging(builder => builder.AddConsole());\r\nservices.AddNPipeline(Assembly.GetExecutingAssembly());\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Then inject ",(0,s.jsx)(n.code,{children:"ILogger<T>"})," into your nodes."]}),"\n",(0,s.jsx)(n.h2,{id:"architecture--concepts",children:"Architecture & Concepts"}),"\n",(0,s.jsx)(n.h3,{id:"whats-the-difference-between-ipipeline-and-ipipelinedefinition",children:"What's the difference between IPipeline and IPipelineDefinition?"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"IPipelineDefinition"})," - A blueprint that defines your pipeline structure"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"IPipeline"})," - The compiled, runnable instance created from a definition"]}),"\n",(0,s.jsxs)(n.li,{children:["You implement ",(0,s.jsx)(n.code,{children:"IPipelineDefinition"}),", then ",(0,s.jsx)(n.code,{children:"PipelineRunner"})," executes it"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"can-a-pipeline-have-multiple-sources",children:"Can a pipeline have multiple sources?"}),"\n",(0,s.jsxs)(n.p,{children:["Yes. Multiple source nodes can connect to the same transform or separate transforms. See ",(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/core-concepts/common-patterns",children:"Common Patterns"})," for examples."]}),"\n",(0,s.jsx)(n.h3,{id:"whats-the-purpose-of-pipelinecontext",children:"What's the purpose of PipelineContext?"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"PipelineContext"})," carries runtime information through the pipeline:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cancellation tokens"}),"\n",(0,s.jsx)(n.li,{children:"Shared state between nodes"}),"\n",(0,s.jsx)(n.li,{children:"Logging and observability services"}),"\n",(0,s.jsx)(n.li,{children:"Custom application data"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"how-does-data-flow-between-nodes",children:"How does data flow between nodes?"}),"\n",(0,s.jsxs)(n.p,{children:["Data flows through ",(0,s.jsx)(n.code,{children:"IDataPipe<T>"})," objects:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Source nodes produce an ",(0,s.jsx)(n.code,{children:"IDataPipe<T>"})]}),"\n",(0,s.jsxs)(n.li,{children:["Transforms consume it and produce a new ",(0,s.jsx)(n.code,{children:"IDataPipe<T>"})]}),"\n",(0,s.jsxs)(n.li,{children:["Sinks consume the final ",(0,s.jsx)(n.code,{children:"IDataPipe<T>"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"performance--optimization",children:"Performance & Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"how-do-i-improve-pipeline-performance",children:"How do I improve pipeline performance?"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Profile first"})," - Identify actual bottlenecks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use parallelism"})," - For CPU-bound operations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Batch operations"})," - For I/O operations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Stream efficiently"})," - Don't load all data at once"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Minimize allocations"})," - Reduce garbage collection pressure"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"should-i-use-parallelism",children:"Should I use parallelism?"}),"\n",(0,s.jsx)(n.p,{children:"Use parallelism when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Operations are CPU-intensive"}),"\n",(0,s.jsx)(n.li,{children:"Operations are independent"}),"\n",(0,s.jsx)(n.li,{children:"You have available CPU cores"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Don't use parallelism when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Operations are I/O-bound and sequential"}),"\n",(0,s.jsx)(n.li,{children:"Order must be strictly preserved"}),"\n",(0,s.jsx)(n.li,{children:"Resource contention occurs"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"how-do-i-handle-large-files",children:"How do I handle large files?"}),"\n",(0,s.jsx)(n.p,{children:"Stream the data:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public class LargeFileSource : SourceNode<Line>\r\n{\r\n    private readonly string _filePath;\r\n\r\n    public override IDataPipe<Line> ExecuteAsync(PipelineContext context, CancellationToken cancellationToken)\r\n    {\r\n        static IAsyncEnumerable<Line> ReadLinesAsync(string path, CancellationToken ct)\r\n        {\r\n            return Read();\r\n\r\n            async IAsyncEnumerable<Line> Read()\r\n            {\r\n                using var reader = new StreamReader(path);\r\n                string? line;\r\n                while ((line = await reader.ReadLineAsync(ct)) != null)\r\n                {\r\n                    yield return new Line(line);\r\n                }\r\n            }\r\n        }\r\n\r\n        return new StreamingDataPipe<Line>(ReadLinesAsync(_filePath, cancellationToken));\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"whats-the-memory-footprint",children:"What's the memory footprint?"}),"\n",(0,s.jsx)(n.p,{children:"NPipeline has minimal memory overhead. Most memory usage is from your data. By streaming, you keep only a small window of data in memory at any time."}),"\n",(0,s.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.h3,{id:"what-happens-if-a-transform-throws-an-exception",children:"What happens if a transform throws an exception?"}),"\n",(0,s.jsx)(n.p,{children:"By default, the exception propagates up and stops the pipeline. Handle errors explicitly:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'try\r\n{\r\n    return await ProcessAsync(item);\r\n}\r\ncatch (Exception ex)\r\n{\r\n    logger.LogError(ex, "Processing failed");\r\n    throw; // or handle gracefully\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"how-do-i-implement-retries",children:"How do I implement retries?"}),"\n",(0,s.jsx)(n.p,{children:"NPipeline provides several built-in retry mechanisms:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"1. Item-level retries"})," - Retry individual items that fail:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// Configure max retries per item\r\nbuilder.WithRetryOptions(opt => opt.With(maxItemRetries: 3));\r\n\r\n// In your error handler, return Retry for transient failures\r\npublic Task<NodeErrorDecision> HandleAsync(...)\r\n{\r\n    if (exception is TransientException)\r\n        return Task.FromResult(NodeErrorDecision.Retry);\r\n\r\n    return Task.FromResult(NodeErrorDecision.Skip);\r\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"2. Node-level restarts"})," - Restart entire node streams on failure:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// Enable resilience and configure restart limits\r\nvar myNode = builder\r\n    .AddTransform<MyTransform, Input, Output>("myTransform")\r\n    .WithResilience(builder)\r\n    .WithRetryOptions(builder, opt => opt.With(\r\n        maxNodeRestartAttempts: 3,\r\n        maxMaterializedItems: 5000\r\n    ));\r\n\r\n// In your pipeline error handler, return RestartNode\r\npublic Task<PipelineErrorDecision> HandleNodeFailureAsync(...)\r\n{\r\n    if (exception is TimeoutException)\r\n        return Task.FromResult(PipelineErrorDecision.RestartNode);\r\n\r\n    return Task.FromResult(PipelineErrorDecision.FailPipeline);\r\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"3. Circuit breaker"})," - Prevent cascading failures:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// Configure circuit breaker through PipelineRetryOptions\r\nvar retryOptions = new PipelineRetryOptions(\r\n    MaxItemRetries: 3,\r\n    MaxNodeRestartAttempts: 2,\r\n    MaxSequentialNodeAttempts: 5,\r\n    CircuitBreakerOptions: new PipelineCircuitBreakerOptions(\r\n        failureThreshold: 5,\r\n        openDuration: TimeSpan.FromMinutes(1),\r\n        samplingWindow: TimeSpan.FromMinutes(5),\r\n        thresholdType: CircuitBreakerThresholdType.ConsecutiveFailures\r\n    )\r\n);\r\nvar context = PipelineContext.WithRetry(retryOptions);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For advanced patterns beyond simple retry counts, integrate external libraries like ",(0,s.jsx)(n.a,{href:"https://github.com/App-vNext/Polly",children:"Polly"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// Exponential backoff with Polly\r\nvar policy = Policy\r\n    .Handle<HttpRequestException>()\r\n    .WaitAndRetryAsync(3, attempt => TimeSpan.FromSeconds(Math.Pow(2, attempt)));\r\n\r\nawait policy.ExecuteAsync(async () => await CallServiceAsync());\n"})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/core-concepts/pipeline-execution/error-handling#configuring-retries",children:"Configuring Retries"})," for detailed examples and best practices."]}),"\n",(0,s.jsx)(n.h2,{id:"error-codes-reference",children:"Error Codes Reference"}),"\n",(0,s.jsx)(n.h3,{id:"what-do-the-error-codes-like-np0101-mean",children:"What do the error codes like [NP0101] mean?"}),"\n",(0,s.jsx)(n.p,{children:"NPipeline uses standardized error codes (NP prefix) to help you quickly identify and resolve issues:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NP01xx"})," - Graph Validation Errors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NP02xx"})," - Type Mismatch and Conversion Errors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NP03xx"})," - Execution Errors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NP04xx"})," - Configuration Errors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NP05xx"})," - Resource and Capacity Errors"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["See the ",(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/reference/error-codes",children:"Error Codes Reference"})," for a complete list of all error codes, their causes, and solutions."]}),"\n",(0,s.jsx)(n.h3,{id:"how-do-i-handle-invalid-data",children:"How do I handle invalid data?"}),"\n",(0,s.jsx)(n.p,{children:"Route invalid data to a separate error stream or log it:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'public override Task<Order> ExecuteAsync(Order item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    if (item.Price < 0)\r\n    {\r\n        logger.LogWarning($"Invalid price: {item.Price}");\r\n        throw new ValidationException("Price cannot be negative");\r\n    }\r\n    return Task.FromResult(item);\r\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,s.jsx)(n.h3,{id:"how-do-i-test-a-pipeline",children:"How do I test a pipeline?"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"InMemorySourceNode"})," and ",(0,s.jsx)(n.code,{children:"InMemorySinkNode"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"var context = new PipelineContext();\r\ncontext.Items[typeof(InMemorySourceNode<int>).FullName!] = new[] { 1, 2, 3 };\r\n\r\nvar runner = new PipelineRunner();\r\nawait runner.RunAsync<TestPipeline>(context);\r\n\r\n// Retrieve results\r\nvar sink = context.Items[typeof(InMemorySinkNode<int>).FullName!] as InMemorySinkNode<int>;\r\nvar results = await sink!.Completion;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/extensions/testing",children:"Testing Pipelines"})," for details."]}),"\n",(0,s.jsx)(n.h3,{id:"can-i-test-individual-nodes",children:"Can I test individual nodes?"}),"\n",(0,s.jsxs)(n.p,{children:["Yes. Call ",(0,s.jsx)(n.code,{children:"ExecuteAsync"})," directly with test data:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"var transform = new MyTransform();\r\nvar context = new PipelineContext();\r\nvar result = await transform.ExecuteAsync(testData, context, CancellationToken.None);\r\nAssert.Equal(expected, result);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"how-do-i-mock-external-dependencies",children:"How do I mock external dependencies?"}),"\n",(0,s.jsx)(n.p,{children:"Use dependency injection with mock services:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"var mockService = new Mock<IMyService>();\r\nvar node = new MyNode(mockService.Object);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"integration",children:"Integration"}),"\n",(0,s.jsx)(n.h3,{id:"how-do-i-use-npipeline-with-a-database",children:"How do I use NPipeline with a database?"}),"\n",(0,s.jsx)(n.p,{children:"Implement custom source and sink nodes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public class DatabaseSource : SourceNode<Customer>\r\n{\r\n    private readonly string _connectionString;\r\n\r\n    public override IDataPipe<Customer> ExecuteAsync(PipelineContext context, CancellationToken cancellationToken)\r\n    {\r\n        static IAsyncEnumerable<Customer> ReadAsync(string connStr, CancellationToken ct)\r\n        {\r\n            return Read();\r\n\r\n            async IAsyncEnumerable<Customer> Read()\r\n            {\r\n                using var connection = new SqlConnection(connStr);\r\n                await connection.OpenAsync(ct);\r\n                // Read and yield customers\r\n            }\r\n        }\r\n\r\n        return new StreamingDataPipe<Customer>(ReadAsync(_connectionString, cancellationToken));\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"how-do-i-use-npipeline-with-message-queues-like-rabbitmq",children:"How do I use NPipeline with Message Queues (like RabbitMQ)?"}),"\n",(0,s.jsx)(n.p,{children:"Implement a source node that reads from the queue:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public class QueueSource : SourceNode<Message>\r\n{\r\n    private readonly IQueueClient _client;\r\n\r\n    public override IDataPipe<Message> ExecuteAsync(PipelineContext context, CancellationToken cancellationToken)\r\n    {\r\n        static IAsyncEnumerable<Message> ReadAsync(IQueueClient client, CancellationToken ct)\r\n        {\r\n            return Read();\r\n\r\n            async IAsyncEnumerable<Message> Read()\r\n            {\r\n                while (!ct.IsCancellationRequested)\r\n                {\r\n                    var message = await client.ReceiveAsync(ct);\r\n                    if (message != null)\r\n                    {\r\n                        yield return message;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return new StreamingDataPipe<Message>(ReadAsync(_client, cancellationToken));\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"can-i-use-npipeline-with-dependency-injection-containers",children:"Can I use NPipeline with dependency injection containers?"}),"\n",(0,s.jsxs)(n.p,{children:["Yes, with the ",(0,s.jsx)(n.code,{children:"NPipeline.Extensions.DependencyInjection"})," package:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"services.AddNPipeline(Assembly.GetExecutingAssembly());\r\n// Your nodes are automatically registered and resolved\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"my-pipeline-is-running-out-of-memory",children:"My pipeline is running out of memory"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," Likely loading all data at once instead of streaming."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution:"})," Use async enumerable:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// BAD - loads all data\r\nvar allData = database.GetAllRecords().ToList(); // \u274c\r\nreturn Task.FromResult(new StreamingDataPipe<T>(allData.ToAsyncEnumerable()));\r\n\r\n// GOOD - streams data\r\nasync IAsyncEnumerable<T> GetDataAsync()\r\n{\r\n    foreach (var record in database.GetAllRecords()) // \u2705 Lazy enumeration\r\n        yield return record;\r\n}\r\nreturn Task.FromResult(new StreamingDataPipe<T>(GetDataAsync()));\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pipeline-is-slow",children:"Pipeline is slow"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution:"})," Profile to find the bottleneck:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Check which transform is slow"}),"\n",(0,s.jsx)(n.li,{children:"Consider parallelism if CPU-bound"}),"\n",(0,s.jsx)(n.li,{children:"Consider batching if I/O-bound"}),"\n",(0,s.jsx)(n.li,{children:"Minimize allocations"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"nodes-arent-being-registered-with-di",children:"Nodes aren't being registered with DI"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," Assembly not scanned."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution:"})," Pass assembly to ",(0,s.jsx)(n.code,{children:"AddNPipeline"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"services.AddNPipeline(Assembly.GetExecutingAssembly()); // \u2705\r\n// NOT just: services.AddNPipeline(); \u274c\n"})}),"\n",(0,s.jsx)(n.h3,{id:"cancellationtoken-not-working",children:"CancellationToken not working"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," Not checking the token in nodes."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution:"})," Check and respect the token:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public override async Task ExecuteAsync(IDataPipe<T> input, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    await foreach (var item in input.WithCancellation(cancellationToken)) // \u2705\r\n    {\r\n        cancellationToken.ThrowIfCancellationRequested(); // \u2705\r\n        // Process item\r\n    }\r\n}\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"arrow_right-next-steps",children:["\u27a1\ufe0f"," Next Steps"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/getting-started/installation",children:"Getting Started"})})," - Installation and quick start"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/core-concepts/common-patterns",children:"Common Patterns"})})," - See practical examples"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/core-concepts/best-practices",children:"Best Practices"})})," - Design guidelines"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/introduction/troubleshooting",children:"Troubleshooting"})})," - Common issues and solutions"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var r=i(6540);const s={},l=r.createContext(s);function t(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);