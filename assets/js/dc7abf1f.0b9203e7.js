"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[5233],{4608:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"architecture/index","title":"Architecture Overview","description":"Deep dive into NPipeline\'s design, internals, and how it works.","source":"@site/docs/architecture/index.md","sourceDirName":"architecture","slug":"/architecture/","permalink":"/docs/architecture/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"title":"Architecture Overview","description":"Deep dive into NPipeline\'s design, internals, and how it works.","sidebar_position":12},"sidebar":"docsSidebar","previous":{"title":"Thread Safety Guidelines","permalink":"/docs/core-concepts/thread-safety"},"next":{"title":"Core Concepts","permalink":"/docs/architecture/core-concepts"}}');var t=i(4848),s=i(8453);const c={title:"Architecture Overview",description:"Deep dive into NPipeline's design, internals, and how it works.",sidebar_position:12},l="Architecture Overview",a={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Understanding NPipeline Architecture",id:"understanding-npipeline-architecture",level:2},{value:"WHY: Design Philosophy &amp; Principles",id:"why-design-philosophy--principles",level:2},{value:"Design Principles",id:"design-principles",level:3},{value:"Optimization Principles",id:"optimization-principles",level:3},{value:"WHAT: Internal Architecture &amp; Mechanisms",id:"what-internal-architecture--mechanisms",level:2},{value:"Core Concepts (Architecture)",id:"core-concepts-architecture",level:3},{value:"Component Architecture",id:"component-architecture",level:3},{value:"Execution Flow",id:"execution-flow",level:3},{value:"Data Flow Details",id:"data-flow-details",level:3},{value:"Execution Plan Caching",id:"execution-plan-caching",level:3},{value:"Error Handling Architecture",id:"error-handling-architecture",level:3},{value:"Cancellation Model",id:"cancellation-model",level:3},{value:"Dependency Injection Integration",id:"dependency-injection-integration",level:3},{value:"Node Instantiation",id:"node-instantiation",level:3},{value:"Performance Characteristics",id:"performance-characteristics",level:3},{value:"Extension Points",id:"extension-points",level:3},{value:"High-Level Architecture Diagram",id:"high-level-architecture-diagram",level:2},{value:"See Also",id:"see-also",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"architecture-overview",children:"Architecture Overview"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"This section explains WHY NPipeline is designed the way it is and WHAT happens under the hood."})," It covers design decisions, performance optimizations, and engineering principles that make NPipeline fast and reliable."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Ready to build pipelines?"})," Start with ",(0,t.jsx)(n.a,{href:"/docs/core-concepts",children:"Core Concepts"})," for practical HOW TO guides."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(n.p,{children:"Before understanding NPipeline architecture, you should be familiar with:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/core-concepts",children:"Core Concepts Overview"})," - Basic NPipeline concepts and terminology"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/core-concepts/nodes/",children:"Nodes Overview"})," - Understanding the fundamental building blocks"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["This section explains ",(0,t.jsx)(n.strong,{children:"how NPipeline works internally"})," - design decisions,\r\nperformance optimizations, and engineering principles that make NPipeline fast\r\nand reliable."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"For implementation guides"}),", see ",(0,t.jsx)(n.a,{href:"/docs/core-concepts",children:"Core Concepts"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"understanding-npipeline-architecture",children:"Understanding NPipeline Architecture"}),"\n",(0,t.jsx)(n.p,{children:"NPipeline's architecture is designed around several core principles: graph-based data flow, lazy evaluation, streaming-first design, and composability. This section breaks down each major architectural component to help you understand how system works internally."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"why-design-philosophy--principles",children:"WHY: Design Philosophy & Principles"}),"\n",(0,t.jsx)(n.p,{children:"These sections explain the design decisions behind NPipeline:"}),"\n",(0,t.jsx)(n.h3,{id:"design-principles",children:(0,t.jsx)(n.a,{href:"/docs/architecture/design-principles",children:"Design Principles"})}),"\n",(0,t.jsx)(n.p,{children:"Learn the core design philosophy:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Separation of Concerns - How NPipeline divides responsibilities"}),"\n",(0,t.jsx)(n.li,{children:"Lazy Evaluation - Why data is only processed when consumed"}),"\n",(0,t.jsx)(n.li,{children:"Streaming First - Why NPipeline treats all data as streams"}),"\n",(0,t.jsx)(n.li,{children:"Composability - How components work together"}),"\n",(0,t.jsx)(n.li,{children:"Testability - How design enables effective testing"}),"\n",(0,t.jsx)(n.li,{children:"Observability - How to understand what's happening internally"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"optimization-principles",children:(0,t.jsx)(n.a,{href:"/docs/architecture/optimization-principles",children:"Optimization Principles"})}),"\n",(0,t.jsx)(n.p,{children:"Understand how NPipeline achieves exceptional performance:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Plan-based execution eliminating per-item decisions"}),"\n",(0,t.jsx)(n.li,{children:"Zero reflection during steady state"}),"\n",(0,t.jsx)(n.li,{children:"ICountable for right-sized allocations"}),"\n",(0,t.jsx)(n.li,{children:"ValueTask optimization (up to 90% GC reduction)"}),"\n",(0,t.jsx)(n.li,{children:"Streaming-first design with lazy evaluation"}),"\n",(0,t.jsx)(n.li,{children:"Memory layout and cache efficiency"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"what-internal-architecture--mechanisms",children:"WHAT: Internal Architecture & Mechanisms"}),"\n",(0,t.jsx)(n.p,{children:"These sections explain how NPipeline works internally:"}),"\n",(0,t.jsx)(n.h3,{id:"core-concepts-architecture",children:(0,t.jsx)(n.a,{href:"/docs/architecture/core-concepts",children:"Core Concepts (Architecture)"})}),"\n",(0,t.jsx)(n.p,{children:"Learn the fundamental architectural building blocks:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Graph-Based Architecture (DAGs)"}),"\n",(0,t.jsx)(n.li,{children:"Node Types (Source, Transform, Sink)"}),"\n",(0,t.jsxs)(n.li,{children:["Streaming Data Model with ",(0,t.jsx)(n.code,{children:"IAsyncEnumerable<T>"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"component-architecture",children:(0,t.jsx)(n.a,{href:"/docs/architecture/component-architecture",children:"Component Architecture"})}),"\n",(0,t.jsx)(n.p,{children:"Explore the major system components and their roles:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Pipeline Definition (",(0,t.jsx)(n.code,{children:"IPipelineDefinition"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Pipeline Builder"}),"\n",(0,t.jsx)(n.li,{children:"Pipeline Context"}),"\n",(0,t.jsx)(n.li,{children:"Pipeline Runner"}),"\n",(0,t.jsx)(n.li,{children:"Node Execution Model"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"execution-flow",children:(0,t.jsx)(n.a,{href:"/docs/architecture/execution-flow",children:"Execution Flow"})}),"\n",(0,t.jsx)(n.p,{children:"Understand how pipelines execute data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Sequential Execution (default)"}),"\n",(0,t.jsx)(n.li,{children:"Parallel Execution patterns"}),"\n",(0,t.jsx)(n.li,{children:"Data flow through pipeline graph"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"data-flow-details",children:(0,t.jsx)(n.a,{href:"/docs/architecture/data-flow",children:"Data Flow Details"})}),"\n",(0,t.jsx)(n.p,{children:"Deep dive into how data moves through the system:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"How Data Pipes Work"}),"\n",(0,t.jsx)(n.li,{children:"Lazy Evaluation principles"}),"\n",(0,t.jsx)(n.li,{children:"Memory efficiency patterns"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"execution-plan-caching",children:(0,t.jsx)(n.a,{href:"/docs/architecture/execution-plan-caching",children:"Execution Plan Caching"})}),"\n",(0,t.jsx)(n.p,{children:"Learn how NPipeline caches compiled execution plans:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Why Plan Caching Matters (300-500\u03bcs per run overhead)"}),"\n",(0,t.jsx)(n.li,{children:"How the Caching System Works"}),"\n",(0,t.jsx)(n.li,{children:"When Caching is Applied & When It's Disabled"}),"\n",(0,t.jsx)(n.li,{children:"Performance Impact (75% reduction for subsequent runs)"}),"\n",(0,t.jsx)(n.li,{children:"Custom Cache Implementations (Redis, Distributed, etc.)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"error-handling-architecture",children:(0,t.jsx)(n.a,{href:"/docs/architecture/error-handling-architecture",children:"Error Handling Architecture"})}),"\n",(0,t.jsx)(n.p,{children:"Understand error propagation and handling:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Error Propagation mechanisms"}),"\n",(0,t.jsx)(n.li,{children:"Error Containment strategies"}),"\n",(0,t.jsx)(n.li,{children:"Dead-Letter Handling for failed items"}),"\n",(0,t.jsx)(n.li,{children:"Supporting Components (Lineage, Dead Letter Sinks, State Registry)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"cancellation-model",children:(0,t.jsx)(n.a,{href:"/docs/architecture/cancellation-model",children:"Cancellation Model"})}),"\n",(0,t.jsx)(n.p,{children:"Learn about graceful shutdown and cancellation:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Token Propagation through pipeline"}),"\n",(0,t.jsx)(n.li,{children:"Node cancellation responsibilities"}),"\n",(0,t.jsx)(n.li,{children:"Graceful termination patterns"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"dependency-injection-integration",children:(0,t.jsx)(n.a,{href:"/docs/architecture/dependency-injection",children:"Dependency Injection Integration"})}),"\n",(0,t.jsx)(n.p,{children:"Learn how DI is integrated into NPipeline:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Automatic Node Resolution"}),"\n",(0,t.jsx)(n.li,{children:"Injecting Dependencies into Nodes"}),"\n",(0,t.jsx)(n.li,{children:"Service Provider Integration"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"node-instantiation",children:(0,t.jsx)(n.a,{href:"/docs/architecture/node-instantiation",children:"Node Instantiation"})}),"\n",(0,t.jsx)(n.p,{children:"Understand how nodes are created and optimized:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Compiled Factory Pattern for 3-5x faster instantiation"}),"\n",(0,t.jsx)(n.li,{children:"Node Constructor Patterns (Parameterless, Mixed, DI-only)"}),"\n",(0,t.jsx)(n.li,{children:"Factory Selection and Trade-offs"}),"\n",(0,t.jsx)(n.li,{children:"Analyzer Support (NP9505) with automatic code fixes"}),"\n",(0,t.jsx)(n.li,{children:"Performance Characteristics"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-characteristics",children:(0,t.jsx)(n.a,{href:"/docs/architecture/performance-characteristics",children:"Performance Characteristics"})}),"\n",(0,t.jsx)(n.p,{children:"Understand performance implications:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Memory Usage patterns"}),"\n",(0,t.jsx)(n.li,{children:"Throughput characteristics"}),"\n",(0,t.jsx)(n.li,{children:"Scalability strategies (vertical and horizontal)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"extension-points",children:(0,t.jsx)(n.a,{href:"/docs/architecture/extension-points",children:"Extension Points"})}),"\n",(0,t.jsx)(n.p,{children:"Discover how to extend NPipeline:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Custom Nodes"}),"\n",(0,t.jsx)(n.li,{children:"Custom Execution Strategies"}),"\n",(0,t.jsx)(n.li,{children:"Custom Context Data"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"high-level-architecture-diagram",children:"High-Level Architecture Diagram"}),"\n",(0,t.jsx)(n.mermaid,{value:'graph TD\r\n    subgraph "Pipeline Definition Phase"\r\n        PD[PipelineDefinition] --\x3e|Defines| PB[PipelineBuilder]\r\n        PB --\x3e|Creates| Nodes[Nodes]\r\n        PB --\x3e|Connects| Graph[Execution Graph]\r\n    end\r\n\r\n    subgraph "Pipeline Execution Phase"\r\n        PR[PipelineRunner] --\x3e|Instantiates| PD\r\n        PR --\x3e|Creates| PB\r\n        PR --\x3e|Provides| PC[PipelineContext]\r\n        PC --\x3e|Contains| Items[Shared Items]\r\n        PC --\x3e|Provides| SP[ServiceProvider]\r\n        PC --\x3e|Propagates| CT[CancellationToken]\r\n\r\n        subgraph "Data Flow"\r\n            SN[SourceNode] --\x3e|Produces| DP1[IDataPipe<T>]\r\n            DP1 --\x3e|Consumes| TN1[TransformNode]\r\n            TN1 --\x3e|Transforms| DP2[IDataPipe<TOut>]\r\n            DP2 --\x3e|Consumes| TN2[TransformNode]\r\n            TN2 --\x3e|Transforms| DP3[IDataPipe<TOut2>]\r\n            DP3 --\x3e|Consumes| SK[SinkNode]\r\n        end\r\n\r\n        subgraph "Supporting Components"\r\n            PLSP[IPipelineLineageSinkProvider] --\x3e|Tracks| Lineage[Data Lineage]\r\n            DLS[IDeadLetterSink] --\x3e|Handles| FailedItems[Failed Items]\r\n            SR[StatefulRegistry] --\x3e|Manages| State[Node State]\r\n        end\r\n    end\r\n\r\n    Graph --\x3e|Executes| SN\r\n    PC --\x3e|Shared Context| SN\r\n    PC --\x3e|Shared Context| TN1\r\n    PC --\x3e|Shared Context| TN2\r\n    PC --\x3e|Shared Context| SK\r\n\r\n    Lineage --\x3e|Observes| DP1\r\n    Lineage --\x3e|Observes| DP2\r\n    Lineage --\x3e|Observes| DP3\r\n\r\n    FailedItems --\x3e|Captured by| DLS\r\n    State --\x3e|Tracked by| SR\r\n\r\n    style PD fill:#e1f5fe\r\n    style PB fill:#f3e5f5\r\n    style PR fill:#e8f5e9\r\n    style PC fill:#fff3e0\r\n    style SN fill:#e3f2fd\r\n    style TN1 fill:#e3f2fd\r\n    style TN2 fill:#e3f2fd\r\n    style SK fill:#e3f2fd\r\n    style PLSP fill:#fff8e1\r\n    style DLS fill:#ffebee\r\n    style SR fill:#f1f8e9'}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Figure: NPipeline architecture showing relationship between core components, data flow through graph-based pipeline, and supporting components"})}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/core-concepts",children:"Core Concepts Overview"})," - For implementation guides and practical usage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/architecture/optimization-principles",children:"Optimization Principles"})," - Deep dive into performance optimizations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/architecture/component-architecture",children:"Component Architecture"})," - Detailed component interactions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/architecture/execution-flow",children:"Execution Flow"})," - How data flows through the pipeline"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/architecture/design-principles",children:"Design Principles"})," - Core philosophy behind NPipeline's design"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/architecture/performance-characteristics",children:"Performance Characteristics"})," - Understanding performance implications"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/architecture/extension-points",children:"Extension Points"})," - How to extend NPipeline functionality"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Start with ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/docs/architecture/core-concepts",children:"Core Concepts"})})," to understand fundamental building blocks"]}),"\n",(0,t.jsxs)(n.li,{children:["Explore ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/docs/architecture/component-architecture",children:"Component Architecture"})})," to see how components interact"]}),"\n",(0,t.jsxs)(n.li,{children:["Dive into ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/docs/architecture/optimization-principles",children:"Optimization Principles"})})," to understand why NPipeline is fast"]}),"\n",(0,t.jsxs)(n.li,{children:["Review ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/docs/core-concepts/common-patterns",children:"Common Patterns"})})," for real-world examples"]}),"\n",(0,t.jsxs)(n.li,{children:["Review ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/docs/core-concepts/best-practices",children:"Best Practices"})})," for design guidelines"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>l});var r=i(6540);const t={},s=r.createContext(t);function c(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);