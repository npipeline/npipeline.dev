"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[7887],{1749:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"core-concepts/pipelinebuilder","title":"PipelineBuilder","description":"Learn how to use the PipelineBuilder to fluently define and construct your pipeline.","source":"@site/docs/core-concepts/pipelinebuilder.md","sourceDirName":"core-concepts","slug":"/core-concepts/pipelinebuilder","permalink":"/docs/core-concepts/pipelinebuilder","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"PipelineBuilder","description":"Learn how to use the PipelineBuilder to fluently define and construct your pipeline.","sidebar_position":5,"slug":"/core-concepts/pipelinebuilder"},"sidebar":"docsSidebar","previous":{"title":"Pipeline Definition (IPipelineDefinition, PipelineBuilder)","permalink":"/docs/core-concepts/pipeline-definition"},"next":{"title":"Pipeline Execution","permalink":"/docs/core-concepts/pipeline-execution"}}');var t=i(4848),l=i(8453);const d={title:"PipelineBuilder",description:"Learn how to use the PipelineBuilder to fluently define and construct your pipeline.",sidebar_position:5,slug:"/core-concepts/pipelinebuilder"},s="PipelineBuilder",o={},c=[{value:"The Core Workflow",id:"the-core-workflow",level:2},{value:"Step 1: Adding Nodes",id:"step-1-adding-nodes",level:2},{value:"Example",id:"example",level:3},{value:"Step 2: Connecting Nodes",id:"step-2-connecting-nodes",level:2},{value:"Step 3: Building the Pipeline",id:"step-3-building-the-pipeline",level:2},{value:"Putting It All Together",id:"putting-it-all-together",level:2},{value:"\u27a1\ufe0f Next Steps",id:"arrow_right-next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"pipelinebuilder",children:"PipelineBuilder"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"PipelineBuilder"})," is a fluent API that provides a simple and expressive way to define the structure of your data pipeline. It is the primary tool for adding nodes, connecting them, and compiling the final, runnable ",(0,t.jsx)(n.code,{children:"IPipeline"})," instance."]}),"\n",(0,t.jsx)(n.h2,{id:"the-core-workflow",children:"The Core Workflow"}),"\n",(0,t.jsxs)(n.p,{children:["Building a pipeline with ",(0,t.jsx)(n.code,{children:"PipelineBuilder"})," involves three main steps:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Add Nodes"}),": Use methods like ",(0,t.jsx)(n.code,{children:"AddSource"}),", ",(0,t.jsx)(n.code,{children:"AddTransform"}),", and ",(0,t.jsx)(n.code,{children:"AddSink"})," to register the processing units of your pipeline."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Connect Nodes"}),": Use the ",(0,t.jsx)(n.code,{children:"Connect"})," method to define the flow of data between the nodes you have added."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Build the Pipeline"}),": Call the ",(0,t.jsx)(n.code,{children:"Build"})," method to validate your configuration and create an executable ",(0,t.jsx)(n.code,{children:"IPipeline"})," instance."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-1-adding-nodes",children:"Step 1: Adding Nodes"}),"\n",(0,t.jsxs)(n.p,{children:["You start by creating a ",(0,t.jsx)(n.code,{children:"PipelineBuilder"})," instance and then adding your nodes. Each ",(0,t.jsx)(n.code,{children:"Add"})," method returns a ",(0,t.jsx)(n.code,{children:"Handle"})," object, which is a lightweight reference to the node that you will use in the next step to create connections."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AddSource<TNode, TOut>(name)"}),": Adds a source node."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AddTransform<TNode, TIn, TOut>(name)"}),": Adds a transform node."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AddSink<TNode, TIn>(name)"}),": Adds a sink node."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Each method takes the node's class type as a generic parameter and an optional unique name."}),"\n",(0,t.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"using NPipeline;\r\nusing NPipeline.DataFlow;\r\nusing NPipeline.Nodes;\r\nusing NPipeline.Pipeline;\r\n\r\npublic static class Program\r\n{\r\n    public static async Task Main(string[] args)\r\n    {\r\n        var builder = new PipelineBuilder();\r\n\r\n        // Add nodes and store their handles\r\n        var sourceHandle = builder.AddSource<HelloWorldSource, string>();\r\n        var transformHandle = builder.AddTransform<UppercaseTransform, string, string>();\r\n        var sinkHandle = builder.AddSink<ConsoleSink, string>();\r\n\r\n        // Connect the source to the transform\r\n        builder.Connect(sourceHandle, transformHandle);\r\n\r\n        // Connect the transform to the sink\r\n        builder.Connect(transformHandle, sinkHandle);\r\n\r\n        var pipeline = builder.Build();\r\n        var runner = new PipelineRunner();\r\n        await runner.RunAsync(pipeline);\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-2-connecting-nodes",children:"Step 2: Connecting Nodes"}),"\n",(0,t.jsxs)(n.p,{children:["After adding your nodes, you define the data flow by calling the ",(0,t.jsx)(n.code,{children:"Connect"})," method. This method takes the handles of the source and target nodes as arguments."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// Connect the source to the transform\r\nbuilder.Connect(sourceHandle, transformHandle);\r\n\r\n// Connect the transform to the sink\r\nbuilder.Connect(transformHandle, sinkHandle);\n"})}),"\n",(0,t.jsx)(n.p,{children:"The builder ensures that the output type of the source node matches the input type of the target node, providing compile-time safety."}),"\n",(0,t.jsx)(n.h2,{id:"step-3-building-the-pipeline",children:"Step 3: Building the Pipeline"}),"\n",(0,t.jsxs)(n.p,{children:["Once all nodes are added and connected, you call the ",(0,t.jsx)(n.code,{children:"Build()"})," method. This method performs several crucial actions:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"It validates the graph to ensure it is a valid, runnable pipeline (e.g., no cycles, no disconnected nodes)."}),"\n",(0,t.jsxs)(n.li,{children:["It compiles the node definitions and connections into an optimized, executable ",(0,t.jsx)(n.code,{children:"Pipeline"})," instance."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"Pipeline pipeline = builder.Build();\n"})}),"\n",(0,t.jsx)(n.h2,{id:"putting-it-all-together",children:"Putting It All Together"}),"\n",(0,t.jsx)(n.p,{children:"Here is a complete example that demonstrates the fluent nature of the PipelineBuilder:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"using NPipeline;\r\nusing NPipeline.DataFlow;\r\nusing NPipeline.Nodes;\r\nusing NPipeline.Pipeline;\r\n\r\npublic static class Program\r\n{\r\n    public static async Task Main(string[] args)\r\n    {\r\n        // Step 1: Create builder\r\n        var builder = new PipelineBuilder();\r\n\r\n        // Step 2: Add Nodes (and get handles)\r\n        var sourceHandle = builder.AddSource<HelloWorldSource, string>();\r\n        var transformHandle = builder.AddTransform<UppercaseTransform, string, string>();\r\n        var sinkHandle = builder.AddSink<ConsoleSink, string>();\r\n\r\n        // Step 3: Connect Nodes\r\n        builder.Connect(sourceHandle, transformHandle);\r\n        builder.Connect(transformHandle, sinkHandle);\r\n\r\n        // Step 4: Build and run\r\n        var pipeline = builder.Build();\r\n        var runner = new PipelineRunner();\r\n        await runner.RunAsync(() => pipeline);\r\n    }\r\n}\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"arrow_right-next-steps",children:["\u27a1\ufe0f"," Next Steps"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Learn about the final component, the ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/docs/core-concepts/pipeline-context",children:"PipelineContext"})}),", which carries state across your pipeline."]}),"\n",(0,t.jsxs)(n.li,{children:["Review the different types of ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/docs/core-concepts/inode",children:"INode"})})," you can add to the builder."]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>s});var r=i(6540);const t={},l=r.createContext(t);function d(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);