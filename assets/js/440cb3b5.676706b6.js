"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[1878],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>c});var t=i(96540);const r={},s=t.createContext(r);function a(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(s.Provider,{value:n},e.children)}},53653:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"analyzers/reliability","title":"Reliability Analyzers","description":"Identify inefficient exception handling patterns and unsafe access patterns that can harm reliability.","source":"@site/docs/analyzers/reliability.md","sourceDirName":"analyzers","slug":"/analyzers/reliability","permalink":"/docs/analyzers/reliability","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Reliability Analyzers","description":"Identify inefficient exception handling patterns and unsafe access patterns that can harm reliability.","sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Performance Analyzers","permalink":"/docs/analyzers/performance"},"next":{"title":"Data Processing Analyzers","permalink":"/docs/analyzers/data-processing"}}');var r=i(74848),s=i(28453);const a={title:"Reliability Analyzers",description:"Identify inefficient exception handling patterns and unsafe access patterns that can harm reliability.",sidebar_position:3},c=void 0,l={},o=[{value:"Reliability Analyzers",id:"reliability-analyzers",level:2},{value:"NP9301: Inefficient Exception Handling",id:"np9301-inefficient-exception-handling",level:3},{value:"Why This Matters",id:"why-this-matters",level:4},{value:"Problematic Patterns",id:"problematic-patterns",level:4},{value:"Solution: Use Specific Exception Handling and Alternative Patterns",id:"solution-use-specific-exception-handling-and-alternative-patterns",level:4},{value:"Exception Handling Guidelines",id:"exception-handling-guidelines",level:4},{value:"Best Practices for Reliability",id:"best-practices-for-reliability",level:2},{value:"Configuration",id:"configuration",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"reliability-analyzers",children:"Reliability Analyzers"}),"\n",(0,r.jsx)(n.p,{children:"Reliability analyzers detect inefficient exception handling patterns and unsafe access patterns that can harm performance and reliability in NPipeline pipelines."}),"\n",(0,r.jsx)(n.h3,{id:"np9301-inefficient-exception-handling",children:"NP9301: Inefficient Exception Handling"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ID:"})," ",(0,r.jsx)(n.code,{children:"NP9301"}),"\n",(0,r.jsx)(n.strong,{children:"Severity:"})," Warning",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Category:"})," Reliability"]}),"\n",(0,r.jsx)(n.p,{children:"This analyzer detects inefficient exception handling patterns that can harm performance and reliability in NPipeline pipelines. The analyzer identifies overly broad exception catches, missing specific exception handling, and performance-impacting exception usage in hot paths."}),"\n",(0,r.jsx)(n.h4,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,r.jsx)(n.p,{children:"Inefficient exception handling causes:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance Degradation"}),": Exception throwing and catching is expensive"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Masked Errors"}),": Overly broad catches hide real issues"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Poor Debugging"}),": Generic exception handling obscures root causes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Resource Leaks"}),": Improper exception handling can prevent cleanup"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"problematic-patterns",children:"Problematic Patterns"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'// PROBLEM: Catching Exception instead of specific exceptions\npublic async Task ProcessAsync(Input input, CancellationToken cancellationToken)\n{\n    try\n    {\n        await ProcessItemAsync(input, cancellationToken);\n    }\n    catch (Exception ex) // NP9301: Too broad exception handling\n    {\n        _logger.LogError(ex, "Processing failed");\n        throw;\n    }\n}\n\n// PROBLEM: Using exceptions for control flow\npublic Item GetItem(string id)\n{\n    if (!_cache.TryGetValue(id, out var item))\n    {\n        throw new KeyNotFoundException($"Item {id} not found"); // NP9301: Exception for control flow\n    }\n    return item;\n}\n\n// PROBLEM: Exception handling in hot paths\npublic async Task ProcessBatchAsync(IEnumerable<Item> items, CancellationToken cancellationToken)\n{\n    foreach (var item in items)\n    {\n        try\n        {\n            await ProcessItemAsync(item, cancellationToken);\n        }\n        catch (Exception ex) // NP9301: Exception handling in performance-critical loop\n        {\n            _logger.LogError(ex, "Failed to process item {ItemId}", item.Id);\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"solution-use-specific-exception-handling-and-alternative-patterns",children:"Solution: Use Specific Exception Handling and Alternative Patterns"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'// CORRECT: Catch specific exceptions\npublic async Task ProcessAsync(Input input, CancellationToken cancellationToken)\n{\n    try\n    {\n        await ProcessItemAsync(input, cancellationToken);\n    }\n    catch (InvalidOperationException ex)\n    {\n        _logger.LogError(ex, "Invalid operation during processing");\n        throw;\n    }\n    catch (TimeoutException ex)\n    {\n        _logger.LogError(ex, "Processing timeout");\n        throw new ProcessingTimeoutException("Item processing timed out", ex);\n    }\n}\n\n// CORRECT: Use result pattern instead of exceptions for control flow\npublic Result<Item> TryGetItem(string id)\n{\n    if (!_cache.TryGetValue(id, out var item))\n    {\n        return Result<Item>.Failure($"Item {id} not found");\n    }\n    return Result<Item>.Success(item);\n}\n\n// CORRECT: Filter invalid items before processing\npublic async Task ProcessBatchAsync(IEnumerable<Item> items, CancellationToken cancellationToken)\n{\n    var validItems = new List<Item>();\n    var failedItems = new List<(Item Item, Exception Error)>();\n    \n    // Validate first to avoid exceptions in hot path\n    foreach (var item in items)\n    {\n        if (IsValid(item))\n        {\n            validItems.Add(item);\n        }\n        else\n        {\n            failedItems.Add((item, new ValidationException("Invalid item")));\n        }\n    }\n    \n    // Process valid items\n    foreach (var item in validItems)\n    {\n        try\n        {\n            await ProcessItemAsync(item, cancellationToken);\n        }\n        catch (Exception ex)\n        {\n            failedItems.Add((item, ex));\n        }\n    }\n    \n    if (failedItems.Any())\n    {\n        _logger.LogWarning("Failed to process {Count} items", failedItems.Count);\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"exception-handling-guidelines",children:"Exception Handling Guidelines"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Scenario"}),(0,r.jsx)(n.th,{children:"Recommended Approach"}),(0,r.jsx)(n.th,{children:"Benefit"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Expected failures"}),(0,r.jsx)(n.td,{children:"Result pattern or TryXXX methods"}),(0,r.jsx)(n.td,{children:"No exception overhead"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Validation failures"}),(0,r.jsx)(n.td,{children:"Input validation before processing"}),(0,r.jsx)(n.td,{children:"Prevent exceptions"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"External dependencies"}),(0,r.jsx)(n.td,{children:"Specific exception types"}),(0,r.jsx)(n.td,{children:"Precise error handling"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Hot paths"}),(0,r.jsx)(n.td,{children:"Avoid exceptions for control flow"}),(0,r.jsx)(n.td,{children:"Better performance"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cleanup operations"}),(0,r.jsx)(n.td,{children:"finally blocks or using statements"}),(0,r.jsx)(n.td,{children:"Guaranteed cleanup"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices-for-reliability",children:"Best Practices for Reliability"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Catch specific exceptions"})," - Avoid catching Exception when possible"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use result patterns"})," - For expected failures that don't need exceptions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validate inputs early"})," - Prevent exceptions before they occur"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Avoid exceptions in hot paths"})," - Use alternative control flow mechanisms"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Always clean up resources"})," - Use finally blocks or using statements"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Adjust analyzer severity in ",(0,r.jsx)(n.code,{children:".editorconfig"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"# Treat inefficient exception handling as warnings\ndotnet_diagnostic.NP9301.severity = warning\n"})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../../architecture/error-handling-architecture",children:"Error Handling Architecture"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../../architecture/performance-characteristics",children:"Performance Characteristics"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);