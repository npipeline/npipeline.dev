"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[5826],{8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var r=i(6540);const l={},s=r.createContext(l);function t(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),r.createElement(s.Provider,{value:n},e.children)}},9551:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"core-concepts/pipeline-validation","title":"Pipeline Validation Extensions - Usage Guide","description":"The PipelineBuilderValidationExtensions class provides fluent methods for validating and analyzing pipeline structures before building. This enables early error detection and helps with debugging complex pipelines.","source":"@site/docs/core-concepts/pipeline-validation.md","sourceDirName":"core-concepts","slug":"/core-concepts/pipeline-validation","permalink":"/docs/core-concepts/pipeline-validation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Best Practices","permalink":"/docs/core-concepts/best-practices"},"next":{"title":"Architecture Overview","permalink":"/docs/architecture/"}}');var l=i(4848),s=i(8453);const t={},a="Pipeline Validation Extensions - Usage Guide",d={},o=[{value:"Available Methods",id:"available-methods",level:2},{value:"1. <code>Validate()</code> - Validate Pipeline Structure",id:"1-validate---validate-pipeline-structure",level:3},{value:"2. <code>CanConnect&lt;TData&gt;()</code> - Pre-Check Connection Validity",id:"2-canconnecttdata---pre-check-connection-validity",level:3},{value:"3. <code>ToMermaidDiagram()</code> - Generate Visual Diagram",id:"3-tomermaiddiagram---generate-visual-diagram",level:3},{value:"4. <code>Describe()</code> - Get Text Description",id:"4-describe---get-text-description",level:3},{value:"Validation Results Structure",id:"validation-results-structure",level:2},{value:"Validation Rules",id:"validation-rules",level:2},{value:"Core Rules (Always Applied)",id:"core-rules-always-applied",level:3},{value:"Extended Rules (Opt-In via <code>WithExtendedValidation()</code>)",id:"extended-rules-opt-in-via-withextendedvalidation",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Error Handling Strategy",id:"error-handling-strategy",level:2},{value:"Performance Notes",id:"performance-notes",level:2},{value:"Integration with Build Validation",id:"integration-with-build-validation",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"pipeline-validation-extensions---usage-guide",children:"Pipeline Validation Extensions - Usage Guide"})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"PipelineBuilderValidationExtensions"})," class provides fluent methods for validating and analyzing pipeline structures before building. This enables early error detection and helps with debugging complex pipelines."]}),"\n",(0,l.jsx)(n.h2,{id:"available-methods",children:"Available Methods"}),"\n",(0,l.jsxs)(n.h3,{id:"1-validate---validate-pipeline-structure",children:["1. ",(0,l.jsx)(n.code,{children:"Validate()"})," - Validate Pipeline Structure"]}),"\n",(0,l.jsx)(n.p,{children:"Validates the current pipeline structure without building the complete pipeline."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-csharp",children:'var builder = new PipelineBuilder()\r\n    .AddSource<MySource, int>("source")\r\n    .AddTransform<MyTransform, int, string>("transform")\r\n    .AddSink<MySink, string>("sink");\r\n\r\nbuilder.Connect("source", "transform");\r\nbuilder.Connect("transform", "sink");\r\n\r\n// Validate before building\r\nvar result = builder.Validate();\r\nif (!result.IsValid)\r\n{\r\n    foreach (var error in result.Errors)\r\n        Console.WriteLine($"Error: {error}");\r\n}\r\nelse\r\n{\r\n    var pipeline = builder.Build(); // Safe to build\r\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Returns:"})," ",(0,l.jsx)(n.code,{children:"PipelineValidationResult"})," containing:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"IsValid"}),": Boolean indicating if all errors passed"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Errors"}),": List of error messages"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Warnings"}),": List of warning messages"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Issues"}),": Complete list of validation issues with severity and category"]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"2-canconnecttdata---pre-check-connection-validity",children:["2. ",(0,l.jsx)(n.code,{children:"CanConnect<TData>()"})," - Pre-Check Connection Validity"]}),"\n",(0,l.jsx)(n.p,{children:"Checks if a connection between two nodes is valid before adding it to the pipeline."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-csharp",children:'var builder = new PipelineBuilder();\r\nvar source = builder.AddSource<MySource, int>("source");\r\nvar transform = builder.AddTransform<MyTransform, int, string>("transform");\r\n\r\n// Check if connection is valid\r\nif (builder.CanConnect(source, transform, out var reason))\r\n{\r\n    builder.Connect(source, transform);\r\n}\r\nelse\r\n{\r\n    Console.WriteLine($"Cannot connect: {reason}");\r\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Checks:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Type compatibility between source output and target input"}),"\n",(0,l.jsx)(n.li,{children:"Whether the connection would create a cycle"}),"\n",(0,l.jsx)(n.li,{children:"Whether both nodes exist in the builder"}),"\n",(0,l.jsx)(n.li,{children:"Self-loop detection"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Returns:"})," Boolean indicating validity, with optional reason string explaining why the connection is invalid."]}),"\n",(0,l.jsxs)(n.h3,{id:"3-tomermaiddiagram---generate-visual-diagram",children:["3. ",(0,l.jsx)(n.code,{children:"ToMermaidDiagram()"})," - Generate Visual Diagram"]}),"\n",(0,l.jsx)(n.p,{children:"Generates a Mermaid flowchart diagram of the current pipeline structure."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-csharp",children:'var builder = new PipelineBuilder()\r\n    .AddSource<MySource, int>("source")\r\n    .AddTransform<MyTransform, int, string>("transform")\r\n    .AddSink<MySink, string>("sink");\r\n\r\nbuilder.Connect("source", "transform");\r\nbuilder.Connect("transform", "sink");\r\n\r\nvar mermaid = builder.ToMermaidDiagram();\r\nConsole.WriteLine(mermaid);\r\n\r\n/* Output:\r\ngraph TD\r\n    source["source : Source"]\r\n    transform["transform : Transform"]\r\n    sink["sink : Sink"]\r\n    source --\x3e transform\r\n    transform --\x3e sink\r\n*/\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Visualize complex pipelines in Mermaid Live Editor"}),"\n",(0,l.jsx)(n.li,{children:"Generate documentation diagrams"}),"\n",(0,l.jsx)(n.li,{children:"Debug pipeline structure visually"}),"\n",(0,l.jsx)(n.li,{children:"Share pipeline designs in GitHub/documentation"}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"4-describe---get-text-description",children:["4. ",(0,l.jsx)(n.code,{children:"Describe()"})," - Get Text Description"]}),"\n",(0,l.jsx)(n.p,{children:"Gets a human-readable textual description of the current pipeline structure."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-csharp",children:'var builder = new PipelineBuilder()\r\n    .AddSource<MySource, int>("source")\r\n    .AddSink<MySink, string>("sink");\r\n\r\nbuilder.Connect("source", "sink");\r\n\r\nvar description = builder.Describe();\r\nConsole.WriteLine(description);\r\n\r\n/* Output:\r\nNodes:\r\n  source | source | Source | MySource | In=-, Out=System.Int32\r\n  sink | sink | Sink | MySink | In=System.String, Out=-\r\n\r\nEdges:\r\n  source --\x3e sink\r\n*/\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Debugging and logging pipeline structures"}),"\n",(0,l.jsx)(n.li,{children:"Text-based reports"}),"\n",(0,l.jsx)(n.li,{children:"Console output for pipeline analysis"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"validation-results-structure",children:"Validation Results Structure"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-csharp",children:"public sealed record PipelineValidationResult(ImmutableList<ValidationIssue> Issues)\r\n{\r\n    // Built-in properties\r\n    public bool IsValid => Issues.All(i => i.Severity != ValidationSeverity.Error);\r\n    public ImmutableList<string> Errors => Issues\r\n        .Where(i => i.Severity == ValidationSeverity.Error)\r\n        .Select(i => i.Message)\r\n        .ToImmutableList();\r\n    public ImmutableList<string> Warnings => Issues\r\n        .Where(i => i.Severity == ValidationSeverity.Warning)\r\n        .Select(i => i.Message)\r\n        .ToImmutableList();\r\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"validation-rules",children:"Validation Rules"}),"\n",(0,l.jsx)(n.h3,{id:"core-rules-always-applied",children:"Core Rules (Always Applied)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"UniqueNodeNameRule"}),": All node names must be unique"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"DuplicateNodeIdRule"}),": No duplicate node IDs"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"EdgeReferenceRule"}),": All edges reference valid nodes"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"SourceAndReachabilityRule"}),": Pipelines must have source nodes and all nodes must be reachable"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"CycleDetectionRule"}),": Pipeline graph must be acyclic (DAG)"]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"extended-rules-opt-in-via-withextendedvalidation",children:["Extended Rules (Opt-In via ",(0,l.jsx)(n.code,{children:"WithExtendedValidation()"}),")"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"MissingSinkRule"}),": Warnings if no sink nodes exist"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"SelfLoopRule"}),": Detects self-referencing nodes"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"DuplicateEdgeRule"}),": Prevents duplicate connections"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"MultiInboundNonJoinRule"}),": Warns if non-join nodes have multiple inputs"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"TypeCompatibilityRule"}),": Validates output/input type matching"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-csharp",children:'public void BuildAndValidatePipeline()\r\n{\r\n    var builder = new PipelineBuilder();\r\n    \r\n    // Build pipeline\r\n    var source = builder.AddSource<DataSource, int>("source");\r\n    var transform = builder.AddTransform<Uppercase, int, string>("transform");\r\n    var sink = builder.AddSink<ConsoleSink, string>("sink");\r\n    \r\n    // Validate before connecting\r\n    if (!builder.CanConnect(source, transform, out var reason))\r\n    {\r\n        throw new InvalidOperationException($"Cannot connect: {reason}");\r\n    }\r\n    \r\n    builder.Connect(source, transform);\r\n    \r\n    if (!builder.CanConnect(transform, sink, out reason))\r\n    {\r\n        throw new InvalidOperationException($"Cannot connect: {reason}");\r\n    }\r\n    \r\n    builder.Connect(transform, sink);\r\n    \r\n    // Comprehensive validation\r\n    var validationResult = builder.Validate();\r\n    if (!validationResult.IsValid)\r\n    {\r\n        Console.WriteLine("Validation errors:");\r\n        foreach (var error in validationResult.Errors)\r\n            Console.WriteLine($"  - {error}");\r\n        return;\r\n    }\r\n    \r\n    // Generate visualization for documentation\r\n    var diagram = builder.ToMermaidDiagram();\r\n    File.WriteAllText("pipeline.mermaid", diagram);\r\n    \r\n    // Build and run\r\n    var pipeline = builder.Build();\r\n    // ... execute pipeline\r\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"error-handling-strategy",children:"Error Handling Strategy"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Recommended Pattern:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.code,{children:"CanConnect()"})," during pipeline construction to validate each connection"]}),"\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.code,{children:"Validate()"})," before final ",(0,l.jsx)(n.code,{children:"Build()"})," for comprehensive validation"]}),"\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.code,{children:"ToMermaidDiagram()"})," to generate documentation"]}),"\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.code,{children:"Describe()"})," for logging and debugging"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-csharp",children:'try\r\n{\r\n    // Step 1: Build with connection validation\r\n    if (!builder.CanConnect(source, transform, out var reason))\r\n        throw new InvalidOperationException($"Invalid connection: {reason}");\r\n    builder.Connect(source, transform);\r\n    \r\n    // Step 2: Final comprehensive validation\r\n    var validation = builder.Validate();\r\n    if (!validation.IsValid)\r\n        throw new PipelineValidationException(validation);\r\n    \r\n    // Step 3: Safe to build\r\n    var pipeline = builder.Build();\r\n}\r\ncatch (Exception ex)\r\n{\r\n    Console.Error.WriteLine($"Pipeline error: {ex.Message}");\r\n    // Generate diagnostic report\r\n    Console.Error.WriteLine(builder.Describe());\r\n    throw;\r\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"performance-notes",children:"Performance Notes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Validate()"})," and ",(0,l.jsx)(n.code,{children:"Describe()"})," construct a temporary ",(0,l.jsx)(n.code,{children:"PipelineGraph"})," for analysis"]}),"\n",(0,l.jsx)(n.li,{children:"No graph freezing occurs - builder state remains mutable"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"CanConnect()"})," uses depth-first search for cycle detection (O(V+E) complexity)"]}),"\n",(0,l.jsx)(n.li,{children:"Suitable for development; consider caching results for repeated validations"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"integration-with-build-validation",children:"Integration with Build Validation"}),"\n",(0,l.jsxs)(n.p,{children:["These extensions complement the standard ",(0,l.jsx)(n.code,{children:"Build()"})," and ",(0,l.jsx)(n.code,{children:"TryBuild()"})," methods:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Validate()"})," - Early, incremental validation"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Build()"})," - Final validation with ",(0,l.jsx)(n.code,{children:"GraphValidationMode"})," settings"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"TryBuild()"})," - Non-throwing validation wrapper"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Use extensions during development; rely on ",(0,l.jsx)(n.code,{children:"Build()"})," for final pipeline creation."]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);