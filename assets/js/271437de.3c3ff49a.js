"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[246],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>d});var r=i(96540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}},93176:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"core-concepts/resilience/retry-delay-fixed","title":"Fixed Delay","description":"Configure fixed delay retry strategy for simple retry scenarios in NPipeline","source":"@site/docs/core-concepts/resilience/retry-delay-fixed.md","sourceDirName":"core-concepts/resilience","slug":"/core-concepts/resilience/retry-delay-fixed","permalink":"/docs/core-concepts/resilience/retry-delay-fixed","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8.3,"frontMatter":{"title":"Fixed Delay","description":"Configure fixed delay retry strategy for simple retry scenarios in NPipeline","sidebar_position":8.3},"sidebar":"docsSidebar","previous":{"title":"Linear Backoff","permalink":"/docs/core-concepts/resilience/retry-delay-linear"},"next":{"title":"Advanced Retry Patterns","permalink":"/docs/core-concepts/resilience/retry-delay-advanced"}}');var s=i(74848),t=i(28453);const l={title:"Fixed Delay",description:"Configure fixed delay retry strategy for simple retry scenarios in NPipeline",sidebar_position:8.3},d="Fixed Delay",c={},a=[{value:"When to Use",id:"when-to-use",level:2},{value:"Why This Matters",id:"why-this-matters",level:2},{value:"Basic Configuration",id:"basic-configuration",level:2},{value:"Delay Progression",id:"delay-progression",level:2},{value:"Common Configurations",id:"common-configurations",level:2},{value:"File System Operations (Recommended)",id:"file-system-operations-recommended",level:3},{value:"Quick Retry (Network Hiccups)",id:"quick-retry-network-hiccups",level:3},{value:"Slow Retry (Heavy Load)",id:"slow-retry-heavy-load",level:3},{value:"Testing (Preferred)",id:"testing-preferred",level:2},{value:"With Jitter",id:"with-jitter",level:2},{value:"Pipeline Integration",id:"pipeline-integration",level:2},{value:"Comparison with Other Strategies",id:"comparison-with-other-strategies",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Real-World Example",id:"real-world-example",level:2},{value:"Related Topics",id:"related-topics",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"fixed-delay",children:"Fixed Delay"})}),"\n",(0,s.jsx)(n.p,{children:"Fixed delay provides the simplest retry strategy\u2014waiting the same amount of time between every retry. Ideal for file system operations and scenarios where consistent behavior is preferred."}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,s.jsx)(n.p,{children:"Use fixed delay when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Processing file system operations"}),"\n",(0,s.jsx)(n.li,{children:"Dealing with expected uniform recovery times"}),"\n",(0,s.jsx)(n.li,{children:"You need simplicity and predictability"}),"\n",(0,s.jsx)(n.li,{children:"Testing retry behavior (without jitter)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File system operations"})," typically have uniform recovery times\u2014a file handle releases immediately or within milliseconds. Unlike distributed services that need exponential backoff, file operations benefit from consistent, simple retry timing."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Fixed delays provide:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Simplicity"}),": Easy to understand and reason about"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Predictability"}),": Testing becomes deterministic (no jitter variability)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Efficiency"}),": No overhead from calculating exponential growth"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"When not to use:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"External APIs: Use exponential backoff instead"}),"\n",(0,s.jsx)(n.li,{children:"Databases: Use linear backoff instead"}),"\n",(0,s.jsx)(n.li,{children:"Distributed systems: Use exponential backoff with jitter"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"using NPipeline;\nusing NPipeline.Pipeline;\n\nvar context = PipelineContext.Default;\ncontext.UseFixedDelay(TimeSpan.FromSeconds(2));\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"delay"}),": The constant delay between retries"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"delay-progression",children:"Delay Progression"}),"\n",(0,s.jsx)(n.p,{children:"With fixed delay of 2 seconds:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Attempt"}),(0,s.jsx)(n.th,{children:"Delay"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"2 seconds"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"2"}),(0,s.jsx)(n.td,{children:"2 seconds"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"3"}),(0,s.jsx)(n.td,{children:"2 seconds"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"4"}),(0,s.jsx)(n.td,{children:"2 seconds"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"5"}),(0,s.jsx)(n.td,{children:"2 seconds"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Always the same\u2014predictable and simple."}),"\n",(0,s.jsx)(n.h2,{id:"common-configurations",children:"Common Configurations"}),"\n",(0,s.jsx)(n.h3,{id:"file-system-operations-recommended",children:"File System Operations (Recommended)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"context.UseFixedDelay(TimeSpan.FromSeconds(2));\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Rationale:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"File handles typically release immediately"}),"\n",(0,s.jsx)(n.li,{children:"2 seconds is reasonable for lock recovery"}),"\n",(0,s.jsx)(n.li,{children:"Simple and effective"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"quick-retry-network-hiccups",children:"Quick Retry (Network Hiccups)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"context.UseFixedDelay(TimeSpan.FromMilliseconds(500));\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use when:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Expected immediate recovery"}),"\n",(0,s.jsx)(n.li,{children:"Dealing with brief network glitches"}),"\n",(0,s.jsx)(n.li,{children:"Need responsive behavior"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"slow-retry-heavy-load",children:"Slow Retry (Heavy Load)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"context.UseFixedDelay(TimeSpan.FromSeconds(10));\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use when:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"System under heavy load"}),"\n",(0,s.jsx)(n.li,{children:"Can tolerate longer waits"}),"\n",(0,s.jsx)(n.li,{children:"Upstream service needs more recovery time"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"testing-preferred",children:"Testing (Preferred)"}),"\n",(0,s.jsx)(n.p,{children:"Fixed delay is perfect for unit and integration tests because results are deterministic:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"[Fact]\npublic async Task RetryBehavior_WithFixedDelay()\n{\n    // No jitter = predictable timing for tests\n    var context = CreateTestContext();\n    context.UseFixedDelay(TimeSpan.FromMilliseconds(10));\n\n    var stopwatch = Stopwatch.StartNew();\n    await ExecuteWithRetries(context, maxRetries: 3);\n    stopwatch.Stop();\n\n    // With 3 retries and 10ms delay each:\n    // Expected minimum: 30ms (3 \xd7 10ms)\n    Assert.True(stopwatch.ElapsedMilliseconds >= 30);\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"with-jitter",children:"With Jitter"}),"\n",(0,s.jsx)(n.p,{children:"While fixed delay is deterministic, adding jitter prevents synchronized retries in production:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"var context = PipelineContext.Default;\ncontext.UseFixedDelay(\n    TimeSpan.FromSeconds(2),\n    jitterStrategy: JitterStrategies.FullJitter());\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Effect with 2s fixed delay + jitter:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Actual delays will vary between 0-2 seconds randomly"}),"\n",(0,s.jsx)(n.li,{children:'Prevents "thundering herd" when multiple clients retry'}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"pipeline-integration",children:"Pipeline Integration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'public sealed class FileProcessingPipeline : IPipelineDefinition\n{\n    public void Define(PipelineBuilder builder, PipelineContext context)\n    {\n        // Configure fixed delay for file operations\n        context.UseFixedDelay(TimeSpan.FromSeconds(2));\n\n        var source = builder.AddSource<FileSource, FileData>("file-source");\n        var transform = builder.AddTransform<FileTransform, FileData, ProcessedData>("transform");\n        var sink = builder.AddSink<FileSink, ProcessedData>("file-sink");\n\n        builder.Connect(source, transform);\n        builder.Connect(transform, sink);\n\n        builder.WithRetryOptions(new PipelineRetryOptions(\n            MaxItemRetries: 3,\n            MaxNodeRestartAttempts: 2,\n            MaxSequentialNodeAttempts: 5\n        ));\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"comparison-with-other-strategies",children:"Comparison with Other Strategies"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Strategy"}),(0,s.jsx)(n.th,{children:"Pattern"}),(0,s.jsx)(n.th,{children:"Best For"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Fixed"}),(0,s.jsx)(n.td,{children:"\u2581\u2581\u2581\u2581\u2581"}),(0,s.jsx)(n.td,{children:"Files, predictability, tests"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Linear"}),(0,s.jsx)(n.td,{children:"\u2571\u2571\u2571\u2571\u2571"}),(0,s.jsx)(n.td,{children:"Databases, lock contention"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Exponential"}),(0,s.jsx)(n.td,{children:"\u2571\u2571\u2571\u2571\u2571 (steep)"}),(0,s.jsx)(n.td,{children:"APIs, distributed services"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use for Testing"}),": Fixed delays make tests deterministic"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use for Files"}),": File I/O recovery is typically uniform"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Add Jitter in Production"}),": Prevent synchronized retries"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Keep Delay Reasonable"}),": 1-5 seconds for most scenarios"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Monitor Performance"}),": Ensure delays don't bottleneck pipeline"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Consider Context"}),": Different operations may need different delays"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"real-world-example",children:"Real-World Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public sealed class FileProcessingExample\n{\n    public async Task ProcessLargeFileAsync()\n    {\n        var context = PipelineContext.Default;\n        \n        // Use fixed delay for file operations\n        context.UseFixedDelay(TimeSpan.FromSeconds(1));\n        \n        var definition = new FileProcessingPipeline();\n        var runner = PipelineRunner.Create();\n        \n        await runner.RunAsync(definition, context);\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/retries",children:"Retry Configuration"})," - Overall retry configuration options"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/retry-delays",children:"Retry Delays"})," - Overview of all retry delay strategies"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/retry-delay-exponential",children:"Exponential Backoff"})," - Exponential delay progression"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/retry-delay-linear",children:"Linear Backoff"})," - Linear delay progression"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/retry-delay-advanced",children:"Advanced Patterns"})," - Custom strategies and patterns"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/retry-delay-testing",children:"Testing Retries"})," - Testing retry behavior"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/retry-delay-monitoring",children:"Monitoring Retries"})," - Observing retry metrics"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);