"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[7887],{1749:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"core-concepts/pipelinebuilder","title":"PipelineBuilder","description":"Learn how to use the PipelineBuilder to fluently define and construct your pipeline.","source":"@site/docs/core-concepts/pipelinebuilder.md","sourceDirName":"core-concepts","slug":"/core-concepts/pipelinebuilder","permalink":"/docs/core-concepts/pipelinebuilder","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"PipelineBuilder","description":"Learn how to use the PipelineBuilder to fluently define and construct your pipeline.","sidebar_position":5,"slug":"/core-concepts/pipelinebuilder"},"sidebar":"docsSidebar","previous":{"title":"Pipeline Definition (IPipelineDefinition, PipelineBuilder)","permalink":"/docs/core-concepts/pipeline-definition"},"next":{"title":"Pipeline Execution","permalink":"/docs/core-concepts/pipeline-execution"}}');var s=i(4848),t=i(8453);const o={title:"PipelineBuilder",description:"Learn how to use the PipelineBuilder to fluently define and construct your pipeline.",sidebar_position:5,slug:"/core-concepts/pipelinebuilder"},l="PipelineBuilder",d={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"The Core Workflow",id:"the-core-workflow",level:2},{value:"Step 1: Adding Nodes",id:"step-1-adding-nodes",level:2},{value:"Example",id:"example",level:3},{value:"See Also",id:"see-also",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"pipelinebuilder",children:"PipelineBuilder"})}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"Before using PipelineBuilder, you should be familiar with:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/nodes/",children:"Nodes Overview"})," - Understanding the node types you'll be connecting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts",children:"Core Concepts Overview"})," - Basic NPipeline concepts and terminology"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"PipelineBuilder"})," is a fluent API that provides a simple and expressive way to define the structure of your data pipeline. It is the primary tool for adding nodes, connecting them, and compiling the final, runnable ",(0,s.jsx)(n.code,{children:"IPipeline"})," instance."]}),"\n",(0,s.jsx)(n.h2,{id:"the-core-workflow",children:"The Core Workflow"}),"\n",(0,s.jsxs)(n.p,{children:["Building a pipeline with ",(0,s.jsx)(n.code,{children:"PipelineBuilder"})," involves three main steps:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Add Nodes"}),": Use methods like ",(0,s.jsx)(n.code,{children:"AddSource"}),", ",(0,s.jsx)(n.code,{children:"AddTransform"}),", and ",(0,s.jsx)(n.code,{children:"AddSink"})," to register the processing units of your pipeline."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Connect Nodes"}),": Use the ",(0,s.jsx)(n.code,{children:"Connect"})," method to define the flow of data between the nodes you have added."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Build the Pipeline"}),": Call the ",(0,s.jsx)(n.code,{children:"Build"})," method to validate your configuration and create an executable ",(0,s.jsx)(n.code,{children:"IPipeline"})," instance."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"step-1-adding-nodes",children:"Step 1: Adding Nodes"}),"\n",(0,s.jsxs)(n.p,{children:["You start by creating a ",(0,s.jsx)(n.code,{children:"PipelineBuilder"})," instance and then adding your nodes. Each ",(0,s.jsx)(n.code,{children:"Add"})," method returns a ",(0,s.jsx)(n.code,{children:"Handle"})," object, which is a lightweight reference to the node that you will use in the next step to create connections."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"AddSource<TNode, TOut>(name)"}),": Adds a source node."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"AddTransform<TNode, TIn, TOut>(name)"}),": Adds a transform node."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"AddSink<TNode, TIn>(name)"}),": Adds a sink node."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Each method takes the node's class type as a generic parameter and an optional unique name."}),"\n",(0,s.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'using NPipeline;\r\nusing NPipeline.DataFlow;\r\nusing NPipeline.Nodes;\r\nusing NPipeline.Pipeline;\r\n\r\n/// <summary>\r\n/// Source node that produces simple string messages.\r\n/// Demonstrates basic source pattern for starting a pipeline.\r\n/// </summary>\r\npublic sealed class HelloWorldSource : SourceNode<string>\r\n{\r\n    public override IDataPipe<string> ExecuteAsync(PipelineContext context, CancellationToken cancellationToken)\r\n    {\r\n        // Create streaming data pipe immediately (synchronous operation)\r\n        return new StreamingDataPipe<string>(GenerateMessages());\r\n\r\n        static async IAsyncEnumerable<string> GenerateMessages()\r\n        {\r\n            // Generate a sequence of greeting messages\r\n            string[] messages = { "Hello", "World", "from", "NPipeline" };\r\n            \r\n            foreach (var message in messages)\r\n            {\r\n                yield return message;\r\n                // Small delay to simulate work or external dependency\r\n                await Task.Delay(100, cancellationToken);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/// <summary>\r\n/// Transform that converts strings to uppercase.\r\n/// Demonstrates basic synchronous transform pattern.\r\n/// </summary>\r\npublic sealed class UppercaseTransform : ITransformNode<string, string>\r\n{\r\n    public Task<string> ExecuteAsync(string item, PipelineContext context, CancellationToken cancellationToken)\r\n    {\r\n        // Synchronous string manipulation - no async work needed\r\n        var uppercase = item.ToUpperInvariant();\r\n        return Task.FromResult(uppercase);\r\n    }\r\n}\r\n\r\n/// <summary>\r\n/// Sink node that outputs messages to console.\r\n/// Demonstrates terminal node pattern for pipeline output.\r\n/// </summary>\r\npublic sealed class ConsoleSink : ISinkNode<string>\r\n{\r\n    public async Task ExecuteAsync(IDataPipe<string> input, PipelineContext context, CancellationToken cancellationToken)\r\n    {\r\n        // Process each message as it arrives from upstream\r\n        await foreach (var message in input.WithCancellation(cancellationToken))\r\n        {\r\n            Console.WriteLine(message);\r\n        }\r\n    }\r\n}\r\n\r\n/// <summary>\r\n/// Pipeline definition that connects source, transform, and sink nodes.\r\n/// Demonstrates the fluent API pattern for building executable pipelines.\r\n/// </summary>\r\npublic sealed class HelloWorldPipelineDefinition : IPipelineDefinition\r\n{\r\n    public void Define(PipelineBuilder builder, PipelineContext context)\r\n    {\r\n        // Add nodes to pipeline and get handles for connection\r\n        var sourceHandle = builder.AddSource<HelloWorldSource, string>("message_source");\r\n        var transformHandle = builder.AddTransform<UppercaseTransform, string, string>("uppercase_transform");\r\n        var sinkHandle = builder.AddSink<ConsoleSink, string>("console_sink");\r\n\r\n        // Define data flow by connecting nodes in sequence\r\n        builder.Connect(sourceHandle, transformHandle);\r\n        builder.Connect(transformHandle, sinkHandle);\r\n    }\r\n}\r\n\r\npublic static class Program\r\n{\r\n    public static async Task Main(string[] args)\r\n    {\r\n        // Create pipeline runner to execute the defined pipeline\r\n        var runner = PipelineRunner.Create();\r\n        \r\n        // Run the pipeline using the definition\r\n        await runner.RunAsync<HelloWorldPipelineDefinition>();\r\n    }\r\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'using NPipeline;\r\nusing NPipeline.DataFlow;\r\nusing NPipeline.Nodes;\r\nusing NPipeline.Pipeline;\r\n\r\n/// <summary>\r\n/// Pipeline definition demonstrating the complete fluent API workflow.\r\n/// Shows the three-step process: Add nodes, Connect them, Build pipeline.\r\n/// </summary>\r\npublic sealed class CompletePipelineDefinition : IPipelineDefinition\r\n{\r\n    public void Define(PipelineBuilder builder, PipelineContext context)\r\n    {\r\n        // Step 1: Add nodes and store their handles\r\n        var sourceHandle = builder.AddSource<HelloWorldSource, string>("source");\r\n        var transformHandle = builder.AddTransform<UppercaseTransform, string, string>("transform");\r\n        var sinkHandle = builder.AddSink<ConsoleSink, string>("sink");\r\n\r\n        // Step 2: Connect nodes to define data flow\r\n        builder.Connect(sourceHandle, transformHandle);\r\n        builder.Connect(transformHandle, sinkHandle);\r\n\r\n        // Step 3: Build pipeline (implicit when RunAsync is called)\r\n        // The builder validates the graph and creates executable pipeline\r\n    }\r\n}\r\n\r\npublic static class Program\r\n{\r\n    public static async Task Main(string[] args)\r\n    {\r\n        // Create builder and define pipeline\r\n        var builder = new PipelineBuilder();\r\n        \r\n        // Create pipeline definition\r\n        var definition = new CompletePipelineDefinition();\r\n        \r\n        // Define the pipeline structure\r\n        var context = PipelineContext.Default;\r\n        definition.Define(builder, context);\r\n        \r\n        // Build the pipeline (validates graph and creates executable instance)\r\n        var pipeline = builder.Build();\r\n        \r\n        // Execute the pipeline\r\n        var runner = PipelineRunner.Create();\r\n        await runner.RunAsync(() => pipeline);\r\n    }\r\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/nodes/",children:"Nodes Overview"})," - Understanding the node types you'll be connecting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/pipeline-execution",children:"Pipeline Execution"})," - Learn how built pipelines are executed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/pipeline-execution/execution-strategies",children:"Execution Strategies"})," - Control how nodes process data"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/error-handling-guide",children:"Error Handling Guide"})," - Add resilience to your pipelines"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/pipeline-context",children:"Pipeline Context"})," - Understanding shared state across nodes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/extensions/dependency-injection",children:"Dependency Injection"})," - Using DI with PipelineBuilder"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/pipeline-context",children:"Pipeline Context"})," - Learn about the final component that carries state across your pipeline"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/pipeline-execution/execution-strategies",children:"Execution Strategies"})," - Control how nodes process data"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/error-handling-guide",children:"Error Handling Guide"})," - Add resilience to your pipelines"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/extensions/dependency-injection",children:"Dependency Injection"})," - Using DI with PipelineBuilder"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var r=i(6540);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);