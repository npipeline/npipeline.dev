"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[108],{2805:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"core-concepts/nodes/source-nodes","title":"Source Nodes","description":"Learn how to implement source nodes that generate the initial data stream entering your pipeline.","source":"@site/docs/core-concepts/nodes/source-nodes.md","sourceDirName":"core-concepts/nodes","slug":"/core-concepts/nodes/source-nodes","permalink":"/docs/core-concepts/nodes/source-nodes","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Source Nodes","description":"Learn how to implement source nodes that generate the initial data stream entering your pipeline.","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Nodes (Source, Transform, Sink)","permalink":"/docs/core-concepts/nodes/"},"next":{"title":"Transform Nodes","permalink":"/docs/core-concepts/nodes/transform-nodes"}}');var i=r(4848),a=r(8453);const o={title:"Source Nodes",description:"Learn how to implement source nodes that generate the initial data stream entering your pipeline.",sidebar_position:1},s="Source Nodes (ISourceNode<TOut>)",c={},l=[{value:"Interface Definition",id:"interface-definition",level:2},{value:"Implementation Example",id:"implementation-example",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Data Pipe Output",id:"data-pipe-output",level:3},{value:"Cancellation Support",id:"cancellation-support",level:3},{value:"Lazy Initialization",id:"lazy-initialization",level:3},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"File Reader Source",id:"file-reader-source",level:3},{value:"Database Query Source",id:"database-query-source",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsxs)(n.h1,{id:"source-nodes-isourcenodetout",children:["Source Nodes (",(0,i.jsx)(n.code,{children:"ISourceNode<TOut>"}),")"]})}),"\n",(0,i.jsxs)(n.p,{children:["A source node is responsible for generating the initial data stream that enters the pipeline. It doesn't receive any input but produces a stream of ",(0,i.jsx)(n.code,{children:"TOutput"})," items."]}),"\n",(0,i.jsx)(n.h2,{id:"interface-definition",children:"Interface Definition"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"public interface ISourceNode<out TOut> : INode\r\n{\r\n    IDataPipe<TOut> ExecuteAsync(PipelineContext context, CancellationToken cancellationToken);\r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ExecuteAsync"})," method returns the data pipe synchronously. The pipeline execution framework wraps this result in a ",(0,i.jsx)(n.code,{children:"Task"})," internally when needed for asynchronous execution orchestration."]}),"\n",(0,i.jsx)(n.h2,{id:"implementation-example",children:"Implementation Example"}),"\n",(0,i.jsx)(n.p,{children:"A simple source that produces a sequence of numbers:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"using NPipeline;\r\nusing NPipeline.DataFlow;\r\nusing NPipeline.DataFlow.DataPipes;\r\nusing NPipeline.Nodes;\r\nusing NPipeline.Pipeline;\r\n\r\npublic sealed class NumberSource : ISourceNode<int>\r\n{\r\n    private readonly int _start;\r\n    private readonly int _count;\r\n\r\n    public NumberSource(int start, int count)\r\n    {\r\n        _start = start;\r\n        _count = count;\r\n    }\r\n\r\n    public IDataPipe<int> ExecuteAsync(PipelineContext context, CancellationToken cancellationToken)\r\n    {\r\n        static IAsyncEnumerable<int> Stream(int start, int count, CancellationToken ct)\r\n        {\r\n            return GenerateNumbers();\r\n\r\n            async IAsyncEnumerable<int> GenerateNumbers()\r\n            {\r\n                for (int i = 0; i < count; i++)\r\n                {\r\n                    ct.ThrowIfCancellationRequested();\r\n                    yield return start + i;\r\n                }\r\n            }\r\n        }\r\n\r\n        return new StreamingDataPipe<int>(Stream(_start, _count, cancellationToken));\r\n    }\r\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,i.jsx)(n.h3,{id:"data-pipe-output",children:"Data Pipe Output"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ExecuteAsync"})," method returns an ",(0,i.jsx)(n.code,{children:"IDataPipe<TOut>"})," directly (synchronously). The ",(0,i.jsx)(n.code,{children:"IDataPipe<T>"})," abstraction allows NPipeline to support different streaming models (buffered, streaming, etc.) while maintaining a consistent interface."]}),"\n",(0,i.jsx)(n.h3,{id:"cancellation-support",children:"Cancellation Support"}),"\n",(0,i.jsxs)(n.p,{children:["Always respect the ",(0,i.jsx)(n.code,{children:"cancellationToken"})," parameter to allow graceful shutdown and cancellation of pipeline execution. This is especially important for sources that read from external systems (files, databases, network streams)."]}),"\n",(0,i.jsx)(n.h3,{id:"lazy-initialization",children:"Lazy Initialization"}),"\n",(0,i.jsx)(n.p,{children:"Source nodes are not executed until the pipeline is run. This allows for efficient resource management\u2014connections, file handles, and other resources are only acquired when needed."}),"\n",(0,i.jsx)(n.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,i.jsx)(n.h3,{id:"file-reader-source",children:"File Reader Source"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"public sealed class FileReaderSource : ISourceNode<string>\r\n{\r\n    private readonly string _filePath;\r\n\r\n    public FileReaderSource(string filePath)\r\n    {\r\n        _filePath = filePath;\r\n    }\r\n\r\n    public IDataPipe<string> ExecuteAsync(PipelineContext context, CancellationToken cancellationToken)\r\n    {\r\n        static IAsyncEnumerable<string> Stream(string path, CancellationToken ct)\r\n        {\r\n            return ReadLines();\r\n\r\n            async IAsyncEnumerable<string> ReadLines()\r\n            {\r\n                var lines = await File.ReadAllLinesAsync(path, ct);\r\n                foreach (var line in lines)\r\n                {\r\n                    ct.ThrowIfCancellationRequested();\r\n                    yield return line;\r\n                }\r\n            }\r\n        }\r\n\r\n        return new StreamingDataPipe<string>(Stream(_filePath, cancellationToken));\r\n    }\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"database-query-source",children:"Database Query Source"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'public sealed class DatabaseSource : ISourceNode<CustomerRecord>\r\n{\r\n    private readonly string _connectionString;\r\n\r\n    public DatabaseSource(string connectionString)\r\n    {\r\n        _connectionString = connectionString;\r\n    }\r\n\r\n    public IDataPipe<CustomerRecord> ExecuteAsync(PipelineContext context, CancellationToken cancellationToken)\r\n    {\r\n        return new StreamingDataPipe<CustomerRecord>(FetchRecordsAsync(cancellationToken));\r\n    }\r\n\r\n    private async IAsyncEnumerable<CustomerRecord> FetchRecordsAsync([EnumeratorCancellation] CancellationToken cancellationToken)\r\n    {\r\n        using (var connection = new SqlConnection(_connectionString))\r\n        {\r\n            await connection.OpenAsync(cancellationToken);\r\n            using (var command = new SqlCommand("SELECT * FROM Customers", connection))\r\n            {\r\n                using (var reader = await command.ExecuteReaderAsync(cancellationToken))\r\n                {\r\n                    while (await reader.ReadAsync(cancellationToken))\r\n                    {\r\n                        yield return new CustomerRecord\r\n                        {\r\n                            Id = reader.GetInt32(0),\r\n                            Name = reader.GetString(1),\r\n                            Email = reader.GetString(2)\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/core-concepts/nodes/transform-nodes",children:"Transform Nodes"})}),": Learn how to process and transform data within your pipeline"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/core-concepts/nodes/sink-nodes",children:"Sink Nodes"})}),": Understand the final stage of data consumption"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>s});var t=r(6540);const i={},a=t.createContext(i);function o(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);