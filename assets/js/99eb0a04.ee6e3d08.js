"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[9121],{2003:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"analyzers/index","title":"Build-Time Analyzers","description":"NPipeline\'s comprehensive build-time analyzers enforce the framework\'s fundamental design contract through automated performance and resilience hygiene checks.","source":"@site/docs/analyzers/index.md","sourceDirName":"analyzers","slug":"/analyzers/","permalink":"/npipeline.dev/docs/analyzers/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Build-Time Analyzers","description":"NPipeline\'s comprehensive build-time analyzers enforce the framework\'s fundamental design contract through automated performance and resilience hygiene checks.","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Advanced Testing","permalink":"/npipeline.dev/docs/advanced-topics/testing-pipelines"},"next":{"title":"Resilience Analyzers","permalink":"/npipeline.dev/docs/analyzers/resilience"}}');var s=r(4848),t=r(8453);const l={title:"Build-Time Analyzers",description:"NPipeline's comprehensive build-time analyzers enforce the framework's fundamental design contract through automated performance and resilience hygiene checks.",sidebar_position:1},a=void 0,c={},d=[{value:"Build-Time Guardrails: Automated Enforcement of Best Practices",id:"build-time-guardrails-automated-enforcement-of-best-practices",level:2},{value:"What Are Build-Time Analyzers?",id:"what-are-build-time-analyzers",level:3},{value:"The NPL 9000 Series: Performance and Resilience Hygiene Toolkit",id:"the-npl-9000-series-performance-and-resilience-hygiene-toolkit",level:2},{value:"Why This Matters",id:"why-this-matters",level:3},{value:"The Problem These Analyzers Solve",id:"the-problem-these-analyzers-solve",level:2},{value:"Before: Silent Failures at Runtime",id:"before-silent-failures-at-runtime",level:3},{value:"After: Build-Time Enforcement",id:"after-build-time-enforcement",level:3},{value:"Analyzer Categories",id:"analyzer-categories",level:2},{value:"Installation",id:"installation",level:2},{value:"Quick Reference: All Analyzer Codes",id:"quick-reference-all-analyzer-codes",level:2},{value:"Philosophy",id:"philosophy",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Configuration",id:"configuration",level:2},{value:"See Also",id:"see-also",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"build-time-guardrails-automated-enforcement-of-best-practices",children:"Build-Time Guardrails: Automated Enforcement of Best Practices"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"NPipeline.Analyzers"})," package provides a comprehensive suite of build-time Roslyn analyzers that act as ",(0,s.jsx)(n.strong,{children:"automated guardrails for code quality"}),". Rather than treating them as just another error reference, these analyzers are the ",(0,s.jsx)(n.strong,{children:"framework's proactive enforcement mechanism"})," for ensuring your pipeline implementations follow the design principles that make NPipeline fast, safe, and reliable."]}),"\n",(0,s.jsx)(n.h3,{id:"what-are-build-time-analyzers",children:"What Are Build-Time Analyzers?"}),"\n",(0,s.jsx)(n.p,{children:"Build-time analyzers are diagnostic tools that scan your code at compile time\u2014before it ever runs\u2014to detect violations of the framework's fundamental design contract. They catch issues that would otherwise surface as runtime failures, silent data loss, performance bottlenecks, or maintenance headaches."}),"\n",(0,s.jsxs)(n.p,{children:["Think of them as ",(0,s.jsx)(n.strong,{children:"automated code review"})," by experts who understand how high-performance streaming systems should work."]}),"\n",(0,s.jsx)(n.h2,{id:"the-npl-9000-series-performance-and-resilience-hygiene-toolkit",children:"The NPL 9000 Series: Performance and Resilience Hygiene Toolkit"}),"\n",(0,s.jsx)(n.p,{children:"The NPL 9000 series (NP9XXX) diagnostics represent a curated set of enforcement rules that protect you from the most common\u2014and most dangerous\u2014mistakes when building streaming data pipelines:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Code Range"}),(0,s.jsx)(n.th,{children:"Category"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP90XX"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Resilience"})}),(0,s.jsx)(n.td,{children:"Enforces proper error handling and recovery configuration"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP91XX"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Performance"})}),(0,s.jsx)(n.td,{children:"Catches blocking operations, non-streaming patterns, and async/await anti-patterns"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP92XX"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Data Flow"})}),(0,s.jsx)(n.td,{children:"Ensures proper data consumption and processing patterns"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP94XX"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Best Practices"})}),(0,s.jsx)(n.td,{children:"Validates dependency injection, resource management, and framework contract compliance"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,s.jsx)(n.p,{children:"Before these analyzers existed, developers could:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2717 Configure error handlers to restart nodes without the required prerequisites, causing silent failures"}),"\n",(0,s.jsx)(n.li,{children:"\u2717 Block on async code, causing deadlocks and thread pool starvation"}),"\n",(0,s.jsx)(n.li,{children:"\u2717 Build non-streaming SourceNodes that allocate gigabytes of memory for large datasets"}),"\n",(0,s.jsx)(n.li,{children:"\u2717 Inject dependencies unsafely, creating tightly coupled code that's hard to test"}),"\n",(0,s.jsx)(n.li,{children:"\u2717 Forget to consume input in SinkNodes, silently dropping data"}),"\n",(0,s.jsx)(n.li,{children:"\u2717 Access PipelineContext unsafely, causing null reference exceptions at runtime"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"With these analyzers"}),", all of these issues are caught at build time, not at 3 AM in production."]}),"\n",(0,s.jsx)(n.h2,{id:"the-problem-these-analyzers-solve",children:"The Problem These Analyzers Solve"}),"\n",(0,s.jsx)(n.h3,{id:"before-silent-failures-at-runtime",children:"Before: Silent Failures at Runtime"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c Looks correct but will fail silently at runtime\npublic class MyErrorHandler : IPipelineErrorHandler\n{\n    public async Task<PipelineErrorDecision> HandleNodeFailureAsync(\n        string nodeId,\n        Exception error,\n        PipelineContext context,\n        CancellationToken cancellationToken)\n    {\n        return error switch\n        {\n            TimeoutException => PipelineErrorDecision.RestartNode,  // Intent is clear\n            _ => PipelineErrorDecision.FailPipeline\n        };\n    }\n}\n\n// But at runtime, restart silently fails because prerequisites are missing!\n// The entire pipeline crashes instead of gracefully restarting the node.\n"})}),"\n",(0,s.jsx)(n.h3,{id:"after-build-time-enforcement",children:"After: Build-Time Enforcement"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"CSC : warning NP9002: Error handler can return PipelineErrorDecision.RestartNode \nbut the node may not have all three mandatory prerequisites configured...\n"})}),"\n",(0,s.jsx)(n.p,{children:"You fix it during development, not during a production incident."}),"\n",(0,s.jsx)(n.h2,{id:"analyzer-categories",children:"Analyzer Categories"}),"\n",(0,s.jsx)(n.p,{children:"The analyzers are organized into focused sections based on what they protect:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/analyzers/resilience",children:"Resilience Analyzers"})})," - Detect incomplete resilience configuration that could lead to silent failures"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/analyzers/performance",children:"Performance Analyzers"})})," - Identify blocking operations, non-streaming patterns, and async/await anti-patterns"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/analyzers/best-practices",children:"Best Practice Analyzers"})})," - Flag dependency injection anti-patterns, unsafe context access, and framework contract violations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/analyzers/data-processing",children:"Data Processing Analyzers"})})," - Ensure proper input consumption and streaming patterns in pipeline nodes"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.p,{children:"The analyzer is included with the main NPipeline package:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"dotnet add package NPipeline\n"})}),"\n",(0,s.jsx)(n.p,{children:"Or install it separately:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"dotnet add package NPipeline.Analyzers\n"})}),"\n",(0,s.jsx)(n.h2,{id:"quick-reference-all-analyzer-codes",children:"Quick Reference: All Analyzer Codes"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Code"}),(0,s.jsx)(n.th,{children:"Category"}),(0,s.jsx)(n.th,{children:"Problem"}),(0,s.jsx)(n.th,{children:"Fix"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP9002"})}),(0,s.jsx)(n.td,{children:"Resilience"}),(0,s.jsx)(n.td,{children:"Incomplete resilience configuration"}),(0,s.jsx)(n.td,{children:"Add missing prerequisites"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP9102"})}),(0,s.jsx)(n.td,{children:"Performance"}),(0,s.jsx)(n.td,{children:"Blocking operations in async methods"}),(0,s.jsx)(n.td,{children:"Use await instead of .Result/.Wait()"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP9103"})}),(0,s.jsx)(n.td,{children:"Performance"}),(0,s.jsx)(n.td,{children:"Swallowed OperationCanceledException"}),(0,s.jsx)(n.td,{children:"Re-throw or handle explicitly"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP9104"})}),(0,s.jsx)(n.td,{children:"Performance"}),(0,s.jsx)(n.td,{children:"Synchronous over async (fire-and-forget)"}),(0,s.jsx)(n.td,{children:"Await the async call"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP9105"})}),(0,s.jsx)(n.td,{children:"Performance"}),(0,s.jsx)(n.td,{children:"Disrespecting cancellation token"}),(0,s.jsx)(n.td,{children:"Check token and propagate"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP9209"})}),(0,s.jsx)(n.td,{children:"Performance"}),(0,s.jsx)(n.td,{children:"Missing ValueTask optimization"}),(0,s.jsx)(n.td,{children:"Use ValueTask for sync-heavy paths"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP9211"})}),(0,s.jsx)(n.td,{children:"Performance"}),(0,s.jsx)(n.td,{children:"Non-streaming patterns in SourceNode"}),(0,s.jsx)(n.td,{children:"Use IAsyncEnumerable with yield"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP9312"})}),(0,s.jsx)(n.td,{children:"Data Processing"}),(0,s.jsx)(n.td,{children:"SinkNode input not consumed"}),(0,s.jsx)(n.td,{children:"Iterate the input pipe"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP9313"})}),(0,s.jsx)(n.td,{children:"Best Practice"}),(0,s.jsx)(n.td,{children:"Unsafe PipelineContext access"}),(0,s.jsx)(n.td,{children:"Use null-safe patterns"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NP9409"})}),(0,s.jsx)(n.td,{children:"Best Practice"}),(0,s.jsx)(n.td,{children:"Direct dependency instantiation"}),(0,s.jsx)(n.td,{children:"Use constructor injection"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"philosophy",children:"Philosophy"}),"\n",(0,s.jsxs)(n.p,{children:["These analyzers embody a core principle: ",(0,s.jsx)(n.strong,{children:"Getting it right before you compile is infinitely better than fixing it after it breaks in production."})]}),"\n",(0,s.jsx)(n.p,{children:"They enforce the framework's fundamental design contract:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Resilience"}),": Error handling must be configured completely or not at all"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Performance"}),": Streaming operations must never block or materialize unnecessarily"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Safety"}),": Dependencies must be explicit and context access must be protected"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Correctness"}),": Data flow must be complete and cancellation must be respected"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Never suppress warnings without understanding why"})," - The analyzer is protecting you from real problems"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Treat warnings as errors"})," - Consider configuring ",(0,s.jsx)(n.code,{children:".editorconfig"})," to make violations errors instead of warnings"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use the analyzers as a learning tool"})," - Each warning teaches you something about building safe, fast pipelines"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Apply fixes during development"})," - It's always cheaper to fix issues at compile time"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["You can adjust analyzer severity in your ",(0,s.jsx)(n.code,{children:".editorconfig"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# Treat all analyzer warnings as errors\ndotnet_diagnostic.NP9002.severity = error\ndotnet_diagnostic.NP9102.severity = error\ndotnet_diagnostic.NP9104.severity = error\ndotnet_diagnostic.NP9211.severity = error\ndotnet_diagnostic.NP9409.severity = error\ndotnet_diagnostic.NP9313.severity = error\n"})}),"\n",(0,s.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/analyzers/resilience",children:"Resilience Analyzers"})," - Build resilient error handling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/analyzers/performance",children:"Performance Analyzers"})," - Write fast, non-blocking code"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/analyzers/best-practices",children:"Best Practice Analyzers"})," - Follow framework design principles"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/npipeline.dev/docs/analyzers/data-processing",children:"Data Processing Analyzers"})," - Ensure data flows correctly"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>a});var i=r(6540);const s={},t=i.createContext(s);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);