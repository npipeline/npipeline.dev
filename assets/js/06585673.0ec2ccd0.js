"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[2869],{8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var i=r(6540);const s={},t=i.createContext(s);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:n},e.children)}},9098:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"introduction/troubleshooting","title":"Troubleshooting Guide","description":"Common NPipeline issues and solutions.","source":"@site/docs/introduction/troubleshooting.md","sourceDirName":"introduction","slug":"/introduction/troubleshooting","permalink":"/docs/introduction/troubleshooting","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"title":"Troubleshooting Guide","description":"Common NPipeline issues and solutions.","sidebar_position":11},"sidebar":"docsSidebar","previous":{"title":"Frequently Asked Questions","permalink":"/docs/introduction/faq"},"next":{"title":"API Quick Reference","permalink":"/docs/introduction/api-reference"}}');var s=r(4848),t=r(8453);const o={title:"Troubleshooting Guide",description:"Common NPipeline issues and solutions.",sidebar_position:11},l="Troubleshooting Guide",c={},a=[{value:"Pipeline Execution Issues",id:"pipeline-execution-issues",level:2},{value:"Pipeline doesn&#39;t execute",id:"pipeline-doesnt-execute",level:3},{value:"Pipeline throws &quot;Node not registered&quot; exception",id:"pipeline-throws-node-not-registered-exception",level:3},{value:"Pipeline connection fails silently",id:"pipeline-connection-fails-silently",level:3},{value:"Performance Issues",id:"performance-issues",level:2},{value:"Pipeline is very slow",id:"pipeline-is-very-slow",level:3},{value:"Memory usage constantly grows",id:"memory-usage-constantly-grows",level:3},{value:"Error Handling Issues",id:"error-handling-issues",level:2},{value:"Exceptions are silently swallowed",id:"exceptions-are-silently-swallowed",level:3},{value:"Cancellation not working",id:"cancellation-not-working",level:3},{value:"Retry mechanism not triggering",id:"retry-mechanism-not-triggering",level:3},{value:"Data Issues",id:"data-issues",level:2},{value:"Data transformed incorrectly",id:"data-transformed-incorrectly",level:3},{value:"Missing data in output",id:"missing-data-in-output",level:3},{value:"Configuration Issues",id:"configuration-issues",level:2},{value:"Dependency Injection not finding nodes",id:"dependency-injection-not-finding-nodes",level:3},{value:"Configuration values not applying",id:"configuration-values-not-applying",level:3},{value:"Testing Issues",id:"testing-issues",level:2},{value:"Test pipeline doesn&#39;t execute expected nodes",id:"test-pipeline-doesnt-execute-expected-nodes",level:3},{value:"Mocks not being used in pipeline",id:"mocks-not-being-used-in-pipeline",level:3},{value:"\u27a1\ufe0f Next Steps",id:"arrow_right-next-steps",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"troubleshooting-guide",children:"Troubleshooting Guide"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u2139\ufe0f"," ",(0,s.jsx)(n.strong,{children:"Related Documentation"}),"\r\nIf you're experiencing issues with ",(0,s.jsx)(n.strong,{children:"resilience configuration"})," (retries, node restarts, materialization), see ",(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/troubleshooting",children:"Resilience Troubleshooting"})," instead."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"pipeline-execution-issues",children:"Pipeline Execution Issues"}),"\n",(0,s.jsx)(n.h3,{id:"pipeline-doesnt-execute",children:"Pipeline doesn't execute"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," Pipeline runs but nothing happens."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Common Causes:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Sinks not configured"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Source and transform but no sink\r\nclass MyPipeline : IPipelineDefinition\r\n{\r\n    public void Define(PipelineBuilder builder, PipelineContext context)\r\n    {\r\n        var source = builder.AddSource<MySource, MyData>();\r\n        var transform = builder.AddTransform<MyTransform, MyData, ProcessedData>();\r\n        builder.Connect(source, transform);\r\n        // Missing sink connection!\r\n    }\r\n}\r\n\r\n// \u2705 GOOD - Complete pipeline with sink\r\nclass MyPipeline : IPipelineDefinition\r\n{\r\n    public void Define(PipelineBuilder builder, PipelineContext context)\r\n    {\r\n        var source = builder.AddSource<MySource, MyData>();\r\n        var transform = builder.AddTransform<MyTransform, MyData, ProcessedData>();\r\n        var sink = builder.AddSink<MySink, ProcessedData>();\r\n        builder.Connect(source, transform);\r\n        builder.Connect(transform, sink); // \u2705 Sink connected\r\n    }\r\n}\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Source not yielding data"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Verify your source node returns data:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'public override IDataPipe<T> ExecuteAsync(PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    static IAsyncEnumerable<T> GetDataAsync(CancellationToken ct)\r\n    {\r\n        return GetData();\r\n\r\n        async IAsyncEnumerable<T> GetData()\r\n        {\r\n            // Add logging to verify data is being yielded\r\n            await foreach (var item in GetSourceData(ct))\r\n            {\r\n                Console.WriteLine($"Yielding: {item}"); // \u2705 Verify data\r\n                yield return item;\r\n            }\r\n        }\r\n    }\r\n\r\n    return new StreamingDataPipe<T>(GetDataAsync(cancellationToken));\r\n}\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Transform returning empty"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Ensure transform yields data for each input:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Might not yield for all items\r\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    if (item.IsSpecial)\r\n        return Task.FromResult(item);\r\n    // Returns null implicitly for others \u274c\r\n}\r\n\r\n// \u2705 GOOD - Explicit for all paths\r\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    if (item.IsSpecial)\r\n        return Task.FromResult(Transform(item));\r\n    else\r\n        return Task.FromResult(item); // \u2705 Always return\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pipeline-throws-node-not-registered-exception",children:'Pipeline throws "Node not registered" exception'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," ",(0,s.jsx)(n.code,{children:"InvalidOperationException: Node type not found in registry"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," Nodes not registered with dependency injection."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution - Assembly Scanning (Automatic Discovery):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c WRONG - No assembly specified\r\nservices.AddNPipeline();\r\n\r\n// \u2705 CORRECT - Include your assembly\r\nservices.AddNPipeline(Assembly.GetExecutingAssembly());\r\n\r\n// \u2705 CORRECT - Include multiple assemblies if nodes are in different projects\r\nservices.AddNPipeline(\r\n    Assembly.GetExecutingAssembly(),\r\n    typeof(ExternalNode).Assembly\r\n);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution - Fluent Configuration (Explicit Registration):"})}),"\n",(0,s.jsx)(n.p,{children:"If you prefer not to use reflection or have a specific set of nodes, use the fluent API:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u2705 CORRECT - Explicit registration without reflection\r\nservices.AddNPipeline(builder => builder\r\n    .AddNode<MySourceNode>()\r\n    .AddNode<MyTransformNode>()\r\n    .AddNode<MySinkNode>()\r\n    .AddPipeline<MyPipelineDefinition>()\r\n);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pipeline-connection-fails-silently",children:"Pipeline connection fails silently"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," Nodes connect but data doesn't flow."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," Incompatible types or incorrect graph structure."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution:"})," Verify type compatibility:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Type mismatch\r\nvar source = builder.AddSource<SourceNode<int>, int>();\r\nvar transform = builder.AddTransform<TransformNode<string, int>, string, int>(); // \u274c Expects string\r\nbuilder.Connect(source, transform); // Type mismatch!\r\n\r\n// \u2705 GOOD - Matching types\r\nvar source = builder.AddSource<SourceNode<int>, int>();\r\nvar transform = builder.AddTransform<TransformNode<int, int>, int, int>(); // \u2705 Expects int\r\nbuilder.Connect(source, transform);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,s.jsx)(n.h3,{id:"pipeline-is-very-slow",children:"Pipeline is very slow"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Diagnosis Steps:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Measure each stage:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'public override async Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    var sw = Stopwatch.StartNew();\r\n    try\r\n    {\r\n        var result = await SlowOperationAsync(item, cancellationToken);\r\n        sw.Stop();\r\n        if (sw.ElapsedMilliseconds > 1000)\r\n            logger.LogWarning($"Slow operation: {sw.ElapsedMilliseconds}ms");\r\n        return result;\r\n    }\r\n    catch (Exception ex)\r\n    {\r\n        logger.LogError(ex, $"Operation failed after {sw.ElapsedMilliseconds}ms");\r\n        throw;\r\n    }\r\n}\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Check for blocking operations:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Blocking I/O\r\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    var data = database.GetData(item.Id); // \u274c Synchronous blocking\r\n    return Task.FromResult(Transform(data));\r\n}\r\n\r\n// \u2705 GOOD - Async I/O\r\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    var data = await database.GetDataAsync(item.Id, cancellationToken); // \u2705 Async\r\n    return Task.FromResult(Transform(data));\r\n}\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Enable parallelism if CPU-bound:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"services.AddNPipelineParallelism();\r\n\r\n// In pipeline definition:\r\nbuilder.WithParallelOptions(new ParallelOptions { MaxDegreeOfParallelism = Environment.ProcessorCount });\n"})}),"\n",(0,s.jsx)(n.h3,{id:"memory-usage-constantly-grows",children:"Memory usage constantly grows"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," Application memory increases over time."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Common Causes:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Loading all data into memory:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Loads all records at once\r\nasync IAsyncEnumerable<Item> ReadAsync()\r\n{\r\n    var allRecords = database.GetAllRecords().ToList(); // \u274c Everything in memory!\r\n    foreach (var record in allRecords)\r\n        yield return record;\r\n}\r\n\r\n// \u2705 GOOD - Streams from database\r\nasync IAsyncEnumerable<Item> ReadAsync()\r\n{\r\n    var reader = database.GetRecords(); // \u2705 Lazy enumerable\r\n    await foreach (var record in reader)\r\n        yield return record;\r\n}\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Not disposing resources:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Connections not disposed\r\npublic override async Task ExecuteAsync(IDataPipe<Item> input, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    var connection = new SqlConnection(_connString);\r\n    await connection.OpenAsync(cancellationToken);\r\n    // ... use connection\r\n    // Missing dispose!\r\n}\r\n\r\n// \u2705 GOOD - Properly disposed\r\npublic override async Task ExecuteAsync(IDataPipe<Item> input, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    using var connection = new SqlConnection(_connString);\r\n    await connection.OpenAsync(cancellationToken);\r\n    // ... use connection\r\n    // Disposed when out of scope\r\n}\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Accumulating state in context:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// \u274c BAD - Context grows unbounded\r\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    if (!context.Items.ContainsKey("cache"))\r\n        context.Items["cache"] = new Dictionary<int, Item>();\r\n\r\n    var cache = context.Items["cache"] as Dictionary<int, Item>;\r\n    cache[item.Id] = item; // \u274c Cache grows forever!\r\n    return Task.FromResult(item);\r\n}\r\n\r\n// \u2705 GOOD - Limited cache or external state\r\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    // Use bounded cache or external storage\r\n    _cache.AddOrUpdate(item.Id, item,\r\n        (_, old) => item,\r\n        TimeSpan.FromMinutes(5)); // \u2705 Bounded by time\r\n    return Task.FromResult(item);\r\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"error-handling-issues",children:"Error Handling Issues"}),"\n",(0,s.jsx)(n.h3,{id:"exceptions-are-silently-swallowed",children:"Exceptions are silently swallowed"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," Pipeline runs without errors but data isn't processed."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," Caught and not re-thrown or logged."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// \u274c BAD - Silent failures\r\ntry\r\n{\r\n    return await ProcessAsync(item);\r\n}\r\ncatch (Exception ex)\r\n{\r\n    // \u274c Swallowed silently\r\n}\r\n\r\n// \u2705 GOOD - Logged and re-thrown\r\ntry\r\n{\r\n    return await ProcessAsync(item);\r\n}\r\ncatch (Exception ex)\r\n{\r\n    logger.LogError(ex, "Processing failed for item");\r\n    throw; // \u2705 Re-throw or handle explicitly\r\n}\n'})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\ud83d\udca1 Tip:"})," If you encounter error codes in your exceptions (e.g., ",(0,s.jsx)(n.code,{children:"[NP0301]"}),"), see the ",(0,s.jsx)(n.a,{href:"/docs/reference/error-codes",children:"Error Codes Reference"})," for detailed explanations and solutions."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"cancellation-not-working",children:"Cancellation not working"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," Pipeline ignores cancellation requests."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," Not checking the cancellation token."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Ignores cancellation\r\npublic override async Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    for (int i = 0; i < 1000000; i++)\r\n    {\r\n        await Task.Delay(10); // \u274c No cancellation check\r\n    }\r\n    return item;\r\n}\r\n\r\n// \u2705 GOOD - Checks cancellation\r\npublic override async Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    for (int i = 0; i < 1000000; i++)\r\n    {\r\n        cancellationToken.ThrowIfCancellationRequested(); // \u2705 Check token\r\n        await Task.Delay(10, cancellationToken);\r\n    }\r\n    return item;\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"retry-mechanism-not-triggering",children:"Retry mechanism not triggering"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," Transient errors cause pipeline to fail instead of retry."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution:"})," Implement explicit retry logic:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'private async Task<T> ExecuteWithRetryAsync<T>(\r\n    Func<CancellationToken, Task<T>> operation,\r\n    int maxRetries = 3,\r\n    CancellationToken cancellationToken = default)\r\n{\r\n    int retryCount = 0;\r\n\r\n    while (true)\r\n    {\r\n        try\r\n        {\r\n            return await operation(cancellationToken);\r\n        }\r\n        catch (IOException) when (retryCount < maxRetries) // \u2705 Retry on transient\r\n        {\r\n            retryCount++;\r\n            var delay = TimeSpan.FromSeconds(Math.Pow(2, retryCount - 1));\r\n            logger.LogWarning($"Transient error, retrying in {delay.TotalSeconds}s");\r\n            await Task.Delay(delay, cancellationToken);\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"data-issues",children:"Data Issues"}),"\n",(0,s.jsx)(n.h3,{id:"data-transformed-incorrectly",children:"Data transformed incorrectly"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," Output data is malformed or incomplete."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Diagnosis:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Add detailed logging:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'public override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    logger.LogDebug($"Input: {JsonSerializer.Serialize(item)}");\r\n    var result = Transform(item);\r\n    logger.LogDebug($"Output: {JsonSerializer.Serialize(result)}");\r\n    return Task.FromResult(result);\r\n}\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Verify with unit tests:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"[Fact]\r\npublic async Task TransformHandlesNullValues()\r\n{\r\n    var transform = new MyTransform();\r\n    var context = new PipelineContext();\r\n\r\n    var input = new Item { Value = null };\r\n    var output = await transform.ExecuteAsync(input, context, CancellationToken.None);\r\n\r\n    Assert.NotNull(output);\r\n    Assert.Null(output.Value);\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"missing-data-in-output",children:"Missing data in output"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," Some input records don't appear in output."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Common Causes:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Transform filtering unintentionally:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// \u274c BAD - Implicit filtering\r\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    if (item.IsValid)\r\n        return Task.FromResult(Transform(item));\r\n    // \u274c Null returned for invalid items\r\n}\r\n\r\n// \u2705 GOOD - Explicit handling\r\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n{\r\n    if (!item.IsValid)\r\n    {\r\n        logger.LogWarning($"Invalid item skipped: {item.Id}");\r\n        throw new ValidationException(); // \u2705 Fail fast or log\r\n    }\r\n    return Task.FromResult(Transform(item));\r\n}\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Async enumerable not fully consumed:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Only reads first item\r\nvar result = await source.ExecuteAsync(context, CancellationToken.None);\r\nvar first = (await result.GetAsyncEnumerator().MoveNextAsync()).Current;\r\n\r\n// \u2705 GOOD - Consumes all items\r\nvar result = await source.ExecuteAsync(context, CancellationToken.None);\r\nawait foreach (var item in result)\r\n{\r\n    // Process all items\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"configuration-issues",children:"Configuration Issues"}),"\n",(0,s.jsx)(n.h3,{id:"dependency-injection-not-finding-nodes",children:"Dependency Injection not finding nodes"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," ",(0,s.jsx)(n.code,{children:"ServiceCollection doesn't contain..."})," or similar."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," Assembly scanning not including node locations."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// Include all assemblies containing nodes\r\nservices.AddNPipeline(\r\n    typeof(MyNode).Assembly,\r\n    typeof(AnotherNode).Assembly\r\n);\r\n\r\n// Or use the entry assembly\r\nservices.AddNPipeline(Assembly.GetEntryAssembly()!);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"configuration-values-not-applying",children:"Configuration values not applying"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," Settings are defined but not used by nodes."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution:"})," Inject ",(0,s.jsx)(n.code,{children:"IOptions<T>"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public class MyTransform : TransformNode<Item, Item>\r\n{\r\n    private readonly IOptions<MySettings> _options;\r\n\r\n    public MyTransform(IOptions<MySettings> options)\r\n    {\r\n        _options = options;\r\n    }\r\n\r\n    public override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\r\n    {\r\n        var timeout = _options.Value.Timeout; // \u2705 Use injected settings\r\n        return Task.FromResult(item);\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testing-issues",children:"Testing Issues"}),"\n",(0,s.jsx)(n.h3,{id:"test-pipeline-doesnt-execute-expected-nodes",children:"Test pipeline doesn't execute expected nodes"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," Test passes but you're unsure nodes actually ran."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution:"})," Add verification logging:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'[Fact]\r\npublic async Task PipelineProcessesData()\r\n{\r\n    var source = new InMemorySourceNode<int> { Data = new[] { 1, 2, 3 } };\r\n    var sink = new InMemorySinkNode<int>();\r\n\r\n    var context = new PipelineContext();\r\n    var runner = new PipelineRunner();\r\n\r\n    // Register nodes\r\n    context.Items["source"] = source;\r\n    context.Items["sink"] = sink;\r\n\r\n    await runner.RunAsync<MyPipeline>(context);\r\n\r\n    // Verify sink received data\r\n    var results = await sink.Completion;\r\n    Assert.Equal(3, results.Count); // \u2705 Verify processing occurred\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"mocks-not-being-used-in-pipeline",children:"Mocks not being used in pipeline"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptoms:"})," Test uses mock but real service is called."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," Registration order matters in DI - services added first take precedence."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution - Assembly Scanning Approach:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"var mockService = new Mock<IMyService>();\r\nvar services = new ServiceCollection();\r\n\r\n// Register mock BEFORE AddNPipeline so it's used\r\nservices.AddSingleton(mockService.Object);\r\nservices.AddNPipeline(Assembly.GetExecutingAssembly());\r\n\r\nvar provider = services.BuildServiceProvider();\r\nvar runner = provider.GetRequiredService<IPipelineRunner>();\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution - Fluent Configuration Approach:"})}),"\n",(0,s.jsx)(n.p,{children:"With fluent configuration, you can explicitly control which nodes/services are registered:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"var mockService = new Mock<IMyService>();\r\nvar services = new ServiceCollection();\r\n\r\n// Register mock BEFORE AddNPipeline fluent builder\r\nservices.AddSingleton(mockService.Object);\r\n\r\n// Explicitly register only the nodes you want, skipping real implementations\r\nservices.AddNPipeline(builder => builder\r\n    .AddNode<MySourceNode>()\r\n    .AddNode<MyTransformNode>()\r\n    .AddNode<MySinkNode>()\r\n    .AddPipeline<MyPipelineDefinition>()\r\n    // No assembly scanning means no other nodes auto-registered\r\n);\r\n\r\nvar provider = services.BuildServiceProvider();\r\nvar runner = provider.GetRequiredService<IPipelineRunner>();\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\r\n## Getting Help\r\n\r\nIf you can't resolve the issue:\r\n\r\n1. **Check the logs** - Enable debug logging:\r\n\r\n```csharp\r\nservices.AddLogging(builder => builder.AddConsole().SetMinimumLevel(LogLevel.Debug));\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Review similar examples"})," - See ",(0,s.jsx)(n.a,{href:"/docs/core-concepts/common-patterns",children:"Common Patterns"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["Check ",(0,s.jsx)(n.a,{href:"/docs/introduction/faq",children:"FAQ"})]})," - Common questions answered"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["Review ",(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/error-handling-guide",children:"Error Handling"})]})," - Error-specific guidance"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Look up error codes"})," - See ",(0,s.jsx)(n.a,{href:"/docs/reference/error-codes",children:"Error Codes Reference"})," for NP error codes (e.g., ",(0,s.jsx)(n.code,{children:"[NP0101]"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Check source code"})," - Inspect node implementations in ",(0,s.jsx)(n.code,{children:"/src/NPipeline"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"arrow_right-next-steps",children:["\u27a1\ufe0f"," Next Steps"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/docs/introduction/faq",children:"FAQ"})}),": Common questions and answers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/docs/core-concepts/resilience/error-handling-guide",children:"Error Handling"})}),": Comprehensive error handling guide"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"#getting-help",children:"Getting Help"})}),": How to get support for unresolved issues"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);