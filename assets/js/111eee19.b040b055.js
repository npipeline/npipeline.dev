"use strict";(self.webpackChunknpipeline=self.webpackChunknpipeline||[]).push([[8779],{8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}},9071:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"reference/troubleshooting","title":"Troubleshooting Guide","description":"Common NPipeline issues and solutions.","source":"@site/docs/reference/troubleshooting.md","sourceDirName":"reference","slug":"/reference/troubleshooting","permalink":"/docs/reference/troubleshooting","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Troubleshooting Guide","description":"Common NPipeline issues and solutions.","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Frequently Asked Questions","permalink":"/docs/reference/faq"},"next":{"title":"NPipeline Error Codes Reference","permalink":"/docs/reference/error-codes"}}');var r=i(4848),t=i(8453);const o={title:"Troubleshooting Guide",description:"Common NPipeline issues and solutions.",sidebar_position:4},l="Troubleshooting Guide",c={},a=[{value:"Pipeline Execution Issues",id:"pipeline-execution-issues",level:2},{value:"Pipeline doesn&#39;t execute",id:"pipeline-doesnt-execute",level:3},{value:"Pipeline throws &quot;Node not registered&quot; exception",id:"pipeline-throws-node-not-registered-exception",level:3},{value:"Pipeline connection fails silently",id:"pipeline-connection-fails-silently",level:3},{value:"Performance Issues",id:"performance-issues",level:2},{value:"Pipeline is very slow",id:"pipeline-is-very-slow",level:3},{value:"Memory usage constantly grows",id:"memory-usage-constantly-grows",level:3},{value:"Error Handling Issues",id:"error-handling-issues",level:2},{value:"Exceptions are silently swallowed",id:"exceptions-are-silently-swallowed",level:3},{value:"Cancellation not working",id:"cancellation-not-working",level:3},{value:"Retry mechanism not triggering",id:"retry-mechanism-not-triggering",level:3},{value:"Data Issues",id:"data-issues",level:2},{value:"Data transformed incorrectly",id:"data-transformed-incorrectly",level:3},{value:"Missing data in output",id:"missing-data-in-output",level:3},{value:"Configuration Issues",id:"configuration-issues",level:2},{value:"Dependency Injection not finding nodes",id:"dependency-injection-not-finding-nodes",level:3},{value:"Configuration values not applying",id:"configuration-values-not-applying",level:3},{value:"Testing Issues",id:"testing-issues",level:2},{value:"Test pipeline doesn&#39;t execute expected nodes",id:"test-pipeline-doesnt-execute-expected-nodes",level:3},{value:"Mocks not being used in pipeline",id:"mocks-not-being-used-in-pipeline",level:3},{value:"Getting Help",id:"getting-help",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"troubleshooting-guide",children:"Troubleshooting Guide"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Related Documentation"}),"\nIf you're experiencing issues with ",(0,r.jsx)(n.strong,{children:"resilience configuration"})," (retries, node restarts, materialization), see ",(0,r.jsx)(n.a,{href:"/docs/core-concepts/resilience/troubleshooting",children:"Resilience Troubleshooting"})," instead."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"pipeline-execution-issues",children:"Pipeline Execution Issues"}),"\n",(0,r.jsx)(n.h3,{id:"pipeline-doesnt-execute",children:"Pipeline doesn't execute"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Pipeline runs but nothing happens."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common Causes:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Sinks not configured"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Source and transform but no sink\nclass MyPipeline : IPipelineDefinition\n{\n    public void Define(PipelineBuilder builder, PipelineContext context)\n    {\n        var source = builder.AddSource<MySource, MyData>();\n        var transform = builder.AddTransform<MyTransform, MyData, ProcessedData>();\n        builder.Connect(source, transform);\n        // Missing sink connection!\n    }\n}\n\n// \u2705 GOOD - Complete pipeline with sink\nclass MyPipeline : IPipelineDefinition\n{\n    public void Define(PipelineBuilder builder, PipelineContext context)\n    {\n        var source = builder.AddSource<MySource, MyData>();\n        var transform = builder.AddTransform<MyTransform, MyData, ProcessedData>();\n        var sink = builder.AddSink<MySink, ProcessedData>();\n        builder.Connect(source, transform);\n        builder.Connect(transform, sink); // \u2705 Sink connected\n    }\n}\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Source not yielding data"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Verify your source node returns data:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'public override IDataPipe<T> ExecuteAsync(PipelineContext context, CancellationToken cancellationToken)\n{\n    static IAsyncEnumerable<T> GetDataAsync(CancellationToken ct)\n    {\n        return GetData();\n\n        async IAsyncEnumerable<T> GetData()\n        {\n            // Add logging to verify data is being yielded\n            await foreach (var item in GetSourceData(ct))\n            {\n                Console.WriteLine($"Yielding: {item}"); // \u2705 Verify data\n                yield return item;\n            }\n        }\n    }\n\n    return new StreamingDataPipe<T>(GetDataAsync(cancellationToken));\n}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Transform returning empty"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Ensure transform yields data for each input:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Might not yield for all items\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    if (item.IsSpecial)\n        return Task.FromResult(item);\n    // Returns null implicitly for others \u274c\n}\n\n// \u2705 GOOD - Explicit for all paths\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    if (item.IsSpecial)\n        return Task.FromResult(Transform(item));\n    else\n        return Task.FromResult(item); // \u2705 Always return\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pipeline-throws-node-not-registered-exception",children:'Pipeline throws "Node not registered" exception'}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," ",(0,r.jsx)(n.code,{children:"InvalidOperationException: Node type not found in registry"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause:"})," Nodes not registered with dependency injection."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solution - Assembly Scanning (Automatic Discovery):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// \u274c WRONG - No assembly specified\nservices.AddNPipeline();\n\n// \u2705 CORRECT - Include your assembly\nservices.AddNPipeline(Assembly.GetExecutingAssembly());\n\n// \u2705 CORRECT - Include multiple assemblies if nodes are in different projects\nservices.AddNPipeline(\n    Assembly.GetExecutingAssembly(),\n    typeof(ExternalNode).Assembly\n);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solution - Fluent Configuration (Explicit Registration):"})}),"\n",(0,r.jsx)(n.p,{children:"If you prefer not to use reflection or have a specific set of nodes, use the fluent API:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// \u2705 CORRECT - Explicit registration without reflection\nservices.AddNPipeline(builder => builder\n    .AddNode<MySourceNode>()\n    .AddNode<MyTransformNode>()\n    .AddNode<MySinkNode>()\n    .AddPipeline<MyPipelineDefinition>()\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pipeline-connection-fails-silently",children:"Pipeline connection fails silently"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Nodes connect but data doesn't flow."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause:"})," Incompatible types or incorrect graph structure."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Verify type compatibility:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Type mismatch\nvar source = builder.AddSource<SourceNode<int>, int>();\nvar transform = builder.AddTransform<TransformNode<string, int>, string, int>(); // \u274c Expects string\nbuilder.Connect(source, transform); // Type mismatch!\n\n// \u2705 GOOD - Matching types\nvar source = builder.AddSource<SourceNode<int>, int>();\nvar transform = builder.AddTransform<TransformNode<int, int>, int, int>(); // \u2705 Expects int\nbuilder.Connect(source, transform);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,r.jsx)(n.h3,{id:"pipeline-is-very-slow",children:"Pipeline is very slow"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Diagnosis Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Measure each stage:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'public override async Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    var sw = Stopwatch.StartNew();\n    try\n    {\n        var result = await SlowOperationAsync(item, cancellationToken);\n        sw.Stop();\n        if (sw.ElapsedMilliseconds > 1000)\n            logger.LogWarning($"Slow operation: {sw.ElapsedMilliseconds}ms");\n        return result;\n    }\n    catch (Exception ex)\n    {\n        logger.LogError(ex, $"Operation failed after {sw.ElapsedMilliseconds}ms");\n        throw;\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Check for blocking operations:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Blocking I/O\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    var data = database.GetData(item.Id); // \u274c Synchronous blocking\n    return Task.FromResult(Transform(data));\n}\n\n// \u2705 GOOD - Async I/O\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    var data = await database.GetDataAsync(item.Id, cancellationToken); // \u2705 Async\n    return Task.FromResult(Transform(data));\n}\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Enable parallelism if CPU-bound:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"services.AddNPipelineParallelism();\n\n// In pipeline definition:\nbuilder.WithParallelOptions(new ParallelOptions { MaxDegreeOfParallelism = Environment.ProcessorCount });\n"})}),"\n",(0,r.jsx)(n.h3,{id:"memory-usage-constantly-grows",children:"Memory usage constantly grows"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Application memory increases over time."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common Causes:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Loading all data into memory:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Loads all records at once\nasync IAsyncEnumerable<Item> ReadAsync()\n{\n    var allRecords = database.GetAllRecords().ToList(); // \u274c Everything in memory!\n    foreach (var record in allRecords)\n        yield return record;\n}\n\n// \u2705 GOOD - Streams from database\nasync IAsyncEnumerable<Item> ReadAsync()\n{\n    var reader = database.GetRecords(); // \u2705 Lazy enumerable\n    await foreach (var record in reader)\n        yield return record;\n}\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Not disposing resources:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Connections not disposed\npublic override async Task ExecuteAsync(IDataPipe<Item> input, PipelineContext context, CancellationToken cancellationToken)\n{\n    var connection = new SqlConnection(_connString);\n    await connection.OpenAsync(cancellationToken);\n    // ... use connection\n    // Missing dispose!\n}\n\n// \u2705 GOOD - Properly disposed\npublic override async Task ExecuteAsync(IDataPipe<Item> input, PipelineContext context, CancellationToken cancellationToken)\n{\n    using var connection = new SqlConnection(_connString);\n    await connection.OpenAsync(cancellationToken);\n    // ... use connection\n    // Disposed when out of scope\n}\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Accumulating state in context:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'// \u274c BAD - Context grows unbounded\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    if (!context.Items.ContainsKey("cache"))\n        context.Items["cache"] = new Dictionary<int, Item>();\n\n    var cache = context.Items["cache"] as Dictionary<int, Item>;\n    cache[item.Id] = item; // \u274c Cache grows forever!\n    return Task.FromResult(item);\n}\n\n// \u2705 GOOD - Limited cache or external state\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    // Use bounded cache or external storage\n    _cache.AddOrUpdate(item.Id, item,\n        (_, old) => item,\n        TimeSpan.FromMinutes(5)); // \u2705 Bounded by time\n    return Task.FromResult(item);\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"error-handling-issues",children:"Error Handling Issues"}),"\n",(0,r.jsx)(n.h3,{id:"exceptions-are-silently-swallowed",children:"Exceptions are silently swallowed"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Pipeline runs without errors but data isn't processed."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause:"})," Caught and not re-thrown or logged."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'// \u274c BAD - Silent failures\ntry\n{\n    return await ProcessAsync(item);\n}\ncatch (Exception ex)\n{\n    // \u274c Swallowed silently\n}\n\n// \u2705 GOOD - Logged and re-thrown\ntry\n{\n    return await ProcessAsync(item);\n}\ncatch (Exception ex)\n{\n    logger.LogError(ex, "Processing failed for item");\n    throw; // \u2705 Re-throw or handle explicitly\n}\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tip:"})," If you encounter error codes in your exceptions (e.g., ",(0,r.jsx)(n.code,{children:"[NP0301]"}),"), see the ",(0,r.jsx)(n.a,{href:"/docs/reference/error-codes",children:"Error Codes Reference"})," for detailed explanations and solutions."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cancellation-not-working",children:"Cancellation not working"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Pipeline ignores cancellation requests."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause:"})," Not checking the cancellation token."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Ignores cancellation\npublic override async Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    for (int i = 0; i < 1000000; i++)\n    {\n        await Task.Delay(10); // \u274c No cancellation check\n    }\n    return item;\n}\n\n// \u2705 GOOD - Checks cancellation\npublic override async Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    for (int i = 0; i < 1000000; i++)\n    {\n        cancellationToken.ThrowIfCancellationRequested(); // \u2705 Check token\n        await Task.Delay(10, cancellationToken);\n    }\n    return item;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"retry-mechanism-not-triggering",children:"Retry mechanism not triggering"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Transient errors cause pipeline to fail instead of retry."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Implement explicit retry logic:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'private async Task<T> ExecuteWithRetryAsync<T>(\n    Func<CancellationToken, Task<T>> operation,\n    int maxRetries = 3,\n    CancellationToken cancellationToken = default)\n{\n    int retryCount = 0;\n\n    while (true)\n    {\n        try\n        {\n            return await operation(cancellationToken);\n        }\n        catch (IOException) when (retryCount < maxRetries) // \u2705 Retry on transient\n        {\n            retryCount++;\n            var delay = TimeSpan.FromSeconds(Math.Pow(2, retryCount - 1));\n            logger.LogWarning($"Transient error, retrying in {delay.TotalSeconds}s");\n            await Task.Delay(delay, cancellationToken);\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"data-issues",children:"Data Issues"}),"\n",(0,r.jsx)(n.h3,{id:"data-transformed-incorrectly",children:"Data transformed incorrectly"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Output data is malformed or incomplete."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Diagnosis:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Add detailed logging:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'public override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    logger.LogDebug($"Input: {JsonSerializer.Serialize(item)}");\n    var result = Transform(item);\n    logger.LogDebug($"Output: {JsonSerializer.Serialize(result)}");\n    return Task.FromResult(result);\n}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Verify with unit tests:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"[Fact]\npublic async Task TransformHandlesNullValues()\n{\n    var transform = new MyTransform();\n    var context = new PipelineContext();\n\n    var input = new Item { Value = null };\n    var output = await transform.ExecuteAsync(input, context, CancellationToken.None);\n\n    Assert.NotNull(output);\n    Assert.Null(output.Value);\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"missing-data-in-output",children:"Missing data in output"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Some input records don't appear in output."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common Causes:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Transform filtering unintentionally:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'// \u274c BAD - Implicit filtering\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    if (item.IsValid)\n        return Task.FromResult(Transform(item));\n    // \u274c Null returned for invalid items\n}\n\n// \u2705 GOOD - Explicit handling\npublic override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n{\n    if (!item.IsValid)\n    {\n        logger.LogWarning($"Invalid item skipped: {item.Id}");\n        throw new ValidationException(); // \u2705 Fail fast or log\n    }\n    return Task.FromResult(Transform(item));\n}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Async enumerable not fully consumed:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// \u274c BAD - Only reads first item\nvar result = await source.Execute(context, CancellationToken.None);\nvar first = (await result.GetAsyncEnumerator().MoveNextAsync()).Current;\n\n// \u2705 GOOD - Consumes all items\nvar result = await source.Execute(context, CancellationToken.None);\nawait foreach (var item in result)\n{\n    // Process all items\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuration-issues",children:"Configuration Issues"}),"\n",(0,r.jsx)(n.h3,{id:"dependency-injection-not-finding-nodes",children:"Dependency Injection not finding nodes"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," ",(0,r.jsx)(n.code,{children:"ServiceCollection doesn't contain..."})," or similar."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause:"})," Assembly scanning not including node locations."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"// Include all assemblies containing nodes\nservices.AddNPipeline(\n    typeof(MyNode).Assembly,\n    typeof(AnotherNode).Assembly\n);\n\n// Or use the entry assembly\nservices.AddNPipeline(Assembly.GetEntryAssembly()!);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configuration-values-not-applying",children:"Configuration values not applying"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Settings are defined but not used by nodes."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Inject ",(0,r.jsx)(n.code,{children:"IOptions<T>"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public class MyTransform : TransformNode<Item, Item>\n{\n    private readonly IOptions<MySettings> _options;\n\n    public MyTransform(IOptions<MySettings> options)\n    {\n        _options = options;\n    }\n\n    public override Task<Item> ExecuteAsync(Item item, PipelineContext context, CancellationToken cancellationToken)\n    {\n        var timeout = _options.Value.Timeout; // \u2705 Use injected settings\n        return Task.FromResult(item);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"testing-issues",children:"Testing Issues"}),"\n",(0,r.jsx)(n.h3,{id:"test-pipeline-doesnt-execute-expected-nodes",children:"Test pipeline doesn't execute expected nodes"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Test passes but you're unsure nodes actually ran."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Add verification logging:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'[Fact]\npublic async Task PipelineProcessesData()\n{\n    var source = new InMemorySourceNode<int> { Data = new[] { 1, 2, 3 } };\n    var sink = new InMemorySinkNode<int>();\n\n    var context = new PipelineContext();\n    var runner = PipelineRunner.Create();\n\n    // Register nodes\n    context.Items["source"] = source;\n    context.Items["sink"] = sink;\n\n    await runner.RunAsync<MyPipeline>(context);\n\n    // Verify sink received data\n    var results = await sink.Completion;\n    Assert.Equal(3, results.Count); // \u2705 Verify processing occurred\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"mocks-not-being-used-in-pipeline",children:"Mocks not being used in pipeline"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Test uses mock but real service is called."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause:"})," Registration order matters in DI - services added first take precedence."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solution - Assembly Scanning Approach:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"var mockService = new Mock<IMyService>();\nvar services = new ServiceCollection();\n\n// Register mock BEFORE AddNPipeline so it's used\nservices.AddSingleton(mockService.Object);\nservices.AddNPipeline(Assembly.GetExecutingAssembly());\n\nvar provider = services.BuildServiceProvider();\nvar runner = provider.GetRequiredService<IPipelineRunner>();\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solution - Fluent Configuration Approach:"})}),"\n",(0,r.jsx)(n.p,{children:"With fluent configuration, you can explicitly control which nodes/services are registered:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"var mockService = new Mock<IMyService>();\nvar services = new ServiceCollection();\n\n// Register mock BEFORE AddNPipeline fluent builder\nservices.AddSingleton(mockService.Object);\n\n// Explicitly register only the nodes you want, skipping real implementations\nservices.AddNPipeline(builder => builder\n    .AddNode<MySourceNode>()\n    .AddNode<MyTransformNode>()\n    .AddNode<MySinkNode>()\n    .AddPipeline<MyPipelineDefinition>()\n    // No assembly scanning means no other nodes auto-registered\n);\n\nvar provider = services.BuildServiceProvider();\nvar runner = provider.GetRequiredService<IPipelineRunner>();\n"})}),"\n",(0,r.jsx)(n.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,r.jsx)(n.p,{children:"If you can't resolve the issue:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Check the logs"})," - Enable debug logging:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"services.AddLogging(builder => builder.AddConsole().SetMinimumLevel(LogLevel.Debug));\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Review similar examples"})," - See ",(0,r.jsx)(n.a,{href:"/docs/core-concepts/common-patterns",children:"Common Patterns"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.strong,{children:["Check ",(0,r.jsx)(n.a,{href:"/docs/reference/faq",children:"FAQ"})]})," - Common questions answered"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.strong,{children:["Review ",(0,r.jsx)(n.a,{href:"/docs/core-concepts/resilience/error-handling",children:"Error Handling"})]})," - Error-specific guidance"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Look up error codes"})," - See ",(0,r.jsx)(n.a,{href:"/docs/reference/error-codes",children:"Error Codes Reference"})," for NP error codes (e.g., ",(0,r.jsx)(n.code,{children:"[NP0101]"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Check source code"})," - Inspect node implementations in ",(0,r.jsx)(n.code,{children:"/src/NPipeline"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/reference/faq",children:"FAQ"})}),": Common questions and answers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/core-concepts/resilience/error-handling",children:"Error Handling"})}),": Comprehensive error handling guide"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/reference/error-codes",children:"Error Codes Reference"})}),": Look up error codes and solutions"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);